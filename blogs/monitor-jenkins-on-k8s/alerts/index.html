<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://joostvdg.github.io/blogs/monitor-jenkins-on-k8s/alerts/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.2.2"><title>Alerts - J's Software Development Pages</title><link rel=stylesheet href=../../../assets/stylesheets/main.a2408e81.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content=#ffa726><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7CCutive+Mono&display=fallback"><style>body,input{font-family:"Lato",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Cutive Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-145385967-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=orange data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#alerts-with-alertmanager class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://joostvdg.github.io title="J's Software Development Pages" class="md-header-nav__button md-logo" aria-label="J's Software Development Pages"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> J's Software Development Pages </span> <span class="md-header-nav__topic md-ellipsis"> Alerts </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/joostvdg/joostvdg.github.io/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../jenkins-pipeline-support-tool/ class="md-tabs__link md-tabs__link--active"> Blogs </a> </li> <li class=md-tabs__item> <a href=../../../cloudbees/sso-azure-ad/ class=md-tabs__link> Jenkins & CloudBees </a> </li> <li class=md-tabs__item> <a href=../../../jenkinsx/build-packs/ class=md-tabs__link> Jenkins X </a> </li> <li class=md-tabs__item> <a href=../../../openshift/rhos311-gcp-minimal/ class=md-tabs__link> Containers </a> </li> <li class=md-tabs__item> <a href=../../../cloud/automation-pulumi/ class=md-tabs__link> Software Eng. </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://joostvdg.github.io title="J's Software Development Pages" class="md-nav__button md-logo" aria-label="J's Software Development Pages"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> J's Software Development Pages </label> <div class=md-nav__source> <a href=https://github.com/joostvdg/joostvdg.github.io/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Me class=md-nav__link> Me </a> </li> <li class=md-nav__item> <a href=../../../other/mkdocs/ title="MKDocs (This Static Website)" class=md-nav__link> MKDocs (This Static Website) </a> </li> <li class=md-nav__item> <a href=../../../other/vim/ title=VIM class=md-nav__link> VIM </a> </li> <li class=md-nav__item> <a href=../../../other/shell/ title=Shell class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2 checked> <label class=md-nav__link for=nav-2> Blogs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Blogs data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../jenkins-pipeline-support-tool/ title="Jenkins Pipeline Support Tools" class=md-nav__link> Jenkins Pipeline Support Tools </a> </li> <li class=md-nav__item> <a href=../../graceful-shutdown/ title="Docker Graceful Shutdown" class=md-nav__link> Docker Graceful Shutdown </a> </li> <li class=md-nav__item> <a href=../../docker-alternatives/ title="Pipelines with Docker Alternatives" class=md-nav__link> Pipelines with Docker Alternatives </a> </li> <li class=md-nav__item> <a href=../../k8s-lets-encrypt/ title="Let's Encrypt for Kubernetes Apps" class=md-nav__link> Let's Encrypt for Kubernetes Apps </a> </li> <li class=md-nav__item> <a href=../../sso-azure-ad/ title="CloudBees SSO Azure AD" class=md-nav__link> CloudBees SSO Azure AD </a> </li> <li class=md-nav__item> <a href=../../teams-automation/ title="CloudBees Automate Teams" class=md-nav__link> CloudBees Automate Teams </a> </li> <li class=md-nav__item> <a href=../../kubernetes-sso-keycloak/ title="Kubernetes SSO Keycloak" class=md-nav__link> Kubernetes SSO Keycloak </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-8 type=checkbox id=nav-2-8> <label class=md-nav__link for=nav-2-8> Jenkins X Java Native Image Prod <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins X Java Native Image Prod" data-md-level=2> <label class=md-nav__title for=nav-2-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins X Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/01-intro/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/02-cloud-sql/ title="Cloud SQL" class=md-nav__link> Cloud SQL </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/03-quarkus/ title=Quarkus class=md-nav__link> Quarkus </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/04-jx-import/ title="Import Into Jenkins X" class=md-nav__link> Import Into Jenkins X </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/05-jx-secrets/ title="Database Connection And Secrets" class=md-nav__link> Database Connection And Secrets </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/06-native-image/ title="Native Image" class=md-nav__link> Native Image </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/07-pipeline-improvements/ title="Pipeline Improvements" class=md-nav__link> Pipeline Improvements </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/08-preview-int-test/ title="Previews & Integration Tests" class=md-nav__link> Previews & Integration Tests </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/09-production-improvements/ title="Production Improvements" class=md-nav__link> Production Improvements </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/10-promote-prod/ title="Promote To Production" class=md-nav__link> Promote To Production </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-9 type=checkbox id=nav-2-9 checked> <label class=md-nav__link for=nav-2-9> Jenkins Monitoring Kubernetes <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Monitoring Kubernetes" data-md-level=2> <label class=md-nav__title for=nav-2-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Monitoring Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../prepare/ title="Prepare Environment" class=md-nav__link> Prepare Environment </a> </li> <li class=md-nav__item> <a href=../install/ title="Install Tools" class=md-nav__link> Install Tools </a> </li> <li class=md-nav__item> <a href=../metrics/ title=Metrics class=md-nav__link> Metrics </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Alerts <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title=Alerts class="md-nav__link md-nav__link--active"> Alerts </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#list-of-alerts class=md-nav__link> List Of Alerts </a> </li> <li class=md-nav__item> <a href=#alert-manager-configuration class=md-nav__link> Alert Manager Configuration </a> <nav class=md-nav aria-label="Alert Manager Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-slack-endpoint class=md-nav__link> Get Slack Endpoint </a> </li> <li class=md-nav__item> <a href=#alerts-configuration class=md-nav__link> Alerts Configuration </a> </li> <li class=md-nav__item> <a href=#alert-example class=md-nav__link> Alert Example </a> </li> <li class=md-nav__item> <a href=#alertmanager-configuration class=md-nav__link> Alertmanager Configuration </a> </li> <li class=md-nav__item> <a href=#group-alerts class=md-nav__link> Group Alerts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-alerts class=md-nav__link> The Alerts </a> <nav class=md-nav aria-label="The Alerts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#too-many-jobs-queued class=md-nav__link> Too Many Jobs Queued </a> </li> <li class=md-nav__item> <a href=#jobs-stuck-in-queue class=md-nav__link> Jobs Stuck In Queue </a> </li> <li class=md-nav__item> <a href=#jobs-waiting-too-long-to-start class=md-nav__link> Jobs Waiting Too Long To Start </a> </li> <li class=md-nav__item> <a href=#health-score-1 class=md-nav__link> health score &lt; 1 </a> </li> <li class=md-nav__item> <a href=#ingress-too-slow class=md-nav__link> Ingress Too Slow </a> </li> <li class=md-nav__item> <a href=#http-requests-too-slow class=md-nav__link> HTTP Requests Too Slow </a> </li> <li class=md-nav__item> <a href=#too-many-plugin-updates class=md-nav__link> Too Many Plugin Updates </a> </li> <li class=md-nav__item> <a href=#file-descriptor-ratio-40 class=md-nav__link> File Descriptor Ratio &gt; 40% </a> </li> <li class=md-nav__item> <a href=#job-success-ratio-50 class=md-nav__link> Job Success Ratio &lt; 50% </a> </li> <li class=md-nav__item> <a href=#offline-nodes-5-over-10-minutes class=md-nav__link> Offline nodes &gt; 5 over 10 minutes </a> </li> <li class=md-nav__item> <a href=#healtcheck-duration-0002 class=md-nav__link> healtcheck duration &gt; 0.002 </a> </li> <li class=md-nav__item> <a href=#gc-throughput-too-low class=md-nav__link> GC ThroughPut Too Low </a> </li> <li class=md-nav__item> <a href=#vm-heap-usage-ratio-70 class=md-nav__link> vm heap usage ratio &gt; 70% </a> </li> <li class=md-nav__item> <a href=#uptime-less-than-two-hours class=md-nav__link> Uptime Less Than Two Hours </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#full-example class=md-nav__link> Full Example </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../pipeline/ title=Pipeline class=md-nav__link> Pipeline </a> </li> <li class=md-nav__item> <a href=../dashboard/ title=Dashboard class=md-nav__link> Dashboard </a> </li> <li class=md-nav__item> <a href=../cloudbees/ title=CloudBees class=md-nav__link> CloudBees </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../k8s-crd/ title="Create your own k8s resource" class=md-nav__link> Create your own k8s resource </a> </li> <li class=md-nav__item> <a href=../../dockercon-eu-2018/ title="DockerCon EU 2018" class=md-nav__link> DockerCon EU 2018 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Jenkins & CloudBees <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins & CloudBees" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins & CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1 type=checkbox id=nav-3-1> <label class=md-nav__link for=nav-3-1> CloudBees <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=CloudBees data-md-level=2> <label class=md-nav__title for=nav-3-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloudbees/sso-azure-ad/ title="Single Sign On - AzureAD" class=md-nav__link> Single Sign On - AzureAD </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/teams-automation/ title="CloudBees Automate Teams" class=md-nav__link> CloudBees Automate Teams </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-gke-helm/ title="CloudBees Core on GKE" class=md-nav__link> CloudBees Core on GKE </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-eks/ title="CloudBees Core on EKS" class=md-nav__link> CloudBees Core on EKS </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-team-namespace/ title="Team Master Namespace" class=md-nav__link> Team Master Namespace </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster-gke/ title="Multi-Cluster GKE" class=md-nav__link> Multi-Cluster GKE </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster/ title="Multi-Cluster (OLD)" class=md-nav__link> Multi-Cluster (OLD) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Jenkins <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Jenkins data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jobdsl/ title=JobDSL class=md-nav__link> JobDSL </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jenkins-jobs-builder/ title=JenkinsJobsBuilder class=md-nav__link> JenkinsJobsBuilder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Jenkins Pipelines <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Pipelines" data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline/job-types/ title="Job Types" class=md-nav__link> Job Types </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/kaniko-pipelines/ title="Build Docker Image Kaniko" class=md-nav__link> Build Docker Image Kaniko </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/podtemplate-dind/ title="PodTemplate With Docker-In-Docker" class=md-nav__link> PodTemplate With Docker-In-Docker </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/jenkins-parallel-pipeline/ title="Parallel Pipelines" class=md-nav__link> Parallel Pipelines </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/core-concepts/ title="Core Concepts" class=md-nav__link> Core Concepts </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/artifactory-integration/ title="Artifactory Integration" class=md-nav__link> Artifactory Integration </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/declarative-pipeline/ title="Pipeline (declarative)" class=md-nav__link> Pipeline (declarative) </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/groovy-pipeline/ title="Groovy DSL Pipeline" class=md-nav__link> Groovy DSL Pipeline </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/global-shared-library/ title="Pipeline Libraries" class=md-nav__link> Pipeline Libraries </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/ide-integration-pipeline-dsl/ title="DSL IDE Integration" class=md-nav__link> DSL IDE Integration </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/input/ title=Input class=md-nav__link> Input </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Jenkins Pipeline Examples <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Pipeline Examples" data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Pipeline Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-alternatives/ title="Docker Alternatives" class=md-nav__link> Docker Alternatives </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/maven-declarative/ title="Maven Declarative" class=md-nav__link> Maven Declarative </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-declarative/ title="Docker Declarative" class=md-nav__link> Docker Declarative </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4> <label class=md-nav__link for=nav-4> Jenkins X <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins X" data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins X </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/build-packs/ title="Build Packs" class=md-nav__link> Build Packs </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jx-pipelines/ title="Jenkins X Pipelines" class=md-nav__link> Jenkins X Pipelines </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3> <label class=md-nav__link for=nav-4-3> Java Native Image Prod <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Java Native Image Prod" data-md-level=2> <label class=md-nav__title for=nav-4-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/01-intro/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/02-cloud-sql/ title="Cloud SQL" class=md-nav__link> Cloud SQL </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/03-quarkus/ title=Quarkus class=md-nav__link> Quarkus </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/04-jx-import/ title="Import Into Jenkins X" class=md-nav__link> Import Into Jenkins X </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/05-jx-secrets/ title="Database Connection And Secrets" class=md-nav__link> Database Connection And Secrets </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/06-native-image/ title="Native Image" class=md-nav__link> Native Image </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/07-pipeline-improvements/ title="Pipeline Improvements" class=md-nav__link> Pipeline Improvements </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/08-preview-int-test/ title="Previews & Integration Tests" class=md-nav__link> Previews & Integration Tests </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/09-production-improvements/ title="Production Improvements" class=md-nav__link> Production Improvements </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/10-promote-prod/ title="Promote To Production" class=md-nav__link> Promote To Production </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../jenkinsx/builder-image/ title="Create Builder Image" class=md-nav__link> Create Builder Image </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jxboot/ title="JX Boot GKE" class=md-nav__link> JX Boot GKE </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jxboot-aks/ title="JX Boot AKS" class=md-nav__link> JX Boot AKS </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/aks-boot-core/ title="JX Boot & CloudBees Core" class=md-nav__link> JX Boot & CloudBees Core </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/rhos-311-minimal/ title="OpenShift 3.11" class=md-nav__link> OpenShift 3.11 </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/rhos-311-restricted/ title="OpenShift 3.11 - Restricted" class=md-nav__link> OpenShift 3.11 - Restricted </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/lighthouse-bitbucket/ title="Lighthouse & Bitbucket" class=md-nav__link> Lighthouse & Bitbucket </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/hello-world/ title=HelloWorld class=md-nav__link> HelloWorld </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/maven/ title=Maven class=md-nav__link> Maven </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/hybrid/ title=Hybrid class=md-nav__link> Hybrid </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/kubernetes-days/ title="Example For Console Reel" class=md-nav__link> Example For Console Reel </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Containers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Containers data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Containers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> OpenShift <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=OpenShift data-md-level=2> <label class=md-nav__title for=nav-5-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-minimal/ title="OpenShift 3.11 GCP(minimal)" class=md-nav__link> OpenShift 3.11 GCP(minimal) </a> </li> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-medium/ title="OpenShift 3.11 GCP(medium)" class=md-nav__link> OpenShift 3.11 GCP(medium) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Kubernetes (K8S) <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Kubernetes (K8S)" data-md-level=2> <label class=md-nav__title for=nav-5-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Kubernetes (K8S) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/cka-exam-prep/ title="CKA Exam prep" class=md-nav__link> CKA Exam prep </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/tools/ title=Tools class=md-nav__link> Tools </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Managed Kubernetes (cloud) <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Managed Kubernetes (cloud)" data-md-level=2> <label class=md-nav__title for=nav-5-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Managed Kubernetes (cloud) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/distributions/install-gke/ title=GKE class=md-nav__link> GKE </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/gke-terraform/ title="GKE Terraform" class=md-nav__link> GKE Terraform </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/eks-eksctl/ title="AWS EKS" class=md-nav__link> AWS EKS </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-cli/ title="AKS CLI" class=md-nav__link> AKS CLI </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-terraform/ title="AKS Terraform" class=md-nav__link> AKS Terraform </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> K8S Hard Way - GCE <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="K8S Hard Way - GCE" data-md-level=2> <label class=md-nav__title for=nav-5-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> K8S Hard Way - GCE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/ title="Installer Preparation" class=md-nav__link> Installer Preparation </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/terraform-compute/ title="Create GCE resources" class=md-nav__link> Create GCE resources </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/certificates/ title="Prepare Certificates" class=md-nav__link> Prepare Certificates </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/kubeconfigs/ title="Prepare Kubeconfigs" class=md-nav__link> Prepare Kubeconfigs </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/encryption/ title="Encryption configuration" class=md-nav__link> Encryption configuration </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/etcd/ title="ETCD configuration" class=md-nav__link> ETCD configuration </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/controller/ title="Controller Config" class=md-nav__link> Controller Config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/worker/ title="Worker Config" class=md-nav__link> Worker Config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/remote-access/ title="Remote access" class=md-nav__link> Remote access </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/network/ title="Network config" class=md-nav__link> Network config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/debug/ title=Debug class=md-nav__link> Debug </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Docker <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Docker data-md-level=2> <label class=md-nav__title for=nav-5-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../docker/graceful-shutdown/ title="Graceful Shutdown" class=md-nav__link> Graceful Shutdown </a> </li> <li class=md-nav__item> <a href=../../../docker/build-kit/ title=BuildKit class=md-nav__link> BuildKit </a> </li> <li class=md-nav__item> <a href=../../../docker/multi-stage-builds/ title="Multi-Stage Builds(TBD)" class=md-nav__link> Multi-Stage Builds(TBD) </a> </li> <li class=md-nav__item> <a href=../../../docker/swarm/ title="Swarm (mode) (TBD)" class=md-nav__link> Swarm (mode) (TBD) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-6 type=checkbox id=nav-5-6> <label class=md-nav__link for=nav-5-6> Linux <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-5-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/systemd/ title=SystemD class=md-nav__link> SystemD </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Software Eng. <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Software Eng." data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Software Eng. </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Automation <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Automation data-md-level=2> <label class=md-nav__title for=nav-6-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud/automation-pulumi/ title=Pulumi class=md-nav__link> Pulumi </a> </li> <li class=md-nav__item> <a href=../../../certificates/lets-encrypt-k8s/ title="Let's Encrypt K8S" class=md-nav__link> Let's Encrypt K8S </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Software Engineering <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Software Engineering" data-md-level=2> <label class=md-nav__title for=nav-6-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Software Engineering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../swe/important-concepts/ title="Important Concepts" class=md-nav__link> Important Concepts </a> </li> <li class=md-nav__item> <a href=../../../swe/naming/ title=Naming class=md-nav__link> Naming </a> </li> <li class=md-nav__item> <a href=../../../swe/distributed/ title="Distributed Computing" class=md-nav__link> Distributed Computing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Productivity <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Productivity data-md-level=2> <label class=md-nav__title for=nav-6-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Productivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../productivity/ title=General class=md-nav__link> General </a> </li> <li class=md-nav__item> <a href=../../../productivity/incidents/ title=Incidents class=md-nav__link> Incidents </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Java <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Java data-md-level=2> <label class=md-nav__title for=nav-6-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../java/ title=General class=md-nav__link> General </a> </li> <li class=md-nav__item> <a href=../../../keep-watching/ title="Spring Boot App" class=md-nav__link> Spring Boot App </a> </li> <li class=md-nav__item> <a href=../../../java/networking/ title="Java Networking" class=md-nav__link> Java Networking </a> </li> <li class=md-nav__item> <a href=../../../java/concurrency/ title="Java Concurrency" class=md-nav__link> Java Concurrency </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#list-of-alerts class=md-nav__link> List Of Alerts </a> </li> <li class=md-nav__item> <a href=#alert-manager-configuration class=md-nav__link> Alert Manager Configuration </a> <nav class=md-nav aria-label="Alert Manager Configuration"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#get-slack-endpoint class=md-nav__link> Get Slack Endpoint </a> </li> <li class=md-nav__item> <a href=#alerts-configuration class=md-nav__link> Alerts Configuration </a> </li> <li class=md-nav__item> <a href=#alert-example class=md-nav__link> Alert Example </a> </li> <li class=md-nav__item> <a href=#alertmanager-configuration class=md-nav__link> Alertmanager Configuration </a> </li> <li class=md-nav__item> <a href=#group-alerts class=md-nav__link> Group Alerts </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#the-alerts class=md-nav__link> The Alerts </a> <nav class=md-nav aria-label="The Alerts"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#too-many-jobs-queued class=md-nav__link> Too Many Jobs Queued </a> </li> <li class=md-nav__item> <a href=#jobs-stuck-in-queue class=md-nav__link> Jobs Stuck In Queue </a> </li> <li class=md-nav__item> <a href=#jobs-waiting-too-long-to-start class=md-nav__link> Jobs Waiting Too Long To Start </a> </li> <li class=md-nav__item> <a href=#health-score-1 class=md-nav__link> health score &lt; 1 </a> </li> <li class=md-nav__item> <a href=#ingress-too-slow class=md-nav__link> Ingress Too Slow </a> </li> <li class=md-nav__item> <a href=#http-requests-too-slow class=md-nav__link> HTTP Requests Too Slow </a> </li> <li class=md-nav__item> <a href=#too-many-plugin-updates class=md-nav__link> Too Many Plugin Updates </a> </li> <li class=md-nav__item> <a href=#file-descriptor-ratio-40 class=md-nav__link> File Descriptor Ratio &gt; 40% </a> </li> <li class=md-nav__item> <a href=#job-success-ratio-50 class=md-nav__link> Job Success Ratio &lt; 50% </a> </li> <li class=md-nav__item> <a href=#offline-nodes-5-over-10-minutes class=md-nav__link> Offline nodes &gt; 5 over 10 minutes </a> </li> <li class=md-nav__item> <a href=#healtcheck-duration-0002 class=md-nav__link> healtcheck duration &gt; 0.002 </a> </li> <li class=md-nav__item> <a href=#gc-throughput-too-low class=md-nav__link> GC ThroughPut Too Low </a> </li> <li class=md-nav__item> <a href=#vm-heap-usage-ratio-70 class=md-nav__link> vm heap usage ratio &gt; 70% </a> </li> <li class=md-nav__item> <a href=#uptime-less-than-two-hours class=md-nav__link> Uptime Less Than Two Hours </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#full-example class=md-nav__link> Full Example </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/joostvdg/joostvdg.github.io/edit/master/docs/blogs/monitor-jenkins-on-k8s/alerts.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=alerts-with-alertmanager>Alerts With Alertmanager<a class=headerlink href=#alerts-with-alertmanager title="Permanent link">&para;</a></h1> <h2 id=list-of-alerts>List Of Alerts<a class=headerlink href=#list-of-alerts title="Permanent link">&para;</a></h2> <ul> <li>health score &lt; 0.95</li> <li>ingress performance </li> <li>vm heap usage ratio &gt; 80%</li> <li>file descriptor &gt; 75%</li> <li>job queue &gt; 10 over x minutes</li> <li>job success ratio &lt; 50%</li> <li>master executor count &gt; 0</li> <li>good http request ratio &lt; 90%</li> <li>offline nodes &gt; 5 over 30 minutes</li> <li>healtcheck duration &gt; 0.002</li> <li> <p>plugin updates available &gt; 10</p> </li> <li> <p>An alert that triggers if any of the health reports are failing</p> </li> <li>An alert that triggers if the file descriptor usage on the master goes above 80%</li> <li><code>vm.file.descriptor.ratio</code> -&gt; <code>vm_file_descriptor_ratio</code></li> <li>An alert that triggers if the JVM heap memory usage is over 80% for more than a minute</li> <li><code>vm.memory.heap.usage</code> -&gt; <code>vm_memory_heap_usage</code></li> <li>An alert that triggers if the 5 minute average of HTTP/404 responses goes above 10 per minute for more than five minutes</li> <li><code>http.responseCodes.badRequest</code> -&gt; <code>http_responseCodes_badRequest</code></li> </ul> <h2 id=alert-manager-configuration>Alert Manager Configuration<a class=headerlink href=#alert-manager-configuration title="Permanent link">&para;</a></h2> <p>We can configure Alert Manager via the Prometheus Helm Chart.</p> <p>All the configuration elements below are part of the <code>prom-values.yaml</code> we used to when installing Prometheus via Helm.</p> <h3 id=get-slack-endpoint>Get Slack Endpoint<a class=headerlink href=#get-slack-endpoint title="Permanent link">&para;</a></h3> <p>There are many ways to get the Alerts out, for all options you <a href=https://prometheus.io/docs/alerting/configuration/#receiver>can read the Prometheus documentation</a>. </p> <p>In this guide, I've chosen to use slack, as I find it convenient personally. <a href=https://api.slack.com/incoming-webhooks>Slack has a guide on creating webhooks</a>, once you've created an <code>App</code> you can retrieve an endpoint which you can use directly in the Alertmanager configuration.</p> <h3 id=alerts-configuration>Alerts Configuration<a class=headerlink href=#alerts-configuration title="Permanent link">&para;</a></h3> <p>We configure the alerts within Prometheus itself via a <code>ConfigMap</code>. We configure the body of the alert configuration file via <code>serverFiles</code>.<code>alerts</code>.<code>groups</code> and <code>serverFiles</code>.<code>rules</code>. </p> <p>We can have a list of <em>rules</em> and a list of <em>groups</em> of rules. For more information how you can configure these rules, <a href=https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/ >consult the Prometheus documentation</a>.</p> <div class=highlight><pre><span></span><code><span class=nt>serverFiles</span><span class=p>:</span>
  <span class=nt>alerts</span><span class=p>:</span>
    <span class=nt>groups</span><span class=p>:</span>
    <span class=c1># alerts come here</span>
  <span class=nt>rules</span><span class=p>:</span> <span class="p p-Indicator">{}</span>
</code></pre></div> <h3 id=alert-example>Alert Example<a class=headerlink href=#alert-example title="Permanent link">&para;</a></h3> <p>Below is an example of an Alert. We have the following fields:</p> <ul> <li><strong>alert</strong>: the name of the alert</li> <li><strong>expr</strong>: the query that should evaluate to <code>true</code> or <code>false</code></li> <li><strong>for</strong> (optional): duration of the expressions equating to <code>true</code> before it fires</li> <li><strong>labels</strong>(optional): you can add key-value pairs to encode more information on the alert, you can use this to select different receiver (e.g., email vs. slack, or different slack channels)</li> <li><strong>annotations</strong>: we're expected to fill in <code>summary</code> and <code>description</code> as shown below, they will header and body of the alert</li> </ul> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsQueued</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_queue_size_value) &gt; 5</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>queued&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>stuck</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>queue&quot;</span>
</code></pre></div> <h3 id=alertmanager-configuration>Alertmanager Configuration<a class=headerlink href=#alertmanager-configuration title="Permanent link">&para;</a></h3> <p>We use Alertmanager for what to do with alerts once they happen. We configure this in the same <code>prom-values.yaml</code> file, in this under <code>alertmanagerFiles</code>.<code>alertmanager.yml</code>.</p> <p>We can create different routes that match on labels or other values. For simplicity sake - this guide is not on Alertmanager's capabilities - we stick to the most straightforward example without any such matching or grouping. For more information on configuring routes, please <a href=https://prometheus.io/docs/alerting/configuration/ >read the Prometheus configuration documentation</a>.</p> <div class=highlight><pre><span></span><code><span class=nt>alertmanagerFiles</span><span class=p>:</span>
  <span class=nt>alertmanager.yml</span><span class=p>:</span>
    <span class=nt>global</span><span class=p>:</span> <span class="p p-Indicator">{}</span>
    <span class=nt>route</span><span class=p>:</span>
      <span class=nt>group_by</span><span class=p>:</span> <span class="p p-Indicator">[</span><span class=nv>alertname</span><span class="p p-Indicator">,</span> <span class=nv>app_kubernetes_io_instance</span><span class="p p-Indicator">]</span>
      <span class=nt>receiver</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
    <span class=nt>receivers</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
      <span class=nt>slack_configs</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>api_url</span><span class=p>:</span> <span class=s>&#39;&lt;REPLACE_WITH_YOUR_SLACK_API_ENDPOINT&gt;&#39;</span>
        <span class=nt>username</span><span class=p>:</span> <span class=s>&#39;Alertmanager&#39;</span>
        <span class=nt>channel</span><span class=p>:</span> <span class=s>&#39;#notify&#39;</span>
        <span class=nt>send_resolved</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class=nt>title</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>.CommonAnnotations.summary</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>&quot;</span> 
        <span class=nt>text</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>.CommonAnnotations.description</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>.CommonLabels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>&quot;</span>
        <span class=nt>title_link</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">http://my-prometheus.com/alerts</span>
</code></pre></div> <h3 id=group-alerts>Group Alerts<a class=headerlink href=#group-alerts title="Permanent link">&para;</a></h3> <p>You can group alerts if they are similar or the same with different trigger values (warning vs critical).</p> <div class=highlight><pre><span></span><code><span class=nt>serverFiles</span><span class=p>:</span>
  <span class=nt>alerts</span><span class=p>:</span>
    <span class=nt>groups</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">healthcheck</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsHealthScoreToLow</span>
        <span class=c1># alert info</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooSlowHealthCheck</span>
        <span class=c1># alert info</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">jobs</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsQueued</span>
        <span class=c1># alert info</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsStuckInQueue</span>
        <span class=c1># alert info</span>
</code></pre></div> <h2 id=the-alerts>The Alerts<a class=headerlink href=#the-alerts title="Permanent link">&para;</a></h2> <p>Behold, my awesome - eh, simple example - alerts. These are by no means the best alerts to create and are by no means alerts you should directly put into production. Please see them as examples to learn from!</p> <div class="admonition caution"> <p class=admonition-title>Caution</p> <p>One thing to note especially, the values for the <code>exp</code> and <code>for</code> are generally set very low. This is intentional, so they are easy to copy past and test. They should be relatively easy to trigger so you can learn about the relationship between the situation in your master and the alert firing.</p> </div> <h3 id=too-many-jobs-queued>Too Many Jobs Queued<a class=headerlink href=#too-many-jobs-queued title="Permanent link">&para;</a></h3> <p>If there are too many <strong>Jobs</strong> queued in the Jenkins Master. This event fires if there's more than <code>10</code> jobs in the queue for at least 10 minutes.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsQueued</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_queue_size_value) &gt; 10</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>queued&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>stuck</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>queue&quot;</span>
</code></pre></div> <h3 id=jobs-stuck-in-queue>Jobs Stuck In Queue<a class=headerlink href=#jobs-stuck-in-queue title="Permanent link">&para;</a></h3> <p>Sometimes Jobs depend on other Jobs, which means they're not just in the queue, they're <strong>stuck</strong> in the queue.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsStuckInQueue</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_queue_stuck_value) by (app_kubernetes_io_instance) &gt; 5</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>queued&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>queue&quot;</span>
</code></pre></div> <h3 id=jobs-waiting-too-long-to-start>Jobs Waiting Too Long To Start<a class=headerlink href=#jobs-waiting-too-long-to-start title="Permanent link">&para;</a></h3> <p>If Jobs are generally waiting a long time to start, waiting for a build agent to be available or otherwise, we want to know. This value is not very useful - although not completely useless - if you only have PodTemplates as build agents. When you use PodTemplates, this value is the time between the job being scheduled and when the Pod is scheduled in Kubernetes.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsWaitingTooMuchOnJobStart</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum (jenkins_job_waiting_duration) by (app_kubernetes_io_instance) &gt; 0.05</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>waits</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>long</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>jobs&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>waiting</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>average</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>seconds</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>start</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>job&quot;</span>
</code></pre></div> <h3 id=health-score-1>health score &lt; 1<a class=headerlink href=#health-score-1 title="Permanent link">&para;</a></h3> <p>By default, each Jenkins Master has a health check consisting out of four values. Some plugins will add an entry, such as the CloudBees ElasticSearch Reporter for CloudBees Core. This values range from 0-1, and likely will show <code>0.25</code>, <code>0.50</code>, <code>0.75</code> and <code>1</code> as values.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsHealthScoreToLow</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_health_check_score) by (app_kubernetes_io_instance) &lt; 1</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>score&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>score</span><span class=nv> </span><span class=s>lower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>100%&quot;</span>
</code></pre></div> <h3 id=ingress-too-slow>Ingress Too Slow<a class=headerlink href=#ingress-too-slow title="Permanent link">&para;</a></h3> <p>This alert looks at the ingress controller request duration. It fires if the request duration in 0.25 seconds or faster is not achieved for the 95% percentile.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">AppTooSlow</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{le=&quot;0.25&quot;}[5m])) by (ingress) / sum(rate(nginx_ingress_controller_request_duration_seconds_count[5m])) by (ingress) &lt; 0.95</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;Application</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.ingress</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.ingress</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>More</span><span class=nv> </span><span class=s>then</span><span class=nv> </span><span class=s>5%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>requests</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>slower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>0.25s&quot;</span>
</code></pre></div> <h3 id=http-requests-too-slow>HTTP Requests Too Slow<a class=headerlink href=#http-requests-too-slow title="Permanent link">&para;</a></h3> <p>These are the HTTP requests in Jenkins' webserver itself. We should hold this by must stricter standards than the Ingress controller - which goes through many more layers.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooSlow</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(http_requests{quantile=&quot;0.99&quot;} ) by (app_kubernetes_io_instance) &gt; 1</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv>  </span><span class=s>More</span><span class=nv> </span><span class=s>then</span><span class=nv> </span><span class=s>1%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>requests</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>slower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>1s</span><span class=nv> </span><span class=s>(request</span><span class=nv> </span><span class=s>time:</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}})&quot;</span>
</code></pre></div> <h3 id=too-many-plugin-updates>Too Many Plugin Updates<a class=headerlink href=#too-many-plugin-updates title="Permanent link">&para;</a></h3> <p>I always prefer having my instance up-to-date, don't you? So why not send an alert if there's more than X number of plugins waiting for an update.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyPluginsNeedUpate</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_plugins_withUpdate) by (app_kubernetes_io_instance) &gt; 3</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>plugins</span><span class=nv> </span><span class=s>updates&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>plugins</span><span class=nv> </span><span class=s>that</span><span class=nv> </span><span class=s>require</span><span class=nv> </span><span class=s>an</span><span class=nv> </span><span class=s>update&quot;</span>
</code></pre></div> <h3 id=file-descriptor-ratio-40>File Descriptor Ratio &gt; 40%<a class=headerlink href=#file-descriptor-ratio-40 title="Permanent link">&para;</a></h3> <p>According to CloudBees' documentation, the File Descriptor Ratio should not exceed 40%.</p> <div class="admonition warning"> <p class=admonition-title>Warning</p> <p>I don't truly know the correct value level of this metric. So wether this should be <code>0.0040</code> or <code>0.40</code> I'm not sure. Also, does this make sense in Containers with remote storage? So before you put this in production, please re-evaluate this!</p> </div> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsToManyOpenFiles</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_file_descriptor_ratio) by (app_kubernetes_io_instance) &gt; 0.040</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>open</span><span class=nv> </span><span class=s>files&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>used</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>available</span><span class=nv> </span><span class=s>open</span><span class=nv> </span><span class=s>files&quot;</span>
</code></pre></div> <h3 id=job-success-ratio-50>Job Success Ratio &lt; 50%<a class=headerlink href=#job-success-ratio-50 title="Permanent link">&para;</a></h3> <p>Please, please do not use Job success ratios to punish people. But if it is at all possible - which it almost certainly is - keep a respectable level of success. When practicing Continuous Integration, a broken build is a <em>stop the world</em> event, fix it before moving on. </p> <p>100% success rate should be strived for. It is ok, not to achieve it, yet, one should be as close as possible and not let broken builds rot.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooLowJobSuccessRate</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_runs_success_total) by (app_kubernetes_io_instance) / sum(jenkins_runs_total_total) by (app_kubernetes_io_instance) &lt; 0.5</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>job</span><span class=nv> </span><span class=s>success</span><span class=nv> </span><span class=s>rate&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>less</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>50%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>being</span><span class=nv> </span><span class=s>successful&quot;</span>
</code></pre></div> <h3 id=offline-nodes-5-over-10-minutes>Offline nodes &gt; 5 over 10 minutes<a class=headerlink href=#offline-nodes-5-over-10-minutes title="Permanent link">&para;</a></h3> <p>Having nodes offline for quite some time is usually a bad sign. It can be a static agent that can be enabled or reconnect at will, so it isn't bad on its own. Having multiple offline for a long period is likely an issue somewhere, though.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyOfflineNodes</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_node_offline_value) by (app_kubernetes_io_instance) &gt; 5</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>offline</span><span class=nv> </span><span class=s>nodes&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>nodes</span><span class=nv> </span><span class=s>that</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>offline</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>some</span><span class=nv> </span><span class=s>time</span><span class=nv> </span><span class=s>(5</span><span class=nv> </span><span class=s>minutes)&quot;</span> 
</code></pre></div> <h3 id=healtcheck-duration-0002>healtcheck duration &gt; 0.002<a class=headerlink href=#healtcheck-duration-0002 title="Permanent link">&para;</a></h3> <p>The health check within Jenkins is talking to itself. This means it is generally really fast. We should be very very strict here, if Jenkins start having trouble measuring its own health, it is a first sign of trouble.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooSlowHealthCheck</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_health_check_duration{quantile=&quot;0.999&quot;})</span>
    <span class="l l-Scalar l-Scalar-Plain">by (app_kubernetes_io_instance) &gt; 0.001</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>responds</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>check&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>responding</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>regular</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>check&quot;</span>
</code></pre></div> <h3 id=gc-throughput-too-low>GC ThroughPut Too Low<a class=headerlink href=#gc-throughput-too-low title="Permanent link">&para;</a></h3> <p>Ok, here I am on thin ice. I'm not a JVM expert, so this is just an inspiration. I do not know what would be a reasonable value for triggering an alert here. I'd say, test it!</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyPluginsNeedUpate</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1 - sum(vm_gc_G1_Young_Generation_time)by (app_kubernetes_io_instance)  /  sum (vm_uptime_milliseconds) by (app_kubernetes_io_instance) &lt; 0.99</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">30m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>GC</span><span class=nv> </span><span class=s>throughput&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>Garbage</span><span class=nv> </span><span class=s>Collection</span><span class=nv> </span><span class=s>throughput&quot;</span>
</code></pre></div> <h3 id=vm-heap-usage-ratio-70>vm heap usage ratio &gt; 70%<a class=headerlink href=#vm-heap-usage-ratio-70 title="Permanent link">&para;</a></h3> <p>According to the CloudBees guide on tuning the JVM - which redirects to Oracle - the ration of JVM Heap memory usage should not exceed about 60%. So if we get over 70% for quite some time, expect trouble. As with any of these values, please do not take my word on it, and understand it yourself.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsVMMemoryRationTooHigh</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_memory_heap_usage) by (app_kubernetes_io_instance) &gt; 0.70</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>high</span><span class=nv> </span><span class=s>memory</span><span class=nv> </span><span class=s>ration&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>high</span><span class=nv> </span><span class=s>VM</span><span class=nv> </span><span class=s>memory</span><span class=nv> </span><span class=s>ration&quot;</span>
</code></pre></div> <h3 id=uptime-less-than-two-hours>Uptime Less Than Two Hours<a class=headerlink href=#uptime-less-than-two-hours title="Permanent link">&para;</a></h3> <p>I absolutely love servers that have excellent uptime. Running services in Containers makes that a thing of the past, such a shame. Still, I'd like my applications - such as Jenkins - to be up for reasonable lengths of time.</p> <p>In this case we can get notifications on Masters that have restart - for example, when OOMKilled by Kubernetes. We also get an alert when a new Master is created, which if there's selfservice involved is a nice bonus.</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsNewOrRestarted</span>
  <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_uptime_milliseconds) by (app_kubernetes_io_instance) / 3600000 &lt; 2</span>
  <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
  <span class=nt>labels</span><span class=p>:</span>
    <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>uptime&quot;</span>
    <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>uptime</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>was</span><span class=nv> </span><span class=s>either</span><span class=nv> </span><span class=s>restarted</span><span class=nv> </span><span class=s>or</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>new</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>(uptime:</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>hours)&quot;</span>
</code></pre></div> <h2 id=full-example>Full Example<a class=headerlink href=#full-example title="Permanent link">&para;</a></h2> <div class=highlight><pre><span></span><code><span class=nt>server</span><span class=p>:</span>
  <span class=nt>ingress</span><span class=p>:</span>
    <span class=nt>enabled</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>annotations</span><span class=p>:</span>
      <span class=nt>ingress.kubernetes.io/ssl-redirect</span><span class=p>:</span> <span class=s>&quot;false&quot;</span>
      <span class=nt>nginx.ingress.kubernetes.io/ssl-redirect</span><span class=p>:</span> <span class=s>&quot;false&quot;</span>
  <span class=nt>resources</span><span class=p>:</span>
    <span class=nt>limits</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">100m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1000Mi</span>
    <span class=nt>requests</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">500Mi</span>
<span class=nt>alertmanager</span><span class=p>:</span>
  <span class=nt>ingress</span><span class=p>:</span>
    <span class=nt>enabled</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
    <span class=nt>annotations</span><span class=p>:</span>
      <span class=nt>ingress.kubernetes.io/ssl-redirect</span><span class=p>:</span> <span class=s>&quot;false&quot;</span>
      <span class=nt>nginx.ingress.kubernetes.io/ssl-redirect</span><span class=p>:</span> <span class=s>&quot;false&quot;</span>
  <span class=nt>resources</span><span class=p>:</span>
    <span class=nt>limits</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">20Mi</span>
    <span class=nt>requests</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10Mi</span>
<span class=nt>kubeStateMetrics</span><span class=p>:</span>
  <span class=nt>resources</span><span class=p>:</span>
    <span class=nt>limits</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">50Mi</span>
    <span class=nt>requests</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">25Mi</span>
<span class=nt>nodeExporter</span><span class=p>:</span>
  <span class=nt>resources</span><span class=p>:</span>
    <span class=nt>limits</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">20Mi</span>
    <span class=nt>requests</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10Mi</span>
<span class=nt>pushgateway</span><span class=p>:</span>
  <span class=nt>resources</span><span class=p>:</span>
    <span class=nt>limits</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">20Mi</span>
    <span class=nt>requests</span><span class=p>:</span>
      <span class=nt>cpu</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
      <span class=nt>memory</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">10Mi</span>

<span class=nt>serverFiles</span><span class=p>:</span>
  <span class=nt>alerts</span><span class=p>:</span>
    <span class=nt>groups</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">jobs</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsQueued</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_queue_size_value) &gt; 5</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>queued&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>stuck</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>queue&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyJobsStuckInQueue</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_queue_stuck_value) by (app_kubernetes_io_instance) &gt; 5</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>queued&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>in</span><span class=nv> </span><span class=s>queue&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsWaitingTooMuchOnJobStart</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum (jenkins_job_waiting_duration) by (app_kubernetes_io_instance) &gt; 0.05</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>waits</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>long</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>jobs&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>waiting</span><span class=nv> </span><span class=s>on</span><span class=nv> </span><span class=s>average</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>seconds</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>start</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>job&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooLowJobSuccessRate</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_runs_success_total) by (app_kubernetes_io_instance) / sum(jenkins_runs_total_total) by (app_kubernetes_io_instance) &lt; 0.60</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>job</span><span class=nv> </span><span class=s>success</span><span class=nv> </span><span class=s>rate&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>jobs</span><span class=nv> </span><span class=s>being</span><span class=nv> </span><span class=s>successful&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">uptime</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsNewOrRestarted</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_uptime_milliseconds) by (app_kubernetes_io_instance) / 3600000 &lt; 2</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>uptime&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>uptime</span><span class=nv> </span><span class=s>and</span><span class=nv> </span><span class=s>was</span><span class=nv> </span><span class=s>either</span><span class=nv> </span><span class=s>restarted</span><span class=nv> </span><span class=s>or</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>new</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>(uptime:</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>hours)&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">plugins</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyPluginsNeedUpate</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_plugins_withUpdate) by (app_kubernetes_io_instance) &gt; 3</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>plugins</span><span class=nv> </span><span class=s>updates&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>plugins</span><span class=nv> </span><span class=s>that</span><span class=nv> </span><span class=s>require</span><span class=nv> </span><span class=s>an</span><span class=nv> </span><span class=s>update&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">jvm</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsToManyOpenFiles</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_file_descriptor_ratio) by (app_kubernetes_io_instance) &gt; 0.040</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>open</span><span class=nv> </span><span class=s>files&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>instance</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>used</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>available</span><span class=nv> </span><span class=s>open</span><span class=nv> </span><span class=s>files&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsVMMemoryRationTooHigh</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(vm_memory_heap_usage) by (app_kubernetes_io_instance) &gt; 0.70</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>high</span><span class=nv> </span><span class=s>memory</span><span class=nv> </span><span class=s>ration&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{$labels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>high</span><span class=nv> </span><span class=s>VM</span><span class=nv> </span><span class=s>memory</span><span class=nv> </span><span class=s>ration&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyPluginsNeedUpate</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1 - sum(vm_gc_G1_Young_Generation_time)by (app_kubernetes_io_instance)  /  sum (vm_uptime_milliseconds) by (app_kubernetes_io_instance) &lt; 0.99</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">30m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>GC</span><span class=nv> </span><span class=s>throughput&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>Garbage</span><span class=nv> </span><span class=s>Collection</span><span class=nv> </span><span class=s>throughput&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">web</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooSlow</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(http_requests{quantile=&quot;0.99&quot;} ) by (app_kubernetes_io_instance) &gt; 1</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">3m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv>  </span><span class=s>More</span><span class=nv> </span><span class=s>then</span><span class=nv> </span><span class=s>1%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>requests</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>slower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>1s</span><span class=nv> </span><span class=s>(request</span><span class=nv> </span><span class=s>time:</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}})&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">AppTooSlow</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(rate(nginx_ingress_controller_request_duration_seconds_bucket{le=&quot;0.25&quot;}[5m])) by (ingress) / sum(rate(nginx_ingress_controller_request_duration_seconds_count[5m])) by (ingress) &lt; 0.95</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;Application</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.ingress</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.ingress</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>-</span><span class=nv> </span><span class=s>More</span><span class=nv> </span><span class=s>then</span><span class=nv> </span><span class=s>5%</span><span class=nv> </span><span class=s>of</span><span class=nv> </span><span class=s>requests</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>slower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>0.25s&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">healthcheck</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsHealthScoreToLow</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_health_check_score) by (app_kubernetes_io_instance) &lt; 1</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>low</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>score&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>score</span><span class=nv> </span><span class=s>lower</span><span class=nv> </span><span class=s>than</span><span class=nv> </span><span class=s>100%&quot;</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooSlowHealthCheck</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_health_check_duration{quantile=&quot;0.999&quot;})</span>
          <span class="l l-Scalar l-Scalar-Plain">by (app_kubernetes_io_instance) &gt; 0.001</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>responds</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>check&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>is</span><span class=nv> </span><span class=s>responding</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>slow</span><span class=nv> </span><span class=s>to</span><span class=nv> </span><span class=s>the</span><span class=nv> </span><span class=s>regular</span><span class=nv> </span><span class=s>health</span><span class=nv> </span><span class=s>check&quot;</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">nodes</span>
      <span class=nt>rules</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>alert</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">JenkinsTooManyOfflineNodes</span>
        <span class=nt>expr</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">sum(jenkins_node_offline_value) by (app_kubernetes_io_instance) &gt; 3</span>
        <span class=nt>for</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1m</span>
        <span class=nt>labels</span><span class=p>:</span>
          <span class=nt>severity</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">notify</span>
        <span class=nt>annotations</span><span class=p>:</span>
          <span class=nt>summary</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>a</span><span class=nv> </span><span class=s>too</span><span class=nv> </span><span class=s>many</span><span class=nv> </span><span class=s>offline</span><span class=nv> </span><span class=s>nodes&quot;</span>
          <span class=nt>description</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>$labels.app_kubernetes_io_instance</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>has</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>$value</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>nodes</span><span class=nv> </span><span class=s>that</span><span class=nv> </span><span class=s>are</span><span class=nv> </span><span class=s>offline</span><span class=nv> </span><span class=s>for</span><span class=nv> </span><span class=s>some</span><span class=nv> </span><span class=s>time</span><span class=nv> </span><span class=s>(5</span><span class=nv> </span><span class=s>minutes)&quot;</span>
<span class=nt>alertmanagerFiles</span><span class=p>:</span>
  <span class=nt>alertmanager.yml</span><span class=p>:</span>
    <span class=nt>global</span><span class=p>:</span> <span class="p p-Indicator">{}</span>
    <span class=nt>route</span><span class=p>:</span>
      <span class=nt>group_by</span><span class=p>:</span> <span class="p p-Indicator">[</span><span class=nv>alertname</span><span class="p p-Indicator">,</span> <span class=nv>app_kubernetes_io_instance</span><span class="p p-Indicator">]</span>
      <span class=nt>receiver</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
    <span class=nt>receivers</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
      <span class=nt>slack_configs</span><span class=p>:</span>
      <span class="p p-Indicator">-</span> <span class=nt>api_url</span><span class=p>:</span> <span class=s>&#39;&lt;REPLACE_WITH_YOUR_SLACK_API_URL&gt;&#39;</span>
        <span class=nt>username</span><span class=p>:</span> <span class=s>&#39;Alertmanager&#39;</span>
        <span class=nt>channel</span><span class=p>:</span> <span class=s>&#39;#notify&#39;</span>
        <span class=nt>send_resolved</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
        <span class=nt>title</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>.CommonAnnotations.summary</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>&quot;</span> 
        <span class=nt>text</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>.CommonAnnotations.description</span><span class=nv> </span><span class=s>}}</span><span class=nv> </span><span class=s>{{</span><span class=nv> </span><span class=s>.CommonLabels.app_kubernetes_io_instance}}</span><span class=nv> </span><span class=s>&quot;</span>
        <span class=nt>title_link</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">http://my-prometheus.com/alerts</span>
</code></pre></div> <hr> <div class=md-source-date> <small> Last update: 2019-09-21 21:59:57 </small> </div> <h2 id=__comments>Comments</h2> <div id=disqus_thread></div> <script>var disqus_config=function(){this.page.url="https://joostvdg.github.io/blogs/monitor-jenkins-on-k8s/alerts/",this.page.identifier="/blogs/monitor-jenkins-on-k8s/alerts/"};!function(){var e=document,i=e.createElement("script");i.src="//joostvdg-github-io.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)}()</script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../metrics/ title=Metrics class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Metrics </div> </div> </a> <a href=../pipeline/ title=Pipeline class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Pipeline </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Joost van der Griendt </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/joostvdg target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/joost_vdg target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://linkedin.com/in/joostvdg target=_blank rel=noopener title=linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>