<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Creating a Java Native Image application and run it as Production with Jenkins X - Production Improvements - 9/10"><link href=https://joostvdg.github.io/jenkinsx/java-native-prod/09-production-improvements/ rel=canonical><link rel="shortcut icon" href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.1.2, mkdocs-material-5.2.2"><title>Jenkins X - Java Native Image Prod</title><link rel=stylesheet href=../../../assets/stylesheets/main.a2408e81.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.a46bcfb3.min.css><meta name=theme-color content=#ffa726><link href=https://fonts.gstatic.com rel=preconnect crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Lato:300,400,400i,700%7CCutive+Mono&display=fallback"><style>body,input{font-family:"Lato",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Cutive Mono",SFMono-Regular,Consolas,Menlo,monospace}</style><link rel="preconnect dns-prefetch" href=https://www.google-analytics.com><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-145385967-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}),document.addEventListener("DOMContentSwitch",function(){ga("send","pageview")})</script><script async src=https://www.google-analytics.com/analytics.js></script></head> <body dir=ltr data-md-color-scheme data-md-color-primary=orange data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#production-improvements class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header-nav md-grid" aria-label=Header> <a href=https://joostvdg.github.io title="J's Software Development Pages" class="md-header-nav__button md-logo" aria-label="J's Software Development Pages"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> <label class="md-header-nav__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header-nav__title data-md-component=header-title> <div class=md-header-nav__ellipsis> <span class="md-header-nav__topic md-ellipsis"> J's Software Development Pages </span> <span class="md-header-nav__topic md-ellipsis"> Jenkins X - Java Native Image Prod </span> </div> </div> <label class="md-header-nav__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear data-md-component=search-reset tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header-nav__source> <a href=https://github.com/joostvdg/joostvdg.github.io/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <div class=md-hero data-md-component=hero> <div class="md-hero__inner md-grid"> Production Improvements - 9/10 </div> </div> <nav class="md-tabs md-tabs--active" aria-label=Tabs data-md-component=tabs> <div class="md-tabs__inner md-grid"> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../blogs/jenkins-pipeline-support-tool/ class=md-tabs__link> Blogs </a> </li> <li class=md-tabs__item> <a href=../../../cloudbees/sso-azure-ad/ class=md-tabs__link> Jenkins & CloudBees </a> </li> <li class=md-tabs__item> <a href=../../build-packs/ class="md-tabs__link md-tabs__link--active"> Jenkins X </a> </li> <li class=md-tabs__item> <a href=../../../openshift/rhos311-gcp-minimal/ class=md-tabs__link> Containers </a> </li> <li class=md-tabs__item> <a href=../../../cloud/automation-pulumi/ class=md-tabs__link> Software Eng. </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=https://joostvdg.github.io title="J's Software Development Pages" class="md-nav__button md-logo" aria-label="J's Software Development Pages"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg> </a> J's Software Development Pages </label> <div class=md-nav__source> <a href=https://github.com/joostvdg/joostvdg.github.io/ title="Go to repository" class=md-source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-1 type=checkbox id=nav-1> <label class=md-nav__link for=nav-1> Home <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Home data-md-level=1> <label class=md-nav__title for=nav-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. title=Me class=md-nav__link> Me </a> </li> <li class=md-nav__item> <a href=../../../other/mkdocs/ title="MKDocs (This Static Website)" class=md-nav__link> MKDocs (This Static Website) </a> </li> <li class=md-nav__item> <a href=../../../other/vim/ title=VIM class=md-nav__link> VIM </a> </li> <li class=md-nav__item> <a href=../../../other/shell/ title=Shell class=md-nav__link> Shell </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2 type=checkbox id=nav-2> <label class=md-nav__link for=nav-2> Blogs <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Blogs data-md-level=1> <label class=md-nav__title for=nav-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blogs/jenkins-pipeline-support-tool/ title="Jenkins Pipeline Support Tools" class=md-nav__link> Jenkins Pipeline Support Tools </a> </li> <li class=md-nav__item> <a href=../../../blogs/graceful-shutdown/ title="Docker Graceful Shutdown" class=md-nav__link> Docker Graceful Shutdown </a> </li> <li class=md-nav__item> <a href=../../../blogs/docker-alternatives/ title="Pipelines with Docker Alternatives" class=md-nav__link> Pipelines with Docker Alternatives </a> </li> <li class=md-nav__item> <a href=../../../blogs/k8s-lets-encrypt/ title="Let's Encrypt for Kubernetes Apps" class=md-nav__link> Let's Encrypt for Kubernetes Apps </a> </li> <li class=md-nav__item> <a href=../../../blogs/sso-azure-ad/ title="CloudBees SSO Azure AD" class=md-nav__link> CloudBees SSO Azure AD </a> </li> <li class=md-nav__item> <a href=../../../blogs/teams-automation/ title="CloudBees Automate Teams" class=md-nav__link> CloudBees Automate Teams </a> </li> <li class=md-nav__item> <a href=../../../blogs/kubernetes-sso-keycloak/ title="Kubernetes SSO Keycloak" class=md-nav__link> Kubernetes SSO Keycloak </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-8 type=checkbox id=nav-2-8> <label class=md-nav__link for=nav-2-8> Jenkins X Java Native Image Prod <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins X Java Native Image Prod" data-md-level=2> <label class=md-nav__title for=nav-2-8> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins X Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-intro/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../02-cloud-sql/ title="Cloud SQL" class=md-nav__link> Cloud SQL </a> </li> <li class=md-nav__item> <a href=../03-quarkus/ title=Quarkus class=md-nav__link> Quarkus </a> </li> <li class=md-nav__item> <a href=../04-jx-import/ title="Import Into Jenkins X" class=md-nav__link> Import Into Jenkins X </a> </li> <li class=md-nav__item> <a href=../05-jx-secrets/ title="Database Connection And Secrets" class=md-nav__link> Database Connection And Secrets </a> </li> <li class=md-nav__item> <a href=../06-native-image/ title="Native Image" class=md-nav__link> Native Image </a> </li> <li class=md-nav__item> <a href=../07-pipeline-improvements/ title="Pipeline Improvements" class=md-nav__link> Pipeline Improvements </a> </li> <li class=md-nav__item> <a href=../08-preview-int-test/ title="Previews & Integration Tests" class=md-nav__link> Previews & Integration Tests </a> </li> <li class=md-nav__item> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Production Improvements <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Production Improvements" class="md-nav__link md-nav__link--active"> Production Improvements </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#logging class=md-nav__link> Logging </a> <nav class=md-nav aria-label=Logging> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#create-sentry-project-retrieve-sdn class=md-nav__link> Create Sentry Project &amp; Retrieve SDN </a> </li> <li class=md-nav__item> <a href=#quarkus-sentry-dependency class=md-nav__link> Quarkus Sentry Dependency </a> </li> <li class=md-nav__item> <a href=#add-secret-to-vault class=md-nav__link> Add secret to Vault </a> </li> <li class=md-nav__item> <a href=#add-secret-placeholder-to-valuesyaml class=md-nav__link> Add secret placeholder to values.yaml </a> </li> <li class=md-nav__item> <a href=#sentry-dsn-secret class=md-nav__link> Sentry DSN Secret </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#configure-logging class=md-nav__link> Configure Logging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> <nav class=md-nav aria-label=Monitoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-promtheus-grafana class=md-nav__link> Install Promtheus &amp; Grafana </a> <nav class=md-nav aria-label="Install Promtheus & Grafana"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=#grafana class=md-nav__link> Grafana </a> <nav class=md-nav aria-label=Grafana> <ul class=md-nav__list> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#install class=md-nav__link> Install </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prometheus-grafana-in-jenkins-x-environment class=md-nav__link> Prometheus &amp; Grafana in Jenkins X Environment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#add-quarkus-smallrye-metrics-dependency class=md-nav__link> Add quarkus-smallrye-metrics Dependency </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest_1 class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#add-metrics-annotations-to-our-code class=md-nav__link> Add Metrics Annotations to our Code </a> </li> <li class=md-nav__item> <a href=#dashboard-json class=md-nav__link> Dashboard JSON </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tracing class=md-nav__link> Tracing </a> <nav class=md-nav aria-label=Tracing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps_1 class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#install-jaeger class=md-nav__link> Install Jaeger </a> </li> <li class=md-nav__item> <a href=#set-logger class=md-nav__link> Set Logger </a> </li> <li class=md-nav__item> <a href=#add-tracing-dependencies class=md-nav__link> Add Tracing Dependencies </a> </li> <li class=md-nav__item> <a href=#update-application-properties class=md-nav__link> Update Application Properties </a> </li> <li class=md-nav__item> <a href=#update-container-env class=md-nav__link> Update Container Env </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> Next Steps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../10-promote-prod/ title="Promote To Production" class=md-nav__link> Promote To Production </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-2-9 type=checkbox id=nav-2-9> <label class=md-nav__link for=nav-2-9> Jenkins Monitoring Kubernetes <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Monitoring Kubernetes" data-md-level=2> <label class=md-nav__title for=nav-2-9> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Monitoring Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/introduction/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/prepare/ title="Prepare Environment" class=md-nav__link> Prepare Environment </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/install/ title="Install Tools" class=md-nav__link> Install Tools </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/metrics/ title=Metrics class=md-nav__link> Metrics </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/alerts/ title=Alerts class=md-nav__link> Alerts </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/pipeline/ title=Pipeline class=md-nav__link> Pipeline </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/dashboard/ title=Dashboard class=md-nav__link> Dashboard </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/cloudbees/ title=CloudBees class=md-nav__link> CloudBees </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../blogs/k8s-crd/ title="Create your own k8s resource" class=md-nav__link> Create your own k8s resource </a> </li> <li class=md-nav__item> <a href=../../../blogs/dockercon-eu-2018/ title="DockerCon EU 2018" class=md-nav__link> DockerCon EU 2018 </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3 type=checkbox id=nav-3> <label class=md-nav__link for=nav-3> Jenkins & CloudBees <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins & CloudBees" data-md-level=1> <label class=md-nav__title for=nav-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins & CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-1 type=checkbox id=nav-3-1> <label class=md-nav__link for=nav-3-1> CloudBees <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=CloudBees data-md-level=2> <label class=md-nav__title for=nav-3-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloudbees/sso-azure-ad/ title="Single Sign On - AzureAD" class=md-nav__link> Single Sign On - AzureAD </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/teams-automation/ title="CloudBees Automate Teams" class=md-nav__link> CloudBees Automate Teams </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-gke-helm/ title="CloudBees Core on GKE" class=md-nav__link> CloudBees Core on GKE </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-eks/ title="CloudBees Core on EKS" class=md-nav__link> CloudBees Core on EKS </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-team-namespace/ title="Team Master Namespace" class=md-nav__link> Team Master Namespace </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster-gke/ title="Multi-Cluster GKE" class=md-nav__link> Multi-Cluster GKE </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster/ title="Multi-Cluster (OLD)" class=md-nav__link> Multi-Cluster (OLD) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-2 type=checkbox id=nav-3-2> <label class=md-nav__link for=nav-3-2> Jenkins <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Jenkins data-md-level=2> <label class=md-nav__title for=nav-3-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jobdsl/ title=JobDSL class=md-nav__link> JobDSL </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jenkins-jobs-builder/ title=JenkinsJobsBuilder class=md-nav__link> JenkinsJobsBuilder </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-3 type=checkbox id=nav-3-3> <label class=md-nav__link for=nav-3-3> Jenkins Pipelines <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Pipelines" data-md-level=2> <label class=md-nav__title for=nav-3-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline/job-types/ title="Job Types" class=md-nav__link> Job Types </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/kaniko-pipelines/ title="Build Docker Image Kaniko" class=md-nav__link> Build Docker Image Kaniko </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/podtemplate-dind/ title="PodTemplate With Docker-In-Docker" class=md-nav__link> PodTemplate With Docker-In-Docker </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/jenkins-parallel-pipeline/ title="Parallel Pipelines" class=md-nav__link> Parallel Pipelines </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/core-concepts/ title="Core Concepts" class=md-nav__link> Core Concepts </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/artifactory-integration/ title="Artifactory Integration" class=md-nav__link> Artifactory Integration </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/declarative-pipeline/ title="Pipeline (declarative)" class=md-nav__link> Pipeline (declarative) </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/groovy-pipeline/ title="Groovy DSL Pipeline" class=md-nav__link> Groovy DSL Pipeline </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/global-shared-library/ title="Pipeline Libraries" class=md-nav__link> Pipeline Libraries </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/ide-integration-pipeline-dsl/ title="DSL IDE Integration" class=md-nav__link> DSL IDE Integration </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/input/ title=Input class=md-nav__link> Input </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-3-4 type=checkbox id=nav-3-4> <label class=md-nav__link for=nav-3-4> Jenkins Pipeline Examples <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins Pipeline Examples" data-md-level=2> <label class=md-nav__title for=nav-3-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins Pipeline Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/ title=Index class=md-nav__link> Index </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-alternatives/ title="Docker Alternatives" class=md-nav__link> Docker Alternatives </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/maven-declarative/ title="Maven Declarative" class=md-nav__link> Maven Declarative </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-declarative/ title="Docker Declarative" class=md-nav__link> Docker Declarative </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4 type=checkbox id=nav-4 checked> <label class=md-nav__link for=nav-4> Jenkins X <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Jenkins X" data-md-level=1> <label class=md-nav__title for=nav-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Jenkins X </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../build-packs/ title="Build Packs" class=md-nav__link> Build Packs </a> </li> <li class=md-nav__item> <a href=../../jx-pipelines/ title="Jenkins X Pipelines" class=md-nav__link> Jenkins X Pipelines </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-4-3 type=checkbox id=nav-4-3 checked> <label class=md-nav__link for=nav-4-3> Java Native Image Prod <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Java Native Image Prod" data-md-level=2> <label class=md-nav__title for=nav-4-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../01-intro/ title=Intro class=md-nav__link> Intro </a> </li> <li class=md-nav__item> <a href=../02-cloud-sql/ title="Cloud SQL" class=md-nav__link> Cloud SQL </a> </li> <li class=md-nav__item> <a href=../03-quarkus/ title=Quarkus class=md-nav__link> Quarkus </a> </li> <li class=md-nav__item> <a href=../04-jx-import/ title="Import Into Jenkins X" class=md-nav__link> Import Into Jenkins X </a> </li> <li class=md-nav__item> <a href=../05-jx-secrets/ title="Database Connection And Secrets" class=md-nav__link> Database Connection And Secrets </a> </li> <li class=md-nav__item> <a href=../06-native-image/ title="Native Image" class=md-nav__link> Native Image </a> </li> <li class=md-nav__item> <a href=../07-pipeline-improvements/ title="Pipeline Improvements" class=md-nav__link> Pipeline Improvements </a> </li> <li class=md-nav__item> <a href=../08-preview-int-test/ title="Previews & Integration Tests" class=md-nav__link> Previews & Integration Tests </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Production Improvements <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg> </span> </label> <a href=./ title="Production Improvements" class="md-nav__link md-nav__link--active"> Production Improvements </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#logging class=md-nav__link> Logging </a> <nav class=md-nav aria-label=Logging> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#create-sentry-project-retrieve-sdn class=md-nav__link> Create Sentry Project &amp; Retrieve SDN </a> </li> <li class=md-nav__item> <a href=#quarkus-sentry-dependency class=md-nav__link> Quarkus Sentry Dependency </a> </li> <li class=md-nav__item> <a href=#add-secret-to-vault class=md-nav__link> Add secret to Vault </a> </li> <li class=md-nav__item> <a href=#add-secret-placeholder-to-valuesyaml class=md-nav__link> Add secret placeholder to values.yaml </a> </li> <li class=md-nav__item> <a href=#sentry-dsn-secret class=md-nav__link> Sentry DSN Secret </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#configure-logging class=md-nav__link> Configure Logging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> <nav class=md-nav aria-label=Monitoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-promtheus-grafana class=md-nav__link> Install Promtheus &amp; Grafana </a> <nav class=md-nav aria-label="Install Promtheus & Grafana"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=#grafana class=md-nav__link> Grafana </a> <nav class=md-nav aria-label=Grafana> <ul class=md-nav__list> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#install class=md-nav__link> Install </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prometheus-grafana-in-jenkins-x-environment class=md-nav__link> Prometheus &amp; Grafana in Jenkins X Environment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#add-quarkus-smallrye-metrics-dependency class=md-nav__link> Add quarkus-smallrye-metrics Dependency </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest_1 class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#add-metrics-annotations-to-our-code class=md-nav__link> Add Metrics Annotations to our Code </a> </li> <li class=md-nav__item> <a href=#dashboard-json class=md-nav__link> Dashboard JSON </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tracing class=md-nav__link> Tracing </a> <nav class=md-nav aria-label=Tracing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps_1 class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#install-jaeger class=md-nav__link> Install Jaeger </a> </li> <li class=md-nav__item> <a href=#set-logger class=md-nav__link> Set Logger </a> </li> <li class=md-nav__item> <a href=#add-tracing-dependencies class=md-nav__link> Add Tracing Dependencies </a> </li> <li class=md-nav__item> <a href=#update-application-properties class=md-nav__link> Update Application Properties </a> </li> <li class=md-nav__item> <a href=#update-container-env class=md-nav__link> Update Container Env </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> Next Steps </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../10-promote-prod/ title="Promote To Production" class=md-nav__link> Promote To Production </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../builder-image/ title="Create Builder Image" class=md-nav__link> Create Builder Image </a> </li> <li class=md-nav__item> <a href=../../jxboot/ title="JX Boot GKE" class=md-nav__link> JX Boot GKE </a> </li> <li class=md-nav__item> <a href=../../jxboot-aks/ title="JX Boot AKS" class=md-nav__link> JX Boot AKS </a> </li> <li class=md-nav__item> <a href=../../aks-boot-core/ title="JX Boot & CloudBees Core" class=md-nav__link> JX Boot & CloudBees Core </a> </li> <li class=md-nav__item> <a href=../../rhos-311-minimal/ title="OpenShift 3.11" class=md-nav__link> OpenShift 3.11 </a> </li> <li class=md-nav__item> <a href=../../rhos-311-restricted/ title="OpenShift 3.11 - Restricted" class=md-nav__link> OpenShift 3.11 - Restricted </a> </li> <li class=md-nav__item> <a href=../../lighthouse-bitbucket/ title="Lighthouse & Bitbucket" class=md-nav__link> Lighthouse & Bitbucket </a> </li> <li class=md-nav__item> <a href=../../hello-world/ title=HelloWorld class=md-nav__link> HelloWorld </a> </li> <li class=md-nav__item> <a href=../../maven/ title=Maven class=md-nav__link> Maven </a> </li> <li class=md-nav__item> <a href=../../hybrid/ title=Hybrid class=md-nav__link> Hybrid </a> </li> <li class=md-nav__item> <a href=../../kubernetes-days/ title="Example For Console Reel" class=md-nav__link> Example For Console Reel </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5 type=checkbox id=nav-5> <label class=md-nav__link for=nav-5> Containers <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Containers data-md-level=1> <label class=md-nav__title for=nav-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Containers </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-1 type=checkbox id=nav-5-1> <label class=md-nav__link for=nav-5-1> OpenShift <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=OpenShift data-md-level=2> <label class=md-nav__title for=nav-5-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-minimal/ title="OpenShift 3.11 GCP(minimal)" class=md-nav__link> OpenShift 3.11 GCP(minimal) </a> </li> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-medium/ title="OpenShift 3.11 GCP(medium)" class=md-nav__link> OpenShift 3.11 GCP(medium) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-2 type=checkbox id=nav-5-2> <label class=md-nav__link for=nav-5-2> Kubernetes (K8S) <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Kubernetes (K8S)" data-md-level=2> <label class=md-nav__title for=nav-5-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Kubernetes (K8S) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/ title=Introduction class=md-nav__link> Introduction </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/cka-exam-prep/ title="CKA Exam prep" class=md-nav__link> CKA Exam prep </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/tools/ title=Tools class=md-nav__link> Tools </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-3 type=checkbox id=nav-5-3> <label class=md-nav__link for=nav-5-3> Managed Kubernetes (cloud) <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Managed Kubernetes (cloud)" data-md-level=2> <label class=md-nav__title for=nav-5-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Managed Kubernetes (cloud) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/distributions/install-gke/ title=GKE class=md-nav__link> GKE </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/gke-terraform/ title="GKE Terraform" class=md-nav__link> GKE Terraform </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/eks-eksctl/ title="AWS EKS" class=md-nav__link> AWS EKS </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-cli/ title="AKS CLI" class=md-nav__link> AKS CLI </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-terraform/ title="AKS Terraform" class=md-nav__link> AKS Terraform </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-4 type=checkbox id=nav-5-4> <label class=md-nav__link for=nav-5-4> K8S Hard Way - GCE <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="K8S Hard Way - GCE" data-md-level=2> <label class=md-nav__title for=nav-5-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> K8S Hard Way - GCE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/ title="Installer Preparation" class=md-nav__link> Installer Preparation </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/terraform-compute/ title="Create GCE resources" class=md-nav__link> Create GCE resources </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/certificates/ title="Prepare Certificates" class=md-nav__link> Prepare Certificates </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/kubeconfigs/ title="Prepare Kubeconfigs" class=md-nav__link> Prepare Kubeconfigs </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/encryption/ title="Encryption configuration" class=md-nav__link> Encryption configuration </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/etcd/ title="ETCD configuration" class=md-nav__link> ETCD configuration </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/controller/ title="Controller Config" class=md-nav__link> Controller Config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/worker/ title="Worker Config" class=md-nav__link> Worker Config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/remote-access/ title="Remote access" class=md-nav__link> Remote access </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/network/ title="Network config" class=md-nav__link> Network config </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/debug/ title=Debug class=md-nav__link> Debug </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-5 type=checkbox id=nav-5-5> <label class=md-nav__link for=nav-5-5> Docker <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Docker data-md-level=2> <label class=md-nav__title for=nav-5-5> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../docker/graceful-shutdown/ title="Graceful Shutdown" class=md-nav__link> Graceful Shutdown </a> </li> <li class=md-nav__item> <a href=../../../docker/build-kit/ title=BuildKit class=md-nav__link> BuildKit </a> </li> <li class=md-nav__item> <a href=../../../docker/multi-stage-builds/ title="Multi-Stage Builds(TBD)" class=md-nav__link> Multi-Stage Builds(TBD) </a> </li> <li class=md-nav__item> <a href=../../../docker/swarm/ title="Swarm (mode) (TBD)" class=md-nav__link> Swarm (mode) (TBD) </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-5-6 type=checkbox id=nav-5-6> <label class=md-nav__link for=nav-5-6> Linux <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Linux data-md-level=2> <label class=md-nav__title for=nav-5-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/systemd/ title=SystemD class=md-nav__link> SystemD </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6 type=checkbox id=nav-6> <label class=md-nav__link for=nav-6> Software Eng. <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Software Eng." data-md-level=1> <label class=md-nav__title for=nav-6> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Software Eng. </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-1 type=checkbox id=nav-6-1> <label class=md-nav__link for=nav-6-1> Automation <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Automation data-md-level=2> <label class=md-nav__title for=nav-6-1> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud/automation-pulumi/ title=Pulumi class=md-nav__link> Pulumi </a> </li> <li class=md-nav__item> <a href=../../../certificates/lets-encrypt-k8s/ title="Let's Encrypt K8S" class=md-nav__link> Let's Encrypt K8S </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-2 type=checkbox id=nav-6-2> <label class=md-nav__link for=nav-6-2> Software Engineering <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label="Software Engineering" data-md-level=2> <label class=md-nav__title for=nav-6-2> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Software Engineering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../swe/important-concepts/ title="Important Concepts" class=md-nav__link> Important Concepts </a> </li> <li class=md-nav__item> <a href=../../../swe/naming/ title=Naming class=md-nav__link> Naming </a> </li> <li class=md-nav__item> <a href=../../../swe/distributed/ title="Distributed Computing" class=md-nav__link> Distributed Computing </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-3 type=checkbox id=nav-6-3> <label class=md-nav__link for=nav-6-3> Productivity <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Productivity data-md-level=2> <label class=md-nav__title for=nav-6-3> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Productivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../productivity/ title=General class=md-nav__link> General </a> </li> <li class=md-nav__item> <a href=../../../productivity/incidents/ title=Incidents class=md-nav__link> Incidents </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle" data-md-toggle=nav-6-4 type=checkbox id=nav-6-4> <label class=md-nav__link for=nav-6-4> Java <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg> </span> </label> <nav class=md-nav aria-label=Java data-md-level=2> <label class=md-nav__title for=nav-6-4> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../java/ title=General class=md-nav__link> General </a> </li> <li class=md-nav__item> <a href=../../../keep-watching/ title="Spring Boot App" class=md-nav__link> Spring Boot App </a> </li> <li class=md-nav__item> <a href=../../../java/networking/ title="Java Networking" class=md-nav__link> Java Networking </a> </li> <li class=md-nav__item> <a href=../../../java/concurrency/ title="Java Concurrency" class=md-nav__link> Java Concurrency </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </span> Table of contents </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=#logging class=md-nav__link> Logging </a> <nav class=md-nav aria-label=Logging> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#create-sentry-project-retrieve-sdn class=md-nav__link> Create Sentry Project &amp; Retrieve SDN </a> </li> <li class=md-nav__item> <a href=#quarkus-sentry-dependency class=md-nav__link> Quarkus Sentry Dependency </a> </li> <li class=md-nav__item> <a href=#add-secret-to-vault class=md-nav__link> Add secret to Vault </a> </li> <li class=md-nav__item> <a href=#add-secret-placeholder-to-valuesyaml class=md-nav__link> Add secret placeholder to values.yaml </a> </li> <li class=md-nav__item> <a href=#sentry-dsn-secret class=md-nav__link> Sentry DSN Secret </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#configure-logging class=md-nav__link> Configure Logging </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#monitoring class=md-nav__link> Monitoring </a> <nav class=md-nav aria-label=Monitoring> <ul class=md-nav__list> <li class=md-nav__item> <a href=#install-promtheus-grafana class=md-nav__link> Install Promtheus &amp; Grafana </a> <nav class=md-nav aria-label="Install Promtheus & Grafana"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#prometheus class=md-nav__link> Prometheus </a> </li> <li class=md-nav__item> <a href=#grafana class=md-nav__link> Grafana </a> <nav class=md-nav aria-label=Grafana> <ul class=md-nav__list> <li class=md-nav__item> <a href=#values class=md-nav__link> Values </a> </li> <li class=md-nav__item> <a href=#install class=md-nav__link> Install </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#prometheus-grafana-in-jenkins-x-environment class=md-nav__link> Prometheus &amp; Grafana in Jenkins X Environment </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#add-quarkus-smallrye-metrics-dependency class=md-nav__link> Add quarkus-smallrye-metrics Dependency </a> </li> <li class=md-nav__item> <a href=#update-deployment-manifest_1 class=md-nav__link> Update Deployment manifest </a> </li> <li class=md-nav__item> <a href=#add-metrics-annotations-to-our-code class=md-nav__link> Add Metrics Annotations to our Code </a> </li> <li class=md-nav__item> <a href=#dashboard-json class=md-nav__link> Dashboard JSON </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tracing class=md-nav__link> Tracing </a> <nav class=md-nav aria-label=Tracing> <ul class=md-nav__list> <li class=md-nav__item> <a href=#steps_1 class=md-nav__link> Steps </a> </li> <li class=md-nav__item> <a href=#install-jaeger class=md-nav__link> Install Jaeger </a> </li> <li class=md-nav__item> <a href=#set-logger class=md-nav__link> Set Logger </a> </li> <li class=md-nav__item> <a href=#add-tracing-dependencies class=md-nav__link> Add Tracing Dependencies </a> </li> <li class=md-nav__item> <a href=#update-application-properties class=md-nav__link> Update Application Properties </a> </li> <li class=md-nav__item> <a href=#update-container-env class=md-nav__link> Update Container Env </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#next-steps class=md-nav__link> Next Steps </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content> <article class="md-content__inner md-typeset"> <a href=https://github.com/joostvdg/joostvdg.github.io/edit/master/docs/jenkinsx/java-native-prod/09-production-improvements.md title="Edit this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> </a> <h1 id=production-improvements>Production Improvements<a class=headerlink href=#production-improvements title="Permanent link">&para;</a></h1> <p>Now that we have more tests and validations in our application, we focus our attention on how the application is running. Things like logging, metrics, and tracing.</p> <p>There are again, more than a dozen things we can do to keep tabs on our application in Production. Instead, we will dive into three common things that are easy to do in Kubernetes and supported by Quarkus.</p> <ol> <li>Logging, with Sentry</li> <li>Monitoring Metrics with Prometheus &amp; Grafana</li> <li>Tracing with OpenTracing &amp; Jaeger</li> </ol> <h2 id=logging>Logging<a class=headerlink href=#logging title="Permanent link">&para;</a></h2> <p>There are a many ways you can deal with Logging. You can make use of the <a href=https://www.elastic.co/elastic-stack>ELK Stack</a> (ElasticSearch, Logstash and Kibana), <a href=https://grafana.com/oss/loki/ >Grafana's Loki</a>, or Public Cloud services such as <a href=https://cloud.google.com/products/operations>Google's Operations</a> (formerly Stackdriver) or <a href=https://docs.aws.amazon.com/AmazonCloudWatch/latest/logs/WhatIsCloudWatchLogs.html>AWS's CloudWatch</a>.</p> <p>While they're great for a whole class or problems, depending on your needs, there are free SaaS solutions that can cover what you need. Two that I've used are <a href=https://www.papertrail.com>Papertrail</a> and <a href=https://sentry.io/ >Sentry</a>. Personally, I'm quite happy with my hobby applications using Sentry - in the Free tier. Add the fact that it is <a href=https://quarkus.io/guides/logging-sentry>natively supported by Quarkus</a>, and I think I can get away with selecting Sentry for this exercise.</p> <p>If you don't agree, or want to use an alternative solution, <a href=#Monitoring>skip ahead to the monitoring paragraph</a>.</p> <div class="admonition info"> <p class=admonition-title>Info</p> <p>Sentry also has a self-hosting option, so you do not <em>have</em> to use the SaaS if you don't want to.</p> <p>I recommend to use the SaaS, but if you can't or prefer to selve host, you can use the official docker container or the <a href=https://github.com/helm/charts/tree/master/stable/sentry>Helm Chart</a>.</p> </div> <h3 id=steps>Steps<a class=headerlink href=#steps title="Permanent link">&para;</a></h3> <ul> <li>Create an account on <a href=sentry.io>sentry.io</a> and create a new <code>project</code>. <ul> <li>or, host your own, and then create a new <code>project</code></li> </ul> </li> <li>add sentry dependency to <code>pom.xml</code></li> <li>retrieve Sentry DSN for you application</li> <li>add Sentry DSN into Vault</li> <li>add Kubernetes secret to templates mounting the vault secret as Kubernetes secret</li> <li>bind Kubernetes secret to Deployment</li> <li>configure Sentry logging</li> </ul> <h3 id=create-sentry-project-retrieve-sdn>Create Sentry Project &amp; Retrieve SDN<a class=headerlink href=#create-sentry-project-retrieve-sdn title="Permanent link">&para;</a></h3> <p>First, create a new Project.</p> <p>Then, to retrieve the DSN:</p> <ul> <li><code>Settings</code> -&gt; <code>Projects</code> -&gt; <code>&lt;Select Your Project&gt;</code> -&gt; <code>Client Keys(DSN)</code></li> </ul> <h3 id=quarkus-sentry-dependency>Quarkus Sentry Dependency<a class=headerlink href=#quarkus-sentry-dependency title="Permanent link">&para;</a></h3> <div class="admonition example"> <p class=admonition-title>pom.xml</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;dependency&gt;</span>
    <span class=nt>&lt;groupId&gt;</span>io.quarkus<span class=nt>&lt;/groupId&gt;</span>
    <span class=nt>&lt;artifactId&gt;</span>quarkus-logging-sentry<span class=nt>&lt;/artifactId&gt;</span>
<span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> </div> <h3 id=add-secret-to-vault>Add secret to Vault<a class=headerlink href=#add-secret-to-vault title="Permanent link">&para;</a></h3> <p>We have to add the secret to Vault.</p> <p>If you've forgotten how to do this, you can ask Jenkins X for the URL and the Token to login.</p> <div class=highlight><pre><span></span><code>jx get vault-config
</code></pre></div> <p>After that, nagivate to <code>secrets/quarkus-fruits</code>, and create a new version of the secret. Add a new Key/Value pair with <code>SENTRY_DSN</code> as the Key, the DSN value as the Value.</p> <h3 id=add-secret-placeholder-to-valuesyaml>Add secret placeholder to values.yaml<a class=headerlink href=#add-secret-placeholder-to-valuesyaml title="Permanent link">&para;</a></h3> <p>As Sentry can automatically detect which environment the application is running in, you don't need to have different authentication per environment. So we're free to use a <em>global</em> secret - one secret for all environment.</p> <div class="admonition example"> <p class=admonition-title>charts/Name-Of-Your-Application/value.yaml</p> <div class=highlight><pre><span></span><code><span class=nt>secrets</span><span class=p>:</span>
  <span class=nt>sql_password</span><span class=p>:</span> <span class=s>&quot;&quot;</span>
  <span class=nt>sql_connection</span><span class=p>:</span> <span class=s>&quot;&quot;</span>
  <span class=nt>sqlsa</span><span class=p>:</span> <span class=s>&quot;&quot;</span>
<span class=hll>  <span class=nt>sentry_dsn</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">vault:quarkus-fruits:SENTRY_DSN</span>
</span></code></pre></div> </div> <h3 id=sentry-dsn-secret>Sentry DSN Secret<a class=headerlink href=#sentry-dsn-secret title="Permanent link">&para;</a></h3> <p>We create a Kubernetes secret in our Chart's template folder. This way we can mount the secret as an environment variable </p> <p>The Sentry SDK automatically picks up the environment variable <code>SENTRY_DSN</code>, so we don't have to configure anything else to get it to work. The SDK is OK with not having the configuration as well, so for local tests or our builds we're fine without it.</p> <div class="admonition example"> <p class=admonition-title>charts/Your-Application-Name/templates/sentry-dsn-secret.yaml</p> <div class=highlight><pre><span></span><code><span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class=nt>kind</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class=nt>metadata</span><span class=p>:</span>
  <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>template &quot;fullname&quot; .</span> <span class="p p-Indicator">}}</span><span class="l l-Scalar l-Scalar-Plain">-sentry-dsn</span>
<span class=nt>type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class=nt>data</span><span class=p>:</span>
  <span class=nt>SENTRY_DSN</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>.Values.secrets.sentry_dsn | b64enc</span> <span class="p p-Indicator">}}</span>
</code></pre></div> </div> <h3 id=update-deployment-manifest>Update Deployment manifest<a class=headerlink href=#update-deployment-manifest title="Permanent link">&para;</a></h3> <p>Now that we have the Kubernetes secret, have to add the Sentry secret to our application's Container in the Deployment manifest.</p> <div class=highlight><pre><span></span><code><span class=nt>envFrom</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>secretRef</span><span class=p>:</span>
      <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>template &quot;fullname&quot; .</span> <span class="p p-Indicator">}}</span><span class="l l-Scalar l-Scalar-Plain">-sentry-dsn</span>
</code></pre></div> <p>Our Deployment now looks like this (at least, the section related to our container):</p> <div class="admonition example"> <p class=admonition-title>charts/Name-Of-Your-Application/templates/deployment.yaml</p> <div class=highlight><pre><span></span><code><span class="p p-Indicator">-</span> <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>.Chart.Name</span> <span class="p p-Indicator">}}</span>
  <span class=nt>envFrom</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>secretRef</span><span class=p>:</span>
        <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>template &quot;fullname&quot; .</span> <span class="p p-Indicator">}}</span><span class="l l-Scalar l-Scalar-Plain">-sql-secret</span>
<span class=hll>    <span class="p p-Indicator">-</span> <span class=nt>secretRef</span><span class=p>:</span>
</span><span class=hll>        <span class=nt>name</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>template &quot;fullname&quot; .</span> <span class="p p-Indicator">}}</span><span class="l l-Scalar l-Scalar-Plain">-sentry-dsn</span>
</span>  <span class=nt>image</span><span class=p>:</span> <span class=s>&quot;{{</span><span class=nv> </span><span class=s>.Values.image.repository</span><span class=nv> </span><span class=s>}}:{{</span><span class=nv> </span><span class=s>.Values.image.tag</span><span class=nv> </span><span class=s>}}&quot;</span>
  <span class=nt>imagePullPolicy</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>.Values.image.pullPolicy</span> <span class="p p-Indicator">}}</span>
  <span class=nt>env</span><span class=p>:</span>
</code></pre></div> </div> <h3 id=configure-logging>Configure Logging<a class=headerlink href=#configure-logging title="Permanent link">&para;</a></h3> <p>The last bit to get Sentry &amp; Quarkus work their magic, is to configure the logging in our applications's properties file.</p> <div class="admonition example"> <p class=admonition-title>src/main/resources/application.properties</p> <div class=highlight><pre><span></span><code><span class=na>quarkus.log.sentry</span><span class=o>=</span><span class=s>true</span>
<span class=na>quarkus.log.sentry.dsn</span><span class=o>=</span><span class=s>${SENTRY_DSN}</span>
<span class=na>quarkus.log.sentry.level</span><span class=o>=</span><span class=s>WARN</span>
<span class=na>quarkus.log.sentry.in-app-packages</span><span class=o>=</span><span class=s>com.github.joostvdg</span>
</code></pre></div> </div> <div class="admonition important"> <p class=admonition-title>Important</p> <p>I've configured my personal package root, <code>com.github.joostvdg</code>, replace this with the package name of your application!</p> </div> <h2 id=monitoring>Monitoring<a class=headerlink href=#monitoring title="Permanent link">&para;</a></h2> <p>As we're running Jenkins X, we run in Kubernetes. The most commonly used monitoring solution with Kubernetes is Prometheus and Grafana.</p> <p>Quarkus has out-of-the-box support for exposing prometheus metrics, via the <code>smallrye-metrics</code> library.</p> <p>To create a Grafana dashboard for our application, we need to take the following steps:</p> <ul> <li>ensure we have Prometheus and Grafana installed in our cluster</li> <li>add dependency on Quarkus' <code>smallrye-metrics</code> library</li> <li>add (Kubernetes) annotations to our Helm Chart's Deployment manifest</li> <li>add (Java) annotations to our code, specifying the metrics</li> </ul> <p>For more information on adding metrics to your Quarkus application, <a href=https://quarkus.io/guides/microprofile-metrics>read the Quarkus Metrics guide</a>.</p> <h3 id=install-promtheus-grafana>Install Promtheus &amp; Grafana<a class=headerlink href=#install-promtheus-grafana title="Permanent link">&para;</a></h3> <p>The easiest way to install Promtheus and Grafana is via a Helm Chart.</p> <p>While they are commonly used together, they have their own Helm Charts.</p> <h4 id=prometheus>Prometheus<a class=headerlink href=#prometheus title="Permanent link">&para;</a></h4> <p>Prometheus is part of Helm's stable charts, and <a href=https://github.com/helm/charts/tree/master/stable/prometheus>you can find it here</a>.</p> <p>The Prometheus Helm Chart is weldefined, so for testing purposes, there's nothing you need to configure. I recommend you go through the options if this will be a (near)permanent installation.</p> <div class=tabbed-set data-tabs=1:2><input checked=checked id=__tabbed_1_1 name=__tabbed_1 type=radio><label for=__tabbed_1_1>Helm v3</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>helm install prometheus stable/prometheus
</code></pre></div> </div> <input id=__tabbed_1_2 name=__tabbed_1 type=radio><label for=__tabbed_1_2>Helm v2</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>helm install --name prometheus stable/prometheus
</code></pre></div> </div> </div> <h4 id=grafana>Grafana<a class=headerlink href=#grafana title="Permanent link">&para;</a></h4> <p><a href=https://github.com/helm/charts/tree/master/stable/grafana>Grafana's Helm Chart</a> is also part Helm's stable chart list.</p> <h5 id=values>Values<a class=headerlink href=#values title="Permanent link">&para;</a></h5> <p>Grafana does have some <a href=https://github.com/helm/charts/tree/master/stable/grafana#configuration>values</a> we have to set. I recommend setting the persistence to enabled and the persistence type to <code>statefulset</code>. This ensures that dashboards you install or create survice restarts, quite useful.</p> <p>One thing you have to configure, is the <code>ingress</code>, else you cannot access your Grafana installation. Below is an example configuration, you have to replace the hosts' configuration with yours. And if you do not have TLS enabled, remove the TLS segment.</p> <p>I also included how you can configure dashboards out of the box. One of doing so that is, this allows you to add public dashboards by their ID. Visit the <a href=https://grafana.com/grafana/dashboards>Grafana public Dashboards page</a> to explore what the community has to offer.</p> <div class="admonition example"> <p class=admonition-title>grafana-values.yaml</p> <div class=highlight><pre><span></span><code><span class=nt>persistence</span><span class=p>:</span>
  <span class=nt>enabled</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class=nt>type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">statefulset</span>
<span class=nt>ingress</span><span class=p>:</span>
  <span class=nt>annotations</span><span class=p>:</span>
    <span class=nt>kubernetes.io/ingress.class</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">nginx</span>
    <span class=nt>kubernetes.io/tls-acme</span><span class=p>:</span> <span class=s>&quot;true&quot;</span>
  <span class=nt>enabled</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
  <span class=nt>hosts</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">grafana.example.com</span>
  <span class=nt>tls</span><span class=p>:</span>
  <span class="p p-Indicator">-</span> <span class=nt>hosts</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">grafana.example.com</span>
    <span class=nt>secretName</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">tls-grafana-p</span>
<span class=nt>dashboardProviders</span><span class=p>:</span>
  <span class=nt>dashboardproviders.yaml</span><span class=p>:</span>
    <span class=nt>apiVersion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
    <span class=nt>providers</span><span class=p>:</span>
    <span class="p p-Indicator">-</span> <span class=nt>disableDeletion</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class=nt>editable</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
      <span class=nt>folder</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">default</span>
      <span class=nt>name</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Default</span>
      <span class=nt>options</span><span class=p>:</span>
        <span class=nt>path</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">/var/lib/grafana/dashboards/default</span>
      <span class=nt>orgId</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
      <span class=nt>type</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">file</span>
<span class=nt>dashboards</span><span class=p>:</span>
  <span class=nt>default</span><span class=p>:</span>
    <span class=nt>Capacity</span><span class=p>:</span>
      <span class=nt>datasource</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">Prometheus</span>
      <span class=nt>gnetId</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">5228</span>
      <span class=nt>revision</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">6</span>
</code></pre></div> </div> <h5 id=install>Install<a class=headerlink href=#install title="Permanent link">&para;</a></h5> <div class=tabbed-set data-tabs=2:2><input checked=checked id=__tabbed_2_1 name=__tabbed_2 type=radio><label for=__tabbed_2_1>Helm v3</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>helm install grafana stable/grafana -f grafana-values.yaml
</code></pre></div> </div> <input id=__tabbed_2_2 name=__tabbed_2 type=radio><label for=__tabbed_2_2>Helm v2</label><div class=tabbed-content> <div class=highlight><pre><span></span><code>helm install --name grafana stable/grafana -f grafana-values.yaml
</code></pre></div> </div> </div> <h4 id=prometheus-grafana-in-jenkins-x-environment>Prometheus &amp; Grafana in Jenkins X Environment<a class=headerlink href=#prometheus-grafana-in-jenkins-x-environment title="Permanent link">&para;</a></h4> <p>You can also opt for installing Prometheus and Grafana as a dependency in a Jenkins X environment. There are two ways of creating custom - e.g. not Dev, Staging or Production - environment in Jenkins X. If you want the environment to be part of your <code>jx boot</code> installation, <a href=https://joostvdg.github.io/jenkinsx/jxboot/#add-environment>I've written a how to guide on that</a>.</p> <p>If you want a shortcut, there's the <a href=https://jenkins-x.io/commands/jx_create_environment/ >jx create environment</a> command. This creates a proper Jenkins X environment, but it isn't managed via <code>jx boot</code>. </p> <p>Either way, the end result is pretty similar. You end up with a Git repository for this environment. In here, you can add Helm Chart dependencies in <code>env/requirements.yaml</code>, and specify their values in <code>env/values.yaml</code>.</p> <p>As this is written, May 2020, Jenkins X still relies on Helm v2. You can read about how <a href=https://v2.helm.sh/docs/glossary/#chart-dependency-subcharts>Helm v2 works with dependencies here</a>.</p> <h3 id=add-quarkus-smallrye-metrics-dependency>Add quarkus-smallrye-metrics Dependency<a class=headerlink href=#add-quarkus-smallrye-metrics-dependency title="Permanent link">&para;</a></h3> <p>To make our application expose metrics, default or custom, in a way that Prometheus can scrape, we add the <code>quarkus-smallrye-metrics</code> dependency.</p> <div class="admonition example"> <p class=admonition-title>pom.xml</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;dependency&gt;</span>
  <span class=nt>&lt;groupId&gt;</span>io.quarkus<span class=nt>&lt;/groupId&gt;</span>
  <span class=nt>&lt;artifactId&gt;</span>quarkus-smallrye-metrics<span class=nt>&lt;/artifactId&gt;</span>
<span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> </div> <h3 id=update-deployment-manifest_1>Update Deployment manifest<a class=headerlink href=#update-deployment-manifest_1 title="Permanent link">&para;</a></h3> <p>By default, Prometheus is a bit shy and doesn't scrape your metrics. If you want Prometheus to do so, you have to tell it, it's ok. We do so by setting an annotation in the <code>templates/deployment.yaml</code>. </p> <p>We add two annotations, we add <code>prometheus.io/port: "8080"</code> to tell Prometheus on which port to talk to our application. And <code>prometheus.io/scrape: "true"</code>, to say that it is oke to scrape our application.</p> <div class="admonition example"> <p class=admonition-title>templates/deployment.yaml</p> <div class=highlight><pre><span></span><code>  <span class=nt>template</span><span class=p>:</span>
    <span class=nt>metadata</span><span class=p>:</span>
      <span class=nt>labels</span><span class=p>:</span>
        <span class=nt>draft</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>default &quot;draft-app&quot; .Values.draft</span> <span class="p p-Indicator">}}</span>
        <span class=nt>app</span><span class=p>:</span> <span class="p p-Indicator">{{</span> <span class=nv>template &quot;fullname&quot; .</span> <span class="p p-Indicator">}}</span>
<span class=hll>      <span class=nt>annotations</span><span class=p>:</span>
</span><span class=hll>        <span class=nt>prometheus.io/port</span><span class=p>:</span> <span class=s>&quot;8080&quot;</span>
</span><span class=hll>        <span class=nt>prometheus.io/scrape</span><span class=p>:</span> <span class=s>&quot;true&quot;</span>
</span><span class="p p-Indicator">{{</span><span class=nv>- if .Values.podAnnotations</span> <span class="p p-Indicator">}}</span>
<span class="p p-Indicator">{{</span> <span class=nv>toYaml .Values.podAnnotations | indent 8</span> <span class="p p-Indicator">}}</span> <span class=c1>#Only for pods</span>
<span class="p p-Indicator">{{</span><span class=nv>- end</span> <span class="p p-Indicator">}}</span>
    <span class=nt>spec</span><span class=p>:</span>
</code></pre></div> </div> <h3 id=add-metrics-annotations-to-our-code>Add Metrics Annotations to our Code<a class=headerlink href=#add-metrics-annotations-to-our-code title="Permanent link">&para;</a></h3> <p>When you add the metrics dependency, some metrics are exposed by default. These might not say much about your application, so it is advisable to investigate what information you want to get and how to configure that.</p> <p>For example, on the <code>findAll()</code> method, for the <code>/fruits</code> endpoint, we can add a counter - how many times is this endpoint called - and a timer - various percentile buckets on the duration of the call:</p> <div class=highlight><pre><span></span><code><span class=nd>@Counted</span><span class=p>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&quot;fruit_get_all_count&quot;</span><span class=p>,</span> <span class=n>description</span> <span class=o>=</span> <span class=s>&quot;How many times all Fruits have been retrieved.&quot;</span><span class=p>)</span>
<span class=nd>@Timed</span><span class=p>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&quot;fruit_get_all_timer&quot;</span><span class=p>,</span> <span class=n>description</span> <span class=o>=</span> <span class=s>&quot;A measure of how long it takes to retrieve all Fruits.&quot;</span><span class=p>,</span> <span class=n>unit</span> <span class=o>=</span> <span class=n>MetricUnits</span><span class=p>.</span><span class=na>MILLISECONDS</span><span class=p>)</span>
</code></pre></div> <p>Look at <a href=https://github.com/joostvdg/jx-quarkus-demo-01/blob/master/src/main/java/com/github/joostvdg/jx/quarkus/fruits/FruitResource.java>FruitResource.java</a> for all the metrics I've added as examples.</p> <p>For information on these, I recommend taking another look at <a href=https://quarkus.io/guides/microprofile-metrics>the Quarkus Metrics guide</a>.</p> <h3 id=dashboard-json>Dashboard JSON<a class=headerlink href=#dashboard-json title="Permanent link">&para;</a></h3> <p>This is an example Grafana dashboard for the this application. You likely have to change the queries to reflect the name of your applcation.</p> <details class=example><summary>grafana-quarkus-app-dashboard-example.json</summary><div class=highlight><pre><span></span><code><span class=p>{</span>
  <span class=nt>&quot;annotations&quot;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&quot;list&quot;</span><span class=p>:</span> <span class=p>[</span>
      <span class=p>{</span>
        <span class=nt>&quot;builtIn&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
        <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=s2>&quot;-- Grafana --&quot;</span><span class=p>,</span>
        <span class=nt>&quot;enable&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;hide&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;iconColor&quot;</span><span class=p>:</span> <span class=s2>&quot;rgba(0, 211, 255, 1)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;Annotations &amp; Alerts&quot;</span><span class=p>,</span>
        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;dashboard&quot;</span>
      <span class=p>}</span>
    <span class=p>]</span>
  <span class=p>},</span>
  <span class=nt>&quot;editable&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
  <span class=nt>&quot;gnetId&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
  <span class=nt>&quot;graphTooltip&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
  <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>27</span><span class=p>,</span>
  <span class=nt>&quot;iteration&quot;</span><span class=p>:</span> <span class=mi>1589793457816</span><span class=p>,</span>
  <span class=nt>&quot;links&quot;</span><span class=p>:</span> <span class=p>[],</span>
  <span class=nt>&quot;panels&quot;</span><span class=p>:</span> <span class=p>[</span>
    <span class=p>{</span>
      <span class=nt>&quot;cacheTimeout&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>7</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>0</span>
      <span class=p>},</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>4</span><span class=p>,</span>
      <span class=nt>&quot;links&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;colorMode&quot;</span><span class=p>:</span> <span class=s2>&quot;value&quot;</span><span class=p>,</span>
        <span class=nt>&quot;fieldOptions&quot;</span><span class=p>:</span> <span class=p>{</span>
          <span class=nt>&quot;calcs&quot;</span><span class=p>:</span> <span class=p>[</span>
            <span class=s2>&quot;mean&quot;</span>
          <span class=p>],</span>
          <span class=nt>&quot;defaults&quot;</span><span class=p>:</span> <span class=p>{</span>
            <span class=nt>&quot;mappings&quot;</span><span class=p>:</span> <span class=p>[],</span>
            <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>{</span>
              <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;absolute&quot;</span><span class=p>,</span>
              <span class=nt>&quot;steps&quot;</span><span class=p>:</span> <span class=p>[</span>
                <span class=p>{</span>
                  <span class=nt>&quot;color&quot;</span><span class=p>:</span> <span class=s2>&quot;green&quot;</span><span class=p>,</span>
                  <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=kc>null</span>
                <span class=p>},</span>
                <span class=p>{</span>
                  <span class=nt>&quot;color&quot;</span><span class=p>:</span> <span class=s2>&quot;red&quot;</span><span class=p>,</span>
                  <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=mi>80</span>
                <span class=p>}</span>
              <span class=p>]</span>
            <span class=p>}</span>
          <span class=p>},</span>
          <span class=nt>&quot;overrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
          <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
        <span class=p>},</span>
        <span class=nt>&quot;graphMode&quot;</span><span class=p>:</span> <span class=s2>&quot;area&quot;</span><span class=p>,</span>
        <span class=nt>&quot;justifyMode&quot;</span><span class=p>:</span> <span class=s2>&quot;auto&quot;</span><span class=p>,</span>
        <span class=nt>&quot;orientation&quot;</span><span class=p>:</span> <span class=s2>&quot;auto&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;pluginVersion&quot;</span><span class=p>:</span> <span class=s2>&quot;6.7.3&quot;</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(base_thread_count{app=\&quot;$app\&quot;}) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{app}}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Threads&quot;</span><span class=p>,</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;stat&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;cacheTimeout&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;colorBackground&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;colorPostfix&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;colorPrefix&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;colorValue&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;colors&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=s2>&quot;#d44a3a&quot;</span><span class=p>,</span>
        <span class=s2>&quot;rgba(237, 129, 40, 0.89)&quot;</span><span class=p>,</span>
        <span class=s2>&quot;#299c46&quot;</span>
      <span class=p>],</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;decimals&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
      <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;s&quot;</span><span class=p>,</span>
      <span class=nt>&quot;gauge&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;maxValue&quot;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
        <span class=nt>&quot;minValue&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;thresholdLabels&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;thresholdMarkers&quot;</span><span class=p>:</span> <span class=kc>true</span>
      <span class=p>},</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>7</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>0</span>
      <span class=p>},</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span>
      <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;links&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;mappingType&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
      <span class=nt>&quot;mappingTypes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;value to text&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=mi>1</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;range to text&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=mi>2</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;maxDataPoints&quot;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;connected&quot;</span><span class=p>,</span>
      <span class=nt>&quot;nullText&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;postfix&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;postfixFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;50%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;prefix&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;prefixFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;50%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;rangeMaps&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;from&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;N/A&quot;</span><span class=p>,</span>
          <span class=nt>&quot;to&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;sparkline&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;fillColor&quot;</span><span class=p>:</span> <span class=s2>&quot;rgba(31, 118, 189, 0.18)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;full&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;lineColor&quot;</span><span class=p>:</span> <span class=s2>&quot;rgb(31, 120, 193)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;ymax&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;ymin&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>},</span>
      <span class=nt>&quot;tableColumn&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(base_jvm_uptime_seconds{app=\&quot;$app\&quot;}) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{app}} &quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=s2>&quot;0,3600&quot;</span><span class=p>,</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Uptime&quot;</span><span class=p>,</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;singlestat&quot;</span><span class=p>,</span>
      <span class=nt>&quot;valueFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;150%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;valueMaps&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;op&quot;</span><span class=p>:</span> <span class=s2>&quot;=&quot;</span><span class=p>,</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;N/A&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;valueName&quot;</span><span class=p>:</span> <span class=s2>&quot;current&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;cacheTimeout&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;colorBackground&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;colorValue&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;colors&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=s2>&quot;#299c46&quot;</span><span class=p>,</span>
        <span class=s2>&quot;rgba(237, 129, 40, 0.89)&quot;</span><span class=p>,</span>
        <span class=s2>&quot;#d44a3a&quot;</span>
      <span class=p>],</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;none&quot;</span><span class=p>,</span>
      <span class=nt>&quot;gauge&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;maxValue&quot;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
        <span class=nt>&quot;minValue&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;thresholdLabels&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;thresholdMarkers&quot;</span><span class=p>:</span> <span class=kc>true</span>
      <span class=p>},</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>17</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>0</span>
      <span class=p>},</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;links&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;mappingType&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
      <span class=nt>&quot;mappingTypes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;value to text&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=mi>1</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;range to text&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=mi>2</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;maxDataPoints&quot;</span><span class=p>:</span> <span class=mi>100</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;connected&quot;</span><span class=p>,</span>
      <span class=nt>&quot;nullText&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;pluginVersion&quot;</span><span class=p>:</span> <span class=s2>&quot;6.7.3&quot;</span><span class=p>,</span>
      <span class=nt>&quot;postfix&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;postfixFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;50%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;prefix&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;prefixFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;150%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;rangeMaps&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;from&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;N/A&quot;</span><span class=p>,</span>
          <span class=nt>&quot;to&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;sparkline&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;fillColor&quot;</span><span class=p>:</span> <span class=s2>&quot;rgba(31, 118, 189, 0.18)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;full&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;lineColor&quot;</span><span class=p>:</span> <span class=s2>&quot;rgb(31, 120, 193)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;ymax&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;ymin&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>},</span>
      <span class=nt>&quot;tableColumn&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(application_com_github_joostvdg_jx_quarkus_fruits_FruitResource_fruit_get_all_count_total{ app=\&quot;$app\&quot;}) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Fruits GetAll Counter&quot;</span><span class=p>,</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;singlestat&quot;</span><span class=p>,</span>
      <span class=nt>&quot;valueFontSize&quot;</span><span class=p>:</span> <span class=s2>&quot;150%&quot;</span><span class=p>,</span>
      <span class=nt>&quot;valueMaps&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;op&quot;</span><span class=p>:</span> <span class=s2>&quot;=&quot;</span><span class=p>,</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;N/A&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;valueName&quot;</span><span class=p>:</span> <span class=s2>&quot;current&quot;</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;aliasColors&quot;</span><span class=p>:</span> <span class=p>{},</span>
      <span class=nt>&quot;bars&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;dashLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;dashes&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;fill&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
      <span class=nt>&quot;fillGradient&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>7</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>3</span>
      <span class=p>},</span>
      <span class=nt>&quot;hiddenSeries&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span>
      <span class=nt>&quot;legend&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;avg&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;total&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=nt>&quot;lines&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;linewidth&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;dataLinks&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;percentage&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;pointradius&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;points&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;renderer&quot;</span><span class=p>:</span> <span class=s2>&quot;flot&quot;</span><span class=p>,</span>
      <span class=nt>&quot;seriesOverrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;spaceLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;stack&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;steppedLine&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(rate(base_gc_time_total_seconds{app=\&quot;$app\&quot;}[5m])) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{app}}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeRegions&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;GC Time Spent Rate&quot;</span><span class=p>,</span>
      <span class=nt>&quot;tooltip&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;shared&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;value_type&quot;</span><span class=p>:</span> <span class=s2>&quot;individual&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;graph&quot;</span><span class=p>,</span>
      <span class=nt>&quot;xaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;buckets&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;time&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;yaxes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;s&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;s&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;yaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;align&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;alignLevel&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>}</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;aliasColors&quot;</span><span class=p>:</span> <span class=p>{},</span>
      <span class=nt>&quot;bars&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;dashLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;dashes&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;fill&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;fillGradient&quot;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>7</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>11</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>3</span>
      <span class=p>},</span>
      <span class=nt>&quot;hiddenSeries&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;legend&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;alignAsTable&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;avg&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;total&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=nt>&quot;lines&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;linewidth&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;dataLinks&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;percentage&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;pointradius&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;points&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;renderer&quot;</span><span class=p>:</span> <span class=s2>&quot;flot&quot;</span><span class=p>,</span>
      <span class=nt>&quot;seriesOverrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;spaceLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;stack&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;steppedLine&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(base_memory_usedHeap_bytes{ app=~\&quot;$app\&quot;}) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{app}}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeRegions&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Heap Size&quot;</span><span class=p>,</span>
      <span class=nt>&quot;tooltip&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;shared&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;value_type&quot;</span><span class=p>:</span> <span class=s2>&quot;individual&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;graph&quot;</span><span class=p>,</span>
      <span class=nt>&quot;xaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;buckets&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;time&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;yaxes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;decbytes&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;decbytes&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;yaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;align&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;alignLevel&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>}</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;aliasColors&quot;</span><span class=p>:</span> <span class=p>{},</span>
      <span class=nt>&quot;bars&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;dashLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;dashes&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;fill&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;fillGradient&quot;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>10</span>
      <span class=p>},</span>
      <span class=nt>&quot;hiddenSeries&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>16</span><span class=p>,</span>
      <span class=nt>&quot;legend&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;avg&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;total&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=nt>&quot;lines&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;linewidth&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;dataLinks&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;percentage&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;pointradius&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;points&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;renderer&quot;</span><span class=p>:</span> <span class=s2>&quot;flot&quot;</span><span class=p>,</span>
      <span class=nt>&quot;seriesOverrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;spaceLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;stack&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;steppedLine&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(rate(container_cpu_system_seconds_total{container_name=\&quot;$container\&quot;}[5m])) by (container_name)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{container_name}}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeRegions&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Container CPU Over Time&quot;</span><span class=p>,</span>
      <span class=nt>&quot;tooltip&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;shared&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;value_type&quot;</span><span class=p>:</span> <span class=s2>&quot;individual&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;graph&quot;</span><span class=p>,</span>
      <span class=nt>&quot;xaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;buckets&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;time&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;yaxes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;short&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;short&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;yaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;align&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;alignLevel&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>}</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;aliasColors&quot;</span><span class=p>:</span> <span class=p>{},</span>
      <span class=nt>&quot;bars&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;dashLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;dashes&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;fill&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;fillGradient&quot;</span><span class=p>:</span> <span class=mi>5</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>11</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>10</span>
      <span class=p>},</span>
      <span class=nt>&quot;hiddenSeries&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>14</span><span class=p>,</span>
      <span class=nt>&quot;legend&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;avg&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;total&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=nt>&quot;lines&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;linewidth&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;dataLinks&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;percentage&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;pointradius&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;points&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;renderer&quot;</span><span class=p>:</span> <span class=s2>&quot;flot&quot;</span><span class=p>,</span>
      <span class=nt>&quot;seriesOverrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;spaceLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;stack&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;steppedLine&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(container_memory_usage_bytes{container_name=~\&quot;$container\&quot;}) by (container_name)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{container_name}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeRegions&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Container Memory&quot;</span><span class=p>,</span>
      <span class=nt>&quot;tooltip&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;shared&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;value_type&quot;</span><span class=p>:</span> <span class=s2>&quot;individual&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;graph&quot;</span><span class=p>,</span>
      <span class=nt>&quot;xaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;buckets&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;time&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;yaxes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;decbytes&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;decbytes&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;yaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;align&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;alignLevel&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>}</span>
    <span class=p>},</span>
    <span class=p>{</span>
      <span class=nt>&quot;aliasColors&quot;</span><span class=p>:</span> <span class=p>{},</span>
      <span class=nt>&quot;bars&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;dashLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;dashes&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;fill&quot;</span><span class=p>:</span> <span class=mi>3</span><span class=p>,</span>
      <span class=nt>&quot;fillGradient&quot;</span><span class=p>:</span> <span class=mi>6</span><span class=p>,</span>
      <span class=nt>&quot;gridPos&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;h&quot;</span><span class=p>:</span> <span class=mi>8</span><span class=p>,</span>
        <span class=nt>&quot;w&quot;</span><span class=p>:</span> <span class=mi>23</span><span class=p>,</span>
        <span class=nt>&quot;x&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;y&quot;</span><span class=p>:</span> <span class=mi>18</span>
      <span class=p>},</span>
      <span class=nt>&quot;hiddenSeries&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;id&quot;</span><span class=p>:</span> <span class=mi>12</span><span class=p>,</span>
      <span class=nt>&quot;legend&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;avg&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;total&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=nt>&quot;lines&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;linewidth&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;nullPointMode&quot;</span><span class=p>:</span> <span class=s2>&quot;null&quot;</span><span class=p>,</span>
      <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;dataLinks&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;percentage&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;pointradius&quot;</span><span class=p>:</span> <span class=mi>2</span><span class=p>,</span>
      <span class=nt>&quot;points&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;renderer&quot;</span><span class=p>:</span> <span class=s2>&quot;flot&quot;</span><span class=p>,</span>
      <span class=nt>&quot;seriesOverrides&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;spaceLength&quot;</span><span class=p>:</span> <span class=mi>10</span><span class=p>,</span>
      <span class=nt>&quot;stack&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
      <span class=nt>&quot;steppedLine&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
      <span class=nt>&quot;targets&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;expr&quot;</span><span class=p>:</span> <span class=s2>&quot;sum(rate(application_com_github_joostvdg_jx_quarkus_fruits_FruitResource_fruit_get_all_count_total{app=\&quot;$app\&quot;}[5m])) by (app)&quot;</span><span class=p>,</span>
          <span class=nt>&quot;interval&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
          <span class=nt>&quot;legendFormat&quot;</span><span class=p>:</span> <span class=s2>&quot;{{app}}&quot;</span><span class=p>,</span>
          <span class=nt>&quot;refId&quot;</span><span class=p>:</span> <span class=s2>&quot;A&quot;</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;thresholds&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeFrom&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;timeRegions&quot;</span><span class=p>:</span> <span class=p>[],</span>
      <span class=nt>&quot;timeShift&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
      <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;Fruits GetAll Call Rate&quot;</span><span class=p>,</span>
      <span class=nt>&quot;tooltip&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;shared&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;value_type&quot;</span><span class=p>:</span> <span class=s2>&quot;individual&quot;</span>
      <span class=p>},</span>
      <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;graph&quot;</span><span class=p>,</span>
      <span class=nt>&quot;xaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;buckets&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;mode&quot;</span><span class=p>:</span> <span class=s2>&quot;time&quot;</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
        <span class=nt>&quot;values&quot;</span><span class=p>:</span> <span class=p>[]</span>
      <span class=p>},</span>
      <span class=nt>&quot;yaxes&quot;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;short&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>},</span>
        <span class=p>{</span>
          <span class=nt>&quot;format&quot;</span><span class=p>:</span> <span class=s2>&quot;short&quot;</span><span class=p>,</span>
          <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;logBase&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
          <span class=nt>&quot;max&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;min&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
          <span class=nt>&quot;show&quot;</span><span class=p>:</span> <span class=kc>true</span>
        <span class=p>}</span>
      <span class=p>],</span>
      <span class=nt>&quot;yaxis&quot;</span><span class=p>:</span> <span class=p>{</span>
        <span class=nt>&quot;align&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;alignLevel&quot;</span><span class=p>:</span> <span class=kc>null</span>
      <span class=p>}</span>
    <span class=p>}</span>
  <span class=p>],</span>
  <span class=nt>&quot;refresh&quot;</span><span class=p>:</span> <span class=s2>&quot;5m&quot;</span><span class=p>,</span>
  <span class=nt>&quot;schemaVersion&quot;</span><span class=p>:</span> <span class=mi>22</span><span class=p>,</span>
  <span class=nt>&quot;style&quot;</span><span class=p>:</span> <span class=s2>&quot;dark&quot;</span><span class=p>,</span>
  <span class=nt>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[],</span>
  <span class=nt>&quot;templating&quot;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&quot;list&quot;</span><span class=p>:</span> <span class=p>[</span>
      <span class=p>{</span>
        <span class=nt>&quot;allValue&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=p>{</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-jx-quarkus-demo-01&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-jx-quarkus-demo-01&quot;</span>
        <span class=p>},</span>
        <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=s2>&quot;Prometheus&quot;</span><span class=p>,</span>
        <span class=nt>&quot;definition&quot;</span><span class=p>:</span> <span class=s2>&quot;label_values(base_memory_usedHeap_bytes, app)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;hide&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;includeAll&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;index&quot;</span><span class=p>:</span> <span class=mi>-1</span><span class=p>,</span>
        <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;App&quot;</span><span class=p>,</span>
        <span class=nt>&quot;multi&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;app&quot;</span><span class=p>,</span>
        <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>[</span>
          <span class=p>{</span>
            <span class=nt>&quot;selected&quot;</span><span class=p>:</span> <span class=kc>true</span><span class=p>,</span>
            <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-jx-quarkus-demo-01&quot;</span><span class=p>,</span>
            <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-jx-quarkus-demo-01&quot;</span>
          <span class=p>}</span>
        <span class=p>],</span>
        <span class=nt>&quot;query&quot;</span><span class=p>:</span> <span class=s2>&quot;label_values(base_memory_usedHeap_bytes, app)&quot;</span><span class=p>,</span>
        <span class=nt>&quot;refresh&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;regex&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;skipUrlSync&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;tagValuesQuery&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[],</span>
        <span class=nt>&quot;tagsQuery&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;query&quot;</span><span class=p>,</span>
        <span class=nt>&quot;useTags&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>},</span>
      <span class=p>{</span>
        <span class=nt>&quot;allValue&quot;</span><span class=p>:</span> <span class=kc>null</span><span class=p>,</span>
        <span class=nt>&quot;current&quot;</span><span class=p>:</span> <span class=p>{</span>
          <span class=nt>&quot;text&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-quarkus-demo-01&quot;</span><span class=p>,</span>
          <span class=nt>&quot;value&quot;</span><span class=p>:</span> <span class=s2>&quot;jx-quarkus-demo-01&quot;</span>
        <span class=p>},</span>
        <span class=nt>&quot;datasource&quot;</span><span class=p>:</span> <span class=s2>&quot;Prometheus&quot;</span><span class=p>,</span>
        <span class=nt>&quot;definition&quot;</span><span class=p>:</span> <span class=s2>&quot;label_values(container_memory_usage_bytes, container_name)\n&quot;</span><span class=p>,</span>
        <span class=nt>&quot;hide&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;includeAll&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;index&quot;</span><span class=p>:</span> <span class=mi>-1</span><span class=p>,</span>
        <span class=nt>&quot;label&quot;</span><span class=p>:</span> <span class=s2>&quot;Container&quot;</span><span class=p>,</span>
        <span class=nt>&quot;multi&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;name&quot;</span><span class=p>:</span> <span class=s2>&quot;container&quot;</span><span class=p>,</span>
        <span class=nt>&quot;options&quot;</span><span class=p>:</span> <span class=p>[],</span>
        <span class=nt>&quot;query&quot;</span><span class=p>:</span> <span class=s2>&quot;label_values(container_memory_usage_bytes, container_name)\n&quot;</span><span class=p>,</span>
        <span class=nt>&quot;refresh&quot;</span><span class=p>:</span> <span class=mi>1</span><span class=p>,</span>
        <span class=nt>&quot;regex&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;skipUrlSync&quot;</span><span class=p>:</span> <span class=kc>false</span><span class=p>,</span>
        <span class=nt>&quot;sort&quot;</span><span class=p>:</span> <span class=mi>0</span><span class=p>,</span>
        <span class=nt>&quot;tagValuesQuery&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;tags&quot;</span><span class=p>:</span> <span class=p>[],</span>
        <span class=nt>&quot;tagsQuery&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
        <span class=nt>&quot;type&quot;</span><span class=p>:</span> <span class=s2>&quot;query&quot;</span><span class=p>,</span>
        <span class=nt>&quot;useTags&quot;</span><span class=p>:</span> <span class=kc>false</span>
      <span class=p>}</span>
    <span class=p>]</span>
  <span class=p>},</span>
  <span class=nt>&quot;time&quot;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&quot;from&quot;</span><span class=p>:</span> <span class=s2>&quot;now-3h&quot;</span><span class=p>,</span>
    <span class=nt>&quot;to&quot;</span><span class=p>:</span> <span class=s2>&quot;now&quot;</span>
  <span class=p>},</span>
  <span class=nt>&quot;timepicker&quot;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&quot;refresh_intervals&quot;</span><span class=p>:</span> <span class=p>[</span>
      <span class=s2>&quot;5s&quot;</span><span class=p>,</span>
      <span class=s2>&quot;10s&quot;</span><span class=p>,</span>
      <span class=s2>&quot;30s&quot;</span><span class=p>,</span>
      <span class=s2>&quot;1m&quot;</span><span class=p>,</span>
      <span class=s2>&quot;5m&quot;</span><span class=p>,</span>
      <span class=s2>&quot;15m&quot;</span><span class=p>,</span>
      <span class=s2>&quot;30m&quot;</span><span class=p>,</span>
      <span class=s2>&quot;1h&quot;</span><span class=p>,</span>
      <span class=s2>&quot;2h&quot;</span><span class=p>,</span>
      <span class=s2>&quot;1d&quot;</span>
    <span class=p>]</span>
  <span class=p>},</span>
  <span class=nt>&quot;timezone&quot;</span><span class=p>:</span> <span class=s2>&quot;&quot;</span><span class=p>,</span>
  <span class=nt>&quot;title&quot;</span><span class=p>:</span> <span class=s2>&quot;JX Quarkus Demo&quot;</span><span class=p>,</span>
  <span class=nt>&quot;uid&quot;</span><span class=p>:</span> <span class=s2>&quot;6ne5tiRGk&quot;</span><span class=p>,</span>
  <span class=nt>&quot;variables&quot;</span><span class=p>:</span> <span class=p>{</span>
    <span class=nt>&quot;list&quot;</span><span class=p>:</span> <span class=p>[]</span>
  <span class=p>},</span>
  <span class=nt>&quot;version&quot;</span><span class=p>:</span> <span class=mi>6</span>
<span class=p>}</span>
</code></pre></div> </details> <h2 id=tracing>Tracing<a class=headerlink href=#tracing title="Permanent link">&para;</a></h2> <p>While both Monitoring and Logging are important, they're not the full story in understand your application's behaviour. Your log might reveal there's an issue, and the metrics can show which calls are slowing down. They can't tell you what part of the code is slowing down!</p> <p>To get further information, you need to implement tracing. Well, isn't it just great that Quarkus has you covered here as well? Quarkus omplements <a href=https://opentracing.io/ >OpenTracing</a> via <a href=https://github.com/smallrye/smallrye-opentracing>SmallRye OpenTracing</a>. </p> <p>To display the traces, we'll use <a href=https://www.jaegertracing.io/ >Jaeger</a>. If you're interrested, <a href=https://quarkus.io/guides/opentracing>Quarkus has a guide on the implementation</a>, or read on and get to work right away.</p> <h3 id=steps_1>Steps<a class=headerlink href=#steps_1 title="Permanent link">&para;</a></h3> <ul> <li>install Jaeger</li> <li>add dependency</li> <li>change logger</li> <li>update the container environment variables</li> <li> <p>update the application's properties</p> </li> <li> <p><a href=https://github.com/opentracing-contrib/java-jdbc>https://github.com/opentracing-contrib/java-jdbc</a></p> </li> </ul> <h3 id=install-jaeger>Install Jaeger<a class=headerlink href=#install-jaeger title="Permanent link">&para;</a></h3> <p>Jaeger has an <a href=https://github.com/jaegertracing/helm-charts/tree/master/charts/jaeger>official Helm Chart</a>, which has very sensible defaults. For production use, I do recommend investigation the options available, especially related to its data storage!</p> <div class=highlight><pre><span></span><code>helm repo add jaegertracing https://jaegertracing.github.io/helm-charts
helm repo update
</code></pre></div> <div class=highlight><pre><span></span><code>helm install jaeger jaegertracing/jaeger
</code></pre></div> <h3 id=set-logger>Set Logger<a class=headerlink href=#set-logger title="Permanent link">&para;</a></h3> <p>To automatically have our traces logged in Jaeger, it seems - I can be wrong - that we have to use the JBoss Logger that Quarkus ships with. As it is there by default, we don't have to add any new dependency.</p> <div class="admonition example"> <p class=admonition-title>FruitResource.java</p> <div class=highlight><pre><span></span><code><span class=hll><span class=kn>import</span> <span class=nn>org.jboss.logging.Logger</span><span class=p>;</span>
</span>
<span class=nd>@RestController</span>
<span class=nd>@RequestMapping</span><span class=p>(</span><span class=n>value</span> <span class=o>=</span> <span class=s>&quot;/fruits&quot;</span><span class=p>)</span>
<span class=kd>public</span> <span class=kd>class</span> <span class=nc>FruitResource</span> <span class=p>{</span>

<span class=hll>    <span class=kd>private</span> <span class=kd>static</span> <span class=kd>final</span> <span class=n>Logger</span> <span class=n>LOG</span> <span class=o>=</span> <span class=n>Logger</span><span class=p>.</span><span class=na>getLogger</span><span class=p>(</span><span class=n>FruitResource</span><span class=p>.</span><span class=na>class</span><span class=p>);</span>
</span>
    <span class=nd>@GetMapping</span><span class=p>(</span><span class=s>&quot;/&quot;</span><span class=p>)</span>
    <span class=nd>@Counted</span><span class=p>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&quot;fruit_get_all_count&quot;</span><span class=p>,</span> <span class=n>description</span> <span class=o>=</span> <span class=s>&quot;How many times all Fruits have been retrieved.&quot;</span><span class=p>)</span>
    <span class=nd>@Timed</span><span class=p>(</span><span class=n>name</span> <span class=o>=</span> <span class=s>&quot;fruit_get_all_timer&quot;</span><span class=p>,</span> <span class=n>description</span> <span class=o>=</span> <span class=s>&quot;A measure of how long it takes to retrieve all Fruits.&quot;</span><span class=p>,</span> <span class=n>unit</span> <span class=o>=</span> <span class=n>MetricUnits</span><span class=p>.</span><span class=na>MILLISECONDS</span><span class=p>)</span>
    <span class=kd>public</span> <span class=n>List</span><span class=o>&lt;</span><span class=n>Fruit</span><span class=o>&gt;</span> <span class=nf>findAll</span><span class=p>()</span> <span class=p>{</span>
        <span class=kd>var</span> <span class=n>it</span> <span class=o>=</span> <span class=n>fruitRepository</span><span class=p>.</span><span class=na>findAll</span><span class=p>();</span>
        <span class=n>List</span><span class=o>&lt;</span><span class=n>Fruit</span><span class=o>&gt;</span> <span class=n>fruits</span> <span class=o>=</span> <span class=k>new</span> <span class=n>ArrayList</span><span class=o>&lt;</span><span class=n>Fruit</span><span class=o>&gt;</span><span class=p>();</span>
        <span class=n>it</span><span class=p>.</span><span class=na>forEach</span><span class=p>(</span><span class=n>fruits</span><span class=p>::</span><span class=n>add</span><span class=p>);</span>
        <span class=n>fruits</span><span class=p>.</span><span class=na>sort</span><span class=p>(</span><span class=n>Comparator</span><span class=p>.</span><span class=na>comparing</span><span class=p>(</span><span class=n>Fruit</span><span class=p>::</span><span class=n>getId</span><span class=p>));</span>
<span class=hll>        <span class=n>LOG</span><span class=p>.</span><span class=na>infof</span><span class=p>(</span><span class=s>&quot;Found {} fruits&quot;</span><span class=p>,</span> <span class=n>fruits</span><span class=p>.</span><span class=na>size</span><span class=p>());</span>
</span>        <span class=k>return</span> <span class=n>fruits</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> </div> <h3 id=add-tracing-dependencies>Add Tracing Dependencies<a class=headerlink href=#add-tracing-dependencies title="Permanent link">&para;</a></h3> <p>Speaking of dependencies, we do have to add not one, but two for tracing itself. The first one being <code>quarkus-smallrye-opentracing</code> for the tracing basics. </p> <p>If we also add <code>io.opentracing.contrib:opentracing-jdbc</code>, our trace spans will include our JDBC calls as well, how neat!</p> <div class="admonition example"> <p class=admonition-title>pom.xml</p> <div class=highlight><pre><span></span><code><span class=nt>&lt;dependency&gt;</span>
  <span class=nt>&lt;groupId&gt;</span>io.quarkus<span class=nt>&lt;/groupId&gt;</span>
  <span class=nt>&lt;artifactId&gt;</span>quarkus-smallrye-opentracing<span class=nt>&lt;/artifactId&gt;</span>
<span class=nt>&lt;/dependency&gt;</span>
<span class=nt>&lt;dependency&gt;</span>
  <span class=nt>&lt;groupId&gt;</span>io.opentracing.contrib<span class=nt>&lt;/groupId&gt;</span>
  <span class=nt>&lt;artifactId&gt;</span>opentracing-jdbc<span class=nt>&lt;/artifactId&gt;</span>
<span class=nt>&lt;/dependency&gt;</span>
</code></pre></div> </div> <h3 id=update-application-properties>Update Application Properties<a class=headerlink href=#update-application-properties title="Permanent link">&para;</a></h3> <p>As you're probably used to by now, to ensure Quarkus does the right thing, we have to update the Application Properties. Most of these values are copied from the Quarkus tracing guide, including the log format. </p> <p>I've made two of the values a variable controllable via environment varibles.</p> <ol> <li><code>quarkus.jaeger.sampler-param</code>: this ensure the percentage of calls that is traced, ranging from 0 (0%) to 1 (100%).</li> <li><code>quarkus.jaeger.endpoint</code>: which is something that can vary per environment</li> </ol> <div class="admonition example"> <p class=admonition-title>src/main/resources/application.properties</p> <div class=highlight><pre><span></span><code><span class=na>quarkus.jaeger.service-name</span><span class=o>=</span><span class=s>quarkus-fruits</span>
<span class=na>quarkus.jaeger.sampler-type</span><span class=o>=</span><span class=s>const</span>
<span class=na>quarkus.jaeger.sampler-param</span><span class=o>=</span><span class=s>${JAEGER_SAMPLER_RATE}</span>
<span class=na>quarkus.log.console.format</span><span class=o>=</span><span class=s>%d{HH:mm:ss} %-5p traceId=%X{traceId}, spanId=%X{spanId}, sampled=%X{sampled} [%c{2.}] (%t) %s%e%n</span>
<span class=hll><span class=na>quarkus.datasource.jdbc.driver</span><span class=o>=</span><span class=s>io.opentracing.contrib.jdbc.TracingDriver</span>
</span><span class=na>quarkus.jaeger.endpoint</span><span class=o>=</span><span class=s>${JAEGER_COLLECTOR_ENDPOINT}</span>
</code></pre></div> </div> <h3 id=update-container-env>Update Container Env<a class=headerlink href=#update-container-env title="Permanent link">&para;</a></h3> <p>As I've set two variables in the Application Properties file that come from environment variables, we also have to set a default value in our Chart's <code>values.yml</code>.</p> <p>Another change is the <code>GOOGLE_SQL_CONN</code> variable. In order for the tracing to work for the JDBC calls, we have to add <code>tracing</code> into the JDBC URL.</p> <div class="admonition example"> <p class=admonition-title>charts/Name-Of-Your-Application/values.yaml</p> <div class=highlight><pre><span></span><code><span class=nt>env</span><span class=p>:</span>
<span class=hll>  <span class=nt>GOOGLE_SQL_CONN</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">jdbc:tracing:mysql://127.0.0.1:3306/fruits</span>
</span>  <span class=nt>JAEGER_COLLECTOR_ENDPOINT</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">http://jx-jaeger-collector.monitoring:14268/api/traces</span>
  <span class=c1># Sample all requests. Set sampler-param to somewhere between 0 and 1, e.g. 0.50, if you do not wish to sample all requests.</span>
  <span class=nt>JAEGER_SAMPLER_RATE</span><span class=p>:</span> <span class="l l-Scalar l-Scalar-Plain">1</span>
</code></pre></div> </div> <h2 id=next-steps>Next Steps<a class=headerlink href=#next-steps title="Permanent link">&para;</a></h2> <p>Now that we have (more) control over our application and the environment it runs in, we can promote the application to Production.</p> <hr> <div class=md-source-date> <small> Last update: 2020-06-02 16:25:30 </small> </div> <h2 id=__comments>Comments</h2> <div id=disqus_thread></div> <script>var disqus_config=function(){this.page.url="https://joostvdg.github.io/jenkinsx/java-native-prod/09-production-improvements/",this.page.identifier="/jenkinsx/java-native-prod/09-production-improvements/"};!function(){var e=document,i=e.createElement("script");i.src="//joostvdg-github-io.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(i)}()</script> </article> </div> </div> </main> <footer class=md-footer> <div class=md-footer-nav> <nav class="md-footer-nav__inner md-grid" aria-label=Footer> <a href=../08-preview-int-test/ title="Previews & Integration Tests" class="md-footer-nav__link md-footer-nav__link--prev" rel=prev> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Previous </span> Previews & Integration Tests </div> </div> </a> <a href=../10-promote-prod/ title="Promote To Production" class="md-footer-nav__link md-footer-nav__link--next" rel=next> <div class=md-footer-nav__title> <div class=md-ellipsis> <span class=md-footer-nav__direction> Next </span> Promote To Production </div> </div> <div class="md-footer-nav__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> </div> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2020 Joost van der Griendt </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/joostvdg target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/joost_vdg target=_blank rel=noopener title=twitter.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://linkedin.com/in/joostvdg target=_blank rel=noopener title=linkedin.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <script src=../../../assets/javascripts/vendor.d710d30a.min.js></script> <script src=../../../assets/javascripts/bundle.5f27aba8.min.js></script><script id=__lang type=application/json>{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script> <script>
        app = initialize({
          base: "../../..",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script> </body> </html>