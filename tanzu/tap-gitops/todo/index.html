<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://joostvdg.github.io/tanzu/tap-gitops/todo/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.5.3, mkdocs-material-9.4.7"><title>TODO - J's Software Development Pages</title><link rel=stylesheet href=../../../assets/stylesheets/main.4b4a2bd9.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.356b1318.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"JetBrains Mono"}</style><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","G-353607268"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","G-353607268",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-353607268",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=orange data-md-color-accent=indigo> <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#todo class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="J's Software Development Pages" class="md-header__button md-logo" aria-label="J's Software Development Pages" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> J's Software Development Pages </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> TODO </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media data-md-color-scheme=default data-md-color-primary=orange data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg> </label> <input class=md-option data-md-color-media data-md-color-scheme=slate data-md-color-primary=deep-orange data-md-color-accent=teal aria-label="Switch to light mode" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg> </label> </form> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/joostvdg/joostvdg.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../blogs/jenkins-pipeline-support-tool/ class=md-tabs__link> Blogs </a> </li> <li class=md-tabs__item> <a href=../../../jenkins/jenkins-on-kubernetes/ class=md-tabs__link> Jenkins & CloudBees </a> </li> <li class=md-tabs__item> <a href=../../../openshift/rhos311-gcp-minimal/ class=md-tabs__link> Kubernetes & Docker </a> </li> <li class=md-tabs__item> <a href=../../ class=md-tabs__link> VMware Tanzu </a> </li> <li class=md-tabs__item> <a href=../../../jenkinsx/build-packs/ class=md-tabs__link> Jenkins X </a> </li> <li class=md-tabs__item> <a href=../../../cloud/automation-pulumi/ class=md-tabs__link> Software Eng. </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="J's Software Development Pages" class="md-nav__button md-logo" aria-label="J's Software Development Pages" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M6.5 20q-2.28 0-3.89-1.57Q1 16.85 1 14.58q0-1.95 1.17-3.48 1.18-1.53 3.08-1.95.63-2.3 2.5-3.72Q9.63 4 12 4q2.93 0 4.96 2.04Q19 8.07 19 11q1.73.2 2.86 1.5 1.14 1.28 1.14 3 0 1.88-1.31 3.19T18.5 20Z"/></svg> </a> J's Software Development Pages </label> <div class=md-nav__source> <a href=https://github.com/joostvdg/joostvdg.github.io title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> joostvdg/joostvdg.github.io </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_1> <label class=md-nav__link for=__nav_1 id=__nav_1_label tabindex> <span class=md-ellipsis> Home </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_1_label aria-expanded=false> <label class=md-nav__title for=__nav_1> <span class="md-nav__icon md-icon"></span> Home </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Me </span> </a> </li> <li class=md-nav__item> <a href=../../../other/mkdocs/ class=md-nav__link> <span class=md-ellipsis> MKDocs (This Static Website) </span> </a> </li> <li class=md-nav__item> <a href=../../../other/vim/ class=md-nav__link> <span class=md-ellipsis> VIM </span> </a> </li> <li class=md-nav__item> <a href=../../../other/shell/ class=md-nav__link> <span class=md-ellipsis> Shell </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex> <span class=md-ellipsis> Blogs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Blogs </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blogs/jenkins-pipeline-support-tool/ class=md-nav__link> <span class=md-ellipsis> Jenkins Pipeline Support Tools </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/graceful-shutdown/ class=md-nav__link> <span class=md-ellipsis> Docker Graceful Shutdown </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/docker-alternatives/ class=md-nav__link> <span class=md-ellipsis> Pipelines with Docker Alternatives </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/k8s-lets-encrypt/ class=md-nav__link> <span class=md-ellipsis> Let's Encrypt for Kubernetes Apps </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/sso-azure-ad/ class=md-nav__link> <span class=md-ellipsis> CloudBees SSO Azure AD </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/teams-automation/ class=md-nav__link> <span class=md-ellipsis> CloudBees Automate Teams </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/kubernetes-sso-keycloak/ class=md-nav__link> <span class=md-ellipsis> Kubernetes SSO Keycloak </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_8> <label class=md-nav__link for=__nav_2_8 id=__nav_2_8_label tabindex=0> <span class=md-ellipsis> Jenkins X Java Native Image Prod </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_8_label aria-expanded=false> <label class=md-nav__title for=__nav_2_8> <span class="md-nav__icon md-icon"></span> Jenkins X Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/01-intro/ class=md-nav__link> <span class=md-ellipsis> Intro </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/02-cloud-sql/ class=md-nav__link> <span class=md-ellipsis> Cloud SQL </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/03-quarkus/ class=md-nav__link> <span class=md-ellipsis> Quarkus </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/04-jx-import/ class=md-nav__link> <span class=md-ellipsis> Import Into Jenkins X </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/05-jx-secrets/ class=md-nav__link> <span class=md-ellipsis> Database Connection And Secrets </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/06-native-image/ class=md-nav__link> <span class=md-ellipsis> Native Image </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/07-pipeline-improvements/ class=md-nav__link> <span class=md-ellipsis> Pipeline Improvements </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/08-preview-int-test/ class=md-nav__link> <span class=md-ellipsis> Previews & Integration Tests </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/09-production-improvements/ class=md-nav__link> <span class=md-ellipsis> Production Improvements </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/10-promote-prod/ class=md-nav__link> <span class=md-ellipsis> Promote To Production </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_9> <label class=md-nav__link for=__nav_2_9 id=__nav_2_9_label tabindex=0> <span class=md-ellipsis> Jenkins Monitoring Kubernetes </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_9_label aria-expanded=false> <label class=md-nav__title for=__nav_2_9> <span class="md-nav__icon md-icon"></span> Jenkins Monitoring Kubernetes </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/introduction/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/prepare/ class=md-nav__link> <span class=md-ellipsis> Prepare Environment </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/install/ class=md-nav__link> <span class=md-ellipsis> Install Tools </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/metrics/ class=md-nav__link> <span class=md-ellipsis> Metrics </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/alerts/ class=md-nav__link> <span class=md-ellipsis> Alerts </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/pipeline/ class=md-nav__link> <span class=md-ellipsis> Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/dashboard/ class=md-nav__link> <span class=md-ellipsis> Dashboard </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/monitor-jenkins-on-k8s/cloudbees/ class=md-nav__link> <span class=md-ellipsis> CloudBees </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../blogs/k8s-crd/ class=md-nav__link> <span class=md-ellipsis> Create your own k8s resource </span> </a> </li> <li class=md-nav__item> <a href=../../../blogs/dockercon-eu-2018/ class=md-nav__link> <span class=md-ellipsis> DockerCon EU 2018 </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Jenkins & CloudBees </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Jenkins & CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins/jenkins-on-kubernetes/ class=md-nav__link> <span class=md-ellipsis> Jenkins On Kubernetes </span> </a> </li> <li class=md-nav__item> <a href=../../jenkins-tap/ class=md-nav__link> <span class=md-ellipsis> TAP & Jenkins </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> CloudBees </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> CloudBees </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloudbees/cbci-casc/ class=md-nav__link> <span class=md-ellipsis> CloudBees CasC </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/sso-azure-ad/ class=md-nav__link> <span class=md-ellipsis> Single Sign On - AzureAD </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/teams-automation/ class=md-nav__link> <span class=md-ellipsis> CloudBees Automate Teams </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-gke-helm/ class=md-nav__link> <span class=md-ellipsis> CloudBees CI on GKE </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-eks/ class=md-nav__link> <span class=md-ellipsis> CloudBees CI on EKS </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/cbc-team-namespace/ class=md-nav__link> <span class=md-ellipsis> Team Master Namespace </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster-gke/ class=md-nav__link> <span class=md-ellipsis> Multi-Cluster GKE </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster-eks/ class=md-nav__link> <span class=md-ellipsis> Multi-Cluster EKS </span> </a> </li> <li class=md-nav__item> <a href=../../../cloudbees/multi-cluster/ class=md-nav__link> <span class=md-ellipsis> Multi-Cluster (OLD/AKS) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Jenkins </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Jenkins </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins/ class=md-nav__link> <span class=md-ellipsis> Intro </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jobdsl/ class=md-nav__link> <span class=md-ellipsis> JobDSL </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-jobs/jenkins-jobs-builder/ class=md-nav__link> <span class=md-ellipsis> JenkinsJobsBuilder </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Jenkins Pipelines </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Jenkins Pipelines </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline/job-types/ class=md-nav__link> <span class=md-ellipsis> Job Types </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/kaniko-pipelines/ class=md-nav__link> <span class=md-ellipsis> Build Docker Image Kaniko </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/podtemplate-dind/ class=md-nav__link> <span class=md-ellipsis> PodTemplate With Docker-In-Docker </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/jenkins-parallel-pipeline/ class=md-nav__link> <span class=md-ellipsis> Parallel Pipelines </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/core-concepts/ class=md-nav__link> <span class=md-ellipsis> Core Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/artifactory-integration/ class=md-nav__link> <span class=md-ellipsis> Artifactory Integration </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/declarative-pipeline/ class=md-nav__link> <span class=md-ellipsis> Pipeline (declarative) </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/groovy-pipeline/ class=md-nav__link> <span class=md-ellipsis> Groovy DSL Pipeline </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/global-shared-library/ class=md-nav__link> <span class=md-ellipsis> Pipeline Libraries </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/ide-integration-pipeline-dsl/ class=md-nav__link> <span class=md-ellipsis> DSL IDE Integration </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline/input/ class=md-nav__link> <span class=md-ellipsis> Input </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Jenkins Pipeline Examples </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Jenkins Pipeline Examples </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/ class=md-nav__link> <span class=md-ellipsis> Index </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-alternatives/ class=md-nav__link> <span class=md-ellipsis> Docker Alternatives </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/maven-declarative/ class=md-nav__link> <span class=md-ellipsis> Maven Declarative </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkins-pipeline-examples/docker-declarative/ class=md-nav__link> <span class=md-ellipsis> Docker Declarative </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex> <span class=md-ellipsis> Kubernetes & Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Kubernetes & Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_1> <label class=md-nav__link for=__nav_4_1 id=__nav_4_1_label tabindex=0> <span class=md-ellipsis> OpenShift </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_1_label aria-expanded=false> <label class=md-nav__title for=__nav_4_1> <span class="md-nav__icon md-icon"></span> OpenShift </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-minimal/ class=md-nav__link> <span class=md-ellipsis> OpenShift 3.11 GCP(minimal) </span> </a> </li> <li class=md-nav__item> <a href=../../../openshift/rhos311-gcp-medium/ class=md-nav__link> <span class=md-ellipsis> OpenShift 3.11 GCP(medium) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <label class=md-nav__link for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class=md-ellipsis> Kubernetes (K8S) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Kubernetes (K8S) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/ class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/cka-exam-prep/ class=md-nav__link> <span class=md-ellipsis> CKA Exam prep </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/tools/ class=md-nav__link> <span class=md-ellipsis> Tools </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <label class=md-nav__link for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class=md-ellipsis> Managed Kubernetes (cloud) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Managed Kubernetes (cloud) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/distributions/install-gke/ class=md-nav__link> <span class=md-ellipsis> GKE </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/gke-terraform/ class=md-nav__link> <span class=md-ellipsis> GKE Terraform </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/eks-eksctl/ class=md-nav__link> <span class=md-ellipsis> AWS EKS </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-cli/ class=md-nav__link> <span class=md-ellipsis> AKS CLI </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/distributions/aks-terraform/ class=md-nav__link> <span class=md-ellipsis> AKS Terraform </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4> <label class=md-nav__link for=__nav_4_4 id=__nav_4_4_label tabindex=0> <span class=md-ellipsis> K8S Hard Way - GCE </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4_4> <span class="md-nav__icon md-icon"></span> K8S Hard Way - GCE </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/ class=md-nav__link> <span class=md-ellipsis> Installer Preparation </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/terraform-compute/ class=md-nav__link> <span class=md-ellipsis> Create GCE resources </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/certificates/ class=md-nav__link> <span class=md-ellipsis> Prepare Certificates </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/kubeconfigs/ class=md-nav__link> <span class=md-ellipsis> Prepare Kubeconfigs </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/encryption/ class=md-nav__link> <span class=md-ellipsis> Encryption configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/etcd/ class=md-nav__link> <span class=md-ellipsis> ETCD configuration </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/controller/ class=md-nav__link> <span class=md-ellipsis> Controller Config </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/worker/ class=md-nav__link> <span class=md-ellipsis> Worker Config </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/remote-access/ class=md-nav__link> <span class=md-ellipsis> Remote access </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/network/ class=md-nav__link> <span class=md-ellipsis> Network config </span> </a> </li> <li class=md-nav__item> <a href=../../../kubernetes/khw-gce/debug/ class=md-nav__link> <span class=md-ellipsis> Debug </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_5> <label class=md-nav__link for=__nav_4_5 id=__nav_4_5_label tabindex=0> <span class=md-ellipsis> Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_5_label aria-expanded=false> <label class=md-nav__title for=__nav_4_5> <span class="md-nav__icon md-icon"></span> Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../docker/graceful-shutdown/ class=md-nav__link> <span class=md-ellipsis> Graceful Shutdown </span> </a> </li> <li class=md-nav__item> <a href=../../../docker/build-kit/ class=md-nav__link> <span class=md-ellipsis> BuildKit </span> </a> </li> <li class=md-nav__item> <a href=../../../docker/multi-stage-builds/ class=md-nav__link> <span class=md-ellipsis> Multi-Stage Builds(TBD) </span> </a> </li> <li class=md-nav__item> <a href=../../../docker/swarm/ class=md-nav__link> <span class=md-ellipsis> Swarm (mode) (TBD) </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_6> <label class=md-nav__link for=__nav_4_6 id=__nav_4_6_label tabindex=0> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_6_label aria-expanded=false> <label class=md-nav__title for=__nav_4_6> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../linux/systemd/ class=md-nav__link> <span class=md-ellipsis> SystemD </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex> <span class=md-ellipsis> VMware Tanzu </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> VMware Tanzu </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../ class=md-nav__link> <span class=md-ellipsis> Tanzu </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2> <label class=md-nav__link for=__nav_5_2 id=__nav_5_2_label tabindex=0> <span class=md-ellipsis> TAP GitOps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_5_2> <span class="md-nav__icon md-icon"></span> TAP GitOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ class=md-nav__link> <span class=md-ellipsis> Intro </span> </a> </li> <li class=md-nav__item> <a href=../services/ class=md-nav__link> <span class=md-ellipsis> Services </span> </a> </li> <li class=md-nav__item> <a href=../tap-gitops-prep/ class=md-nav__link> <span class=md-ellipsis> TAP GitOps Prep </span> </a> </li> <li class=md-nav__item> <a href=../tap-build/ class=md-nav__link> <span class=md-ellipsis> TAP Build </span> </a> </li> <li class=md-nav__item> <a href=../tap-run/ class=md-nav__link> <span class=md-ellipsis> TAP Run </span> </a> </li> <li class=md-nav__item> <a href=../tap-view/ class=md-nav__link> <span class=md-ellipsis> TAP View </span> </a> </li> <li class=md-nav__item> <a href=../next-steps/ class=md-nav__link> <span class=md-ellipsis> Next Steps </span> </a> </li> <li class=md-nav__item> <a href=../run-with-argocd/ class=md-nav__link> <span class=md-ellipsis> TAP Run With ArgoCD </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_3> <label class=md-nav__link for=__nav_5_3 id=__nav_5_3_label tabindex=0> <span class=md-ellipsis> TAP Supply Chain Customization </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_5_3> <span class="md-nav__icon md-icon"></span> TAP Supply Chain Customization </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../supplychain/overview/ class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=../../supplychain/gitops-flow/ class=md-nav__link> <span class=md-ellipsis> GitOps Flow </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4> <label class=md-nav__link for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class=md-ellipsis> TAP GUI/Portal </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> TAP GUI/Portal </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tap-gui/ class=md-nav__link> <span class=md-ellipsis> Intro </span> </a> </li> <li class=md-nav__item> <a href=../../tap-gui/gitlab-integration/ class=md-nav__link> <span class=md-ellipsis> GitLab Integration </span> </a> </li> <li class=md-nav__item> <a href=../../tap-gui/techdocs-minio/ class=md-nav__link> <span class=md-ellipsis> TechDocs with MinIO </span> </a> </li> <li class=md-nav__item> <a href=../../tap-gui/tdp-plugins/ class=md-nav__link> <span class=md-ellipsis> Backstage Plugins </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5> <label class=md-nav__link for=__nav_5_5 id=__nav_5_5_label tabindex=0> <span class=md-ellipsis> TAP on TKGs </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5> <span class="md-nav__icon md-icon"></span> TAP on TKGs </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_5_1> <label class=md-nav__link for=__nav_5_5_1 id=__nav_5_5_1_label tabindex=0> <span class=md-ellipsis> TAP 1.3.x </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_5_1_label aria-expanded=false> <label class=md-nav__title for=__nav_5_5_1> <span class="md-nav__icon md-icon"></span> TAP 1.3.x </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tkgs/tap13-overview/ class=md-nav__link> <span class=md-ellipsis> TAP on TKGs </span> </a> </li> <li class=md-nav__item> <a href=../../tkgs/tap13/build-basic/ class=md-nav__link> <span class=md-ellipsis> TAP Build Profile - Basic Supply Chain </span> </a> </li> <li class=md-nav__item> <a href=../../tkgs/tap13/build-scanning-testing/ class=md-nav__link> <span class=md-ellipsis> TAP Build Profile - Scanning & Testing Supply Chain </span> </a> </li> <li class=md-nav__item> <a href=../../tkgs/tap13/run/ class=md-nav__link> <span class=md-ellipsis> TAP Run Profile </span> </a> </li> <li class=md-nav__item> <a href=../../tkgs/tap13/view/ class=md-nav__link> <span class=md-ellipsis> TAP View Profile </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_6> <label class=md-nav__link for=__nav_5_6 id=__nav_5_6_label tabindex=0> <span class=md-ellipsis> TAP DevSecOps </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_6_label aria-expanded=false> <label class=md-nav__title for=__nav_5_6> <span class="md-nav__icon md-icon"></span> TAP DevSecOps </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../grype-airgapped/ class=md-nav__link> <span class=md-ellipsis> Use Grype In Restricted Environments </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_7> <label class=md-nav__link for=__nav_5_7 id=__nav_5_7_label tabindex=0> <span class=md-ellipsis> TAP Misc </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_7_label aria-expanded=false> <label class=md-nav__title for=__nav_5_7> <span class="md-nav__icon md-icon"></span> TAP Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../tap/fluxcd-ssh/ class=md-nav__link> <span class=md-ellipsis> Git access with SSH </span> </a> </li> <li class=md-nav__item> <a href=../../tap/gitea/ class=md-nav__link> <span class=md-ellipsis> Setup Gitea </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../custom-ca/ class=md-nav__link> <span class=md-ellipsis> Setup Custom CA </span> </a> </li> <li class=md-nav__item> <a href=../../harbor-ca/ class=md-nav__link> <span class=md-ellipsis> Harbor with custom CA </span> </a> </li> <li class=md-nav__item> <a href=../../minio-ca/ class=md-nav__link> <span class=md-ellipsis> Minio with custom CA </span> </a> </li> <li class=md-nav__item> <a href=../../tkg-grafana/ class=md-nav__link> <span class=md-ellipsis> TKG Grafana with LDAP </span> </a> </li> <li class=md-nav__item> <a href=../../dependencies/ class=md-nav__link> <span class=md-ellipsis> Dependencies </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6> <label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex> <span class=md-ellipsis> Jenkins X </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_6_label aria-expanded=false> <label class=md-nav__title for=__nav_6> <span class="md-nav__icon md-icon"></span> Jenkins X </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/build-packs/ class=md-nav__link> <span class=md-ellipsis> Build Packs </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jx-pipelines/ class=md-nav__link> <span class=md-ellipsis> Jenkins X Pipelines </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_6_3> <label class=md-nav__link for=__nav_6_3 id=__nav_6_3_label tabindex=0> <span class=md-ellipsis> Java Native Image Prod </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_6_3_label aria-expanded=false> <label class=md-nav__title for=__nav_6_3> <span class="md-nav__icon md-icon"></span> Java Native Image Prod </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/01-intro/ class=md-nav__link> <span class=md-ellipsis> Intro </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/02-cloud-sql/ class=md-nav__link> <span class=md-ellipsis> Cloud SQL </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/03-quarkus/ class=md-nav__link> <span class=md-ellipsis> Quarkus </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/04-jx-import/ class=md-nav__link> <span class=md-ellipsis> Import Into Jenkins X </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/05-jx-secrets/ class=md-nav__link> <span class=md-ellipsis> Database Connection And Secrets </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/06-native-image/ class=md-nav__link> <span class=md-ellipsis> Native Image </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/07-pipeline-improvements/ class=md-nav__link> <span class=md-ellipsis> Pipeline Improvements </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/08-preview-int-test/ class=md-nav__link> <span class=md-ellipsis> Previews & Integration Tests </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/09-production-improvements/ class=md-nav__link> <span class=md-ellipsis> Production Improvements </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/java-native-prod/10-promote-prod/ class=md-nav__link> <span class=md-ellipsis> Promote To Production </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../jenkinsx/builder-image/ class=md-nav__link> <span class=md-ellipsis> Create Builder Image </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jxboot/ class=md-nav__link> <span class=md-ellipsis> JX Boot GKE </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/jxboot-aks/ class=md-nav__link> <span class=md-ellipsis> JX Boot AKS </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/aks-boot-core/ class=md-nav__link> <span class=md-ellipsis> JX Boot & CloudBees Core </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/rhos-311-minimal/ class=md-nav__link> <span class=md-ellipsis> OpenShift 3.11 </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/rhos-311-restricted/ class=md-nav__link> <span class=md-ellipsis> OpenShift 3.11 - Restricted </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/lighthouse-bitbucket/ class=md-nav__link> <span class=md-ellipsis> Lighthouse & Bitbucket </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/hello-world/ class=md-nav__link> <span class=md-ellipsis> HelloWorld </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/maven/ class=md-nav__link> <span class=md-ellipsis> Maven </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/hybrid/ class=md-nav__link> <span class=md-ellipsis> Hybrid </span> </a> </li> <li class=md-nav__item> <a href=../../../jenkinsx/kubernetes-days/ class=md-nav__link> <span class=md-ellipsis> Example For Console Reel </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7> <label class=md-nav__link for=__nav_7 id=__nav_7_label tabindex> <span class=md-ellipsis> Software Eng. </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_7_label aria-expanded=false> <label class=md-nav__title for=__nav_7> <span class="md-nav__icon md-icon"></span> Software Eng. </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_1> <label class=md-nav__link for=__nav_7_1 id=__nav_7_1_label tabindex=0> <span class=md-ellipsis> Automation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_1_label aria-expanded=false> <label class=md-nav__title for=__nav_7_1> <span class="md-nav__icon md-icon"></span> Automation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../cloud/automation-pulumi/ class=md-nav__link> <span class=md-ellipsis> Pulumi </span> </a> </li> <li class=md-nav__item> <a href=../../../certificates/lets-encrypt-k8s/ class=md-nav__link> <span class=md-ellipsis> Let's Encrypt K8S </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_2> <label class=md-nav__link for=__nav_7_2 id=__nav_7_2_label tabindex=0> <span class=md-ellipsis> Software Engineering </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_2_label aria-expanded=false> <label class=md-nav__title for=__nav_7_2> <span class="md-nav__icon md-icon"></span> Software Engineering </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../swe/important-concepts/ class=md-nav__link> <span class=md-ellipsis> Important Concepts </span> </a> </li> <li class=md-nav__item> <a href=../../../swe/naming/ class=md-nav__link> <span class=md-ellipsis> Naming </span> </a> </li> <li class=md-nav__item> <a href=../../../swe/distributed/ class=md-nav__link> <span class=md-ellipsis> Distributed Computing </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_3> <label class=md-nav__link for=__nav_7_3 id=__nav_7_3_label tabindex=0> <span class=md-ellipsis> Productivity </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_3_label aria-expanded=false> <label class=md-nav__title for=__nav_7_3> <span class="md-nav__icon md-icon"></span> Productivity </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../productivity/ class=md-nav__link> <span class=md-ellipsis> General </span> </a> </li> <li class=md-nav__item> <a href=../../../productivity/incidents/ class=md-nav__link> <span class=md-ellipsis> Incidents </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_7_4> <label class=md-nav__link for=__nav_7_4 id=__nav_7_4_label tabindex=0> <span class=md-ellipsis> Java </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_7_4_label aria-expanded=false> <label class=md-nav__title for=__nav_7_4> <span class="md-nav__icon md-icon"></span> Java </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../java/ class=md-nav__link> <span class=md-ellipsis> General </span> </a> </li> <li class=md-nav__item> <a href=../../../keep-watching/ class=md-nav__link> <span class=md-ellipsis> Spring Boot App </span> </a> </li> <li class=md-nav__item> <a href=../../../java/networking/ class=md-nav__link> <span class=md-ellipsis> Java Networking </span> </a> </li> <li class=md-nav__item> <a href=../../../java/concurrency/ class=md-nav__link> <span class=md-ellipsis> Java Concurrency </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#tanzu-network-tap-download class=md-nav__link> Tanzu Network TAP Download </a> </li> <li class=md-nav__item> <a href=#run-cluster-prep class=md-nav__link> Run Cluster Prep </a> <nav class=md-nav aria-label="Run Cluster Prep"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tgk-packages class=md-nav__link> TGK Packages </a> </li> <li class=md-nav__item> <a href=#run-profile-install class=md-nav__link> Run Profile Install </a> </li> <li class=md-nav__item> <a href=#minio-helm-chart class=md-nav__link> MinIO Helm Chart </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#yaml-titleminio-httpproxyyaml class=md-nav__link> ```yaml title="minio-httpproxy.yaml </a> <nav class=md-nav aria-label="```yaml title=" minio-httpproxy.yaml&quot;> <ul class=md-nav__list> <li class=md-nav__item> <a href=#harbor class=md-nav__link> Harbor </a> </li> <li class=md-nav__item> <a href=#gitlab class=md-nav__link> GitLab </a> </li> <li class=md-nav__item> <a href=#argocd-install-in-full-with-access-to-run class=md-nav__link> ArgoCD - Install in Full with Access to Run </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#notes-tap-gitops-17 class=md-nav__link> Notes - TAP GitOps 1.7 </a> <nav class=md-nav aria-label="Notes - TAP GitOps 1.7"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#kapp-controller class=md-nav__link> KAPP Controller </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tkr-126-admission-policies class=md-nav__link> TKR 1.26 Admission Policies </a> </li> <li class=md-nav__item> <a href=#kpack-tutorial class=md-nav__link> KPACK Tutorial </a> <nav class=md-nav aria-label="KPACK Tutorial"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#registry-secret class=md-nav__link> Registry Secret </a> </li> <li class=md-nav__item> <a href=#serviceaccount class=md-nav__link> ServiceAccount </a> </li> <li class=md-nav__item> <a href=#clusterstore class=md-nav__link> ClusterStore </a> </li> <li class=md-nav__item> <a href=#clusterstack class=md-nav__link> ClusterStack </a> </li> <li class=md-nav__item> <a href=#builder class=md-nav__link> Builder </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#relocate-images class=md-nav__link> Relocate Images </a> <nav class=md-nav aria-label="Relocate Images"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#tap class=md-nav__link> TAP </a> </li> <li class=md-nav__item> <a href=#tbs-full-deps class=md-nav__link> TBS Full Deps </a> </li> <li class=md-nav__item> <a href=#tbs-deps-package-repository class=md-nav__link> TBS Deps Package Repository </a> </li> <li class=md-nav__item> <a href=#tbs-deps-package class=md-nav__link> TBS Deps Package </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#tap-gui class=md-nav__link> TAP GUI </a> <nav class=md-nav aria-label="TAP GUI"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#backstage-plugins class=md-nav__link> Backstage Plugins </a> </li> <li class=md-nav__item> <a href=#run-it class=md-nav__link> Run It </a> </li> <li class=md-nav__item> <a href=#permissions-for-tap-gui-sa class=md-nav__link> Permissions for TAP GUI SA </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=todo>TODO<a class=headerlink href=#todo title="Permanent link">&para;</a></h1> <ul> <li>Applications with ArgoCD</li> <li>re-create GitLab</li> <li>or change GitOps flow repo to GitHub</li> <li>Next steps<ul> <li>Customize TAP GUI</li> </ul> </li> <li>write about Supply Chain extensions<ul> <li>Tekton Pipelines with Tasks</li> <li>Tekton Tasks + Workspace + overwriting the OOTB Supply Chain</li> <li>Change folder structure for GitOps repository</li> <li>Test Containers + DinD</li> <li>use Docker in Docker alternative from ITQ guy</li> </ul> </li> <li>TAP in GCP<ul> <li>get access to GCP</li> </ul> </li> </ul> <h2 id=tanzu-network-tap-download>Tanzu Network TAP Download<a class=headerlink href=#tanzu-network-tap-download title="Permanent link">&para;</a></h2> <ul> <li><a href=https://network.tanzu.vmware.com/products/tanzu-application-platform/releases>https://network.tanzu.vmware.com/products/tanzu-application-platform/releases</a></li> </ul> <h2 id=run-cluster-prep>Run Cluster Prep<a class=headerlink href=#run-cluster-prep title="Permanent link">&para;</a></h2> <h3 id=tgk-packages>TGK Packages<a class=headerlink href=#tgk-packages title="Permanent link">&para;</a></h3> <ul> <li><a href=https://docs.vmware.com/en/VMware-Tanzu-Packages/2023.9.19/tanzu-packages/index.html>https://docs.vmware.com/en/VMware-Tanzu-Packages/2023.9.19/tanzu-packages/index.html</a></li> <li>version is decoupled from TKG (2.4)</li> </ul> <p>List versions available (of the package repo):</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a>imgpkg<span class=w> </span>tag<span class=w> </span>list<span class=w> </span>-i<span class=w> </span>projects.registry.vmware.com/tkg/packages/standard/repo
</span></code></pre></div> <p>Which shows something like this (abbreviated):</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a>v2.2.0_update.2
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a>v2023.10.16
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a>v2023.7.13
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a>v2023.7.13_update.1
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a>v2023.7.13_update.2
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a>v2023.7.31_update.1
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a>v2023.9.19
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a>v2023.9.19_update.1
</span></code></pre></div> <div class="language-yaml highlight"><span class=filename>packagerepo-v2023.9.19_update.1.yaml</span><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">packaging.carvel.dev/v1alpha1</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PackageRepository</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-standard</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tkg-system</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nt>fetch</span><span class=p>:</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>    </span><span class=nt>imgpkgBundle</span><span class=p>:</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>      </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">projects.registry.vmware.com/tkg/packages/standard/repo:v2023.9.19_update.1</span>
</span></code></pre></div> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class="l l-Scalar l-Scalar-Plain">kubectl apply -f packagerepo-v2023.9.19_update.1.yaml</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>list<span class=w> </span>-A
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a>kubectl<span class=w> </span>create<span class=w> </span>ns<span class=w> </span>cert-manager
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a>kubectl<span class=w> </span>-n<span class=w> </span>tkg-system<span class=w> </span>get<span class=w> </span>packages<span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>cert-manager
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a>tanzu<span class=w> </span>package<span class=w> </span>install<span class=w> </span>cert-manager<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span>-p<span class=w> </span>cert-manager.tanzu.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span>-n<span class=w> </span>cert-manager<span class=w> </span><span class=se>\</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span>-v<span class=w> </span><span class=m>1</span>.12.2+vmware.1-tkg.1
</span></code></pre></div> <h3 id=run-profile-install>Run Profile Install<a class=headerlink href=#run-profile-install title="Permanent link">&para;</a></h3> <ul> <li><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/prerequisites.html#resource-requirements-5>https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/prerequisites.html#resource-requirements-5</a></li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=o>=</span>registry.tanzu.vmware.com
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REPO</span><span class=o>=</span>tanzu-application-platform
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_USERNAME</span><span class=o>=</span>joostvdg@gmail.com
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_PASSWORD</span><span class=o>=</span><span class=s1>&#39;Lm-T*6hULZ2UWJPm.DNL&#39;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=nb>export</span><span class=w> </span><span class=nv>MY_REGISTRY_HOSTNAME</span><span class=o>=</span>https://index.docker.io/v1/~
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=nb>export</span><span class=w> </span><span class=nv>MY_REGISTRY_PASSWORD</span><span class=o>=</span>dckr_pat_b6cccjpngtrvB_RH59Qje7TZnfo
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=nb>export</span><span class=w> </span><span class=nv>MY_REGISTRY_USERNAME</span><span class=o>=</span>joostvdgtanzu
</span><span id=__span-8-8><a id=__codelineno-8-8 name=__codelineno-8-8 href=#__codelineno-8-8></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_PKGR_REPO</span><span class=o>=</span>registry.tanzu.vmware.com/tanzu-application-platform/tap-packages
</span><span id=__span-8-9><a id=__codelineno-8-9 name=__codelineno-8-9 href=#__codelineno-8-9></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_VERSION</span><span class=o>=</span><span class=m>1</span>.7.1
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a>kubectl<span class=w> </span>create<span class=w> </span>ns<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a>tanzu<span class=w> </span>secret<span class=w> </span>registry<span class=w> </span>add<span class=w> </span>tap-registry<span class=w> </span><span class=se>\</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span>--username<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_USERNAME</span><span class=si>}</span><span class=w> </span>--password<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_PASSWORD</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span>--server<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span>--export-to-all-namespaces<span class=w> </span>--yes<span class=w> </span>--namespace<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a>tanzu<span class=w> </span>secret<span class=w> </span>registry<span class=w> </span>add<span class=w> </span>registry-credentials<span class=w> </span><span class=se>\</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>    </span>--server<span class=w>   </span><span class=si>${</span><span class=nv>MY_REGISTRY_HOSTNAME</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>    </span>--username<span class=w> </span><span class=si>${</span><span class=nv>MY_REGISTRY_USERNAME</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>    </span>--password<span class=w> </span><span class=si>${</span><span class=nv>MY_REGISTRY_PASSWORD</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>    </span>--namespace<span class=w> </span>tap-install<span class=w> </span><span class=se>\</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=w>    </span>--export-to-all-namespaces<span class=w> </span><span class=se>\</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a><span class=w>    </span>--yes
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>add<span class=w> </span>tanzu-tap-repository<span class=w> </span><span class=se>\</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=w>  </span>--url<span class=w> </span><span class=si>${</span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=si>}</span>/<span class=si>${</span><span class=nv>INSTALL_REPO</span><span class=si>}</span>/tap-packages:<span class=nv>$TAP_VERSION</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=w>  </span>--namespace<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>get<span class=w> </span>tanzu-tap-repository<span class=w> </span>--namespace<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>list<span class=w> </span>--namespace<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a>tanzu<span class=w> </span>package<span class=w> </span>install<span class=w> </span>tap<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a><span class=w>  </span>-p<span class=w> </span>tap.tanzu.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=w>  </span>-v<span class=w> </span><span class=nv>$TAP_VERSION</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span>--values-file<span class=w> </span>tap-profile-full-170.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>  </span>-n<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-yaml highlight"><span class=filename>tap-profile-full-170.yaml</span><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=nt>shared</span><span class=p>:</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=nt>ingress_domain</span><span class=p>:</span><span class=w> </span><span class=s>&quot;tap02.h2o-2-19271.h2o.vmware.com&quot;</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span><span class=nt>image_registry</span><span class=p>:</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=nt>project_path</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry.tanzu.vmware.com/tanzu-application-platform/tap-packages</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=nt>secret</span><span class=p>:</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-registry</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>      </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-install</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>  </span><span class=nt>kubernetes_version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;1.26.5&quot;</span><span class=w> </span><span class=c1># Required regardless of distribution when Kubernetes version is 1.25 or later.</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=nt>ceip_policy_disclosed</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class=w> </span><span class=c1># Installation fails if this is not set to true. Not a string.</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=nt>profile</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">run</span><span class=w> </span><span class=c1># Can take iterate, build, run, view.</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=nt>supply_chain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">basic</span><span class=w> </span><span class=c1># Can take testing, testing_scanning.</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=nt>contour</span><span class=p>:</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=w>  </span><span class=nt>envoy</span><span class=p>:</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=w>    </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span><span class=w> </span><span class=c1># This is set by default, but can be overridden by setting a different value.</span>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=nt>appliveview_connector</span><span class=p>:</span>
</span><span id=__span-16-22><a id=__codelineno-16-22 name=__codelineno-16-22 href=#__codelineno-16-22></a><span class=w>  </span><span class=nt>backend</span><span class=p>:</span>
</span><span id=__span-16-23><a id=__codelineno-16-23 name=__codelineno-16-23 href=#__codelineno-16-23></a><span class=w>    </span><span class=nt>sslDeactivated</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-16-24><a id=__codelineno-16-24 name=__codelineno-16-24 href=#__codelineno-16-24></a><span class=w>    </span><span class=nt>ingressEnabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-16-25><a id=__codelineno-16-25 name=__codelineno-16-25 href=#__codelineno-16-25></a><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">appliveview.tap01.h2o-2-19271.h2o.vmware.com</span>
</span></code></pre></div> <h4 id=example-from-docs>Example From Docs<a class=headerlink href=#example-from-docs title="Permanent link">&para;</a></h4> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=nt>profile</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">run</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a><span class=nt>ceip_policy_disclosed</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">FALSE-OR-TRUE-VALUE</span><span class=w> </span><span class=c1># Installation fails if this is not set to true. Not a string.</span>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=nt>shared</span><span class=p>:</span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>  </span><span class=nt>ingress_domain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">INGRESS-DOMAIN</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>  </span><span class=nt>kubernetes_distribution</span><span class=p>:</span><span class=w> </span><span class=s>&quot;openshift&quot;</span><span class=w> </span><span class=c1># To be passed only for Openshift. Defaults to &quot;&quot;.</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>  </span><span class=nt>kubernetes_version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;K8S-VERSION&quot;</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>  </span><span class=nt>ca_cert_data</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span><span class=w> </span><span class=c1># To be passed if using custom certificates.</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>    </span><span class=no>-----BEGIN CERTIFICATE-----</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>    </span><span class=no>MIIFXzCCA0egAwIBAgIJAJYm37SFocjlMA0GCSqGSIb3DQEBDQUAMEY...</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w>    </span><span class=no>-----END CERTIFICATE-----</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=nt>supply_chain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">basic</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a><span class=nt>contour</span><span class=p>:</span>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=w>  </span><span class=nt>envoy</span><span class=p>:</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=w>    </span><span class=nt>service</span><span class=p>:</span>
</span><span id=__span-17-17><a id=__codelineno-17-17 name=__codelineno-17-17 href=#__codelineno-17-17></a><span class=w>      </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">LoadBalancer</span><span class=w> </span><span class=c1># NodePort can be used if your Kubernetes cluster doesn&#39;t support LoadBalancing.</span>
</span><span id=__span-17-18><a id=__codelineno-17-18 name=__codelineno-17-18 href=#__codelineno-17-18></a>
</span><span id=__span-17-19><a id=__codelineno-17-19 name=__codelineno-17-19 href=#__codelineno-17-19></a><span class=nt>appliveview_connector</span><span class=p>:</span>
</span><span id=__span-17-20><a id=__codelineno-17-20 name=__codelineno-17-20 href=#__codelineno-17-20></a><span class=w>  </span><span class=nt>backend</span><span class=p>:</span>
</span><span id=__span-17-21><a id=__codelineno-17-21 name=__codelineno-17-21 href=#__codelineno-17-21></a><span class=w>    </span><span class=nt>sslDeactivated</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TRUE-OR-FALSE-VALUE</span>
</span><span id=__span-17-22><a id=__codelineno-17-22 name=__codelineno-17-22 href=#__codelineno-17-22></a><span class=w>    </span><span class=nt>ingressEnabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-17-23><a id=__codelineno-17-23 name=__codelineno-17-23 href=#__codelineno-17-23></a><span class=w>    </span><span class=nt>host</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">appliveview.VIEW-CLUSTER-INGRESS-DOMAIN</span>
</span><span id=__span-17-24><a id=__codelineno-17-24 name=__codelineno-17-24 href=#__codelineno-17-24></a>
</span><span id=__span-17-25><a id=__codelineno-17-25 name=__codelineno-17-25 href=#__codelineno-17-25></a><span class=nt>tap_telemetry</span><span class=p>:</span>
</span><span id=__span-17-26><a id=__codelineno-17-26 name=__codelineno-17-26 href=#__codelineno-17-26></a><span class=w>  </span><span class=nt>customer_entitlement_account_number</span><span class=p>:</span><span class=w> </span><span class=s>&quot;CUSTOMER-ENTITLEMENT-ACCOUNT-NUMBER&quot;</span><span class=w> </span><span class=c1># (Optional) Identify data for creating Tanzu Application Platform usage reports.</span>
</span><span id=__span-17-27><a id=__codelineno-17-27 name=__codelineno-17-27 href=#__codelineno-17-27></a>
</span><span id=__span-17-28><a id=__codelineno-17-28 name=__codelineno-17-28 href=#__codelineno-17-28></a><span class=nt>amr</span><span class=p>:</span>
</span><span id=__span-17-29><a id=__codelineno-17-29 name=__codelineno-17-29 href=#__codelineno-17-29></a><span class=w>  </span><span class=nt>observer</span><span class=p>:</span>
</span><span id=__span-17-30><a id=__codelineno-17-30 name=__codelineno-17-30 href=#__codelineno-17-30></a><span class=w>    </span><span class=nt>auth</span><span class=p>:</span>
</span><span id=__span-17-31><a id=__codelineno-17-31 name=__codelineno-17-31 href=#__codelineno-17-31></a><span class=w>      </span><span class=nt>kubernetes_service_accounts</span><span class=p>:</span>
</span><span id=__span-17-32><a id=__codelineno-17-32 name=__codelineno-17-32 href=#__codelineno-17-32></a><span class=w>        </span><span class=nt>enable</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-17-33><a id=__codelineno-17-33 name=__codelineno-17-33 href=#__codelineno-17-33></a><span class=w>    </span><span class=nt>cloudevent_handler</span><span class=p>:</span>
</span><span id=__span-17-34><a id=__codelineno-17-34 name=__codelineno-17-34 href=#__codelineno-17-34></a><span class=w>      </span><span class=nt>endpoint</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">https://amr-cloudevent-handler.VIEW-CLUSTER-INGRESS-DOMAIN</span><span class=w> </span><span class=c1># AMR CloudEvent Handler location at the View profile cluster.</span>
</span><span id=__span-17-35><a id=__codelineno-17-35 name=__codelineno-17-35 href=#__codelineno-17-35></a><span class=w>    </span><span class=nt>ca_cert_data</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-17-36><a id=__codelineno-17-36 name=__codelineno-17-36 href=#__codelineno-17-36></a><span class=w>        </span><span class=no>&quot;AMR-CLOUDEVENT-HANDLER-CA&quot; </span>
</span></code></pre></div> <h3 id=minio-helm-chart>MinIO Helm Chart<a class=headerlink href=#minio-helm-chart title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>tls<span class=w> </span>kearos-ca<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>   </span>--key<span class=w> </span>certs/ca-key.pem<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>   </span>--cert<span class=w> </span>certs/ca.pem<span class=w> </span><span class=se>\</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>   </span>-n<span class=w> </span>cert-manager
</span></code></pre></div> <div class="language-yaml highlight"><span class=filename>kearos-cluster-issuer.yaml</span><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterIssuer</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kearos-issuer</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>  </span><span class=nt>ca</span><span class=p>:</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>    </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kearos-ca</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>kearos-cluster-issuer.yaml
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a>kubectl<span class=w> </span>get<span class=w> </span>ClusterIssuer
</span></code></pre></div> <div class="language-yaml highlight"><span class=filename>minio-values.yaml</span><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=nt>global</span><span class=p>:</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a><span class=w>  </span><span class=nt>storageClass</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vc01cl01-t0compute-latebinding</span>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=nt>auth</span><span class=p>:</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span><span class=nt>rootPassword</span><span class=p>:</span><span class=w> </span><span class=s>&#39;VMware123!&#39;</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a>helm<span class=w> </span>repo<span class=w> </span>update
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a>kubectl<span class=w> </span>create<span class=w> </span>namespace<span class=w> </span>minio
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span><span class=se>\</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a><span class=w>  </span>minio<span class=w> </span>bitnami/minio<span class=w> </span><span class=se>\</span>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=w>  </span>--version<span class=w> </span><span class=m>12</span>.10.1<span class=w> </span><span class=se>\</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>  </span>--namespace<span class=w> </span>minio<span class=w> </span><span class=se>\</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=w>  </span>--values<span class=w> </span>minio-values.yaml
</span></code></pre></div> <h2 id=yaml-titleminio-httpproxyyaml>```yaml title="minio-httpproxy.yaml<a class=headerlink href=#yaml-titleminio-httpproxyyaml title="Permanent link">&para;</a></h2> <p>apiVersion: cert-manager.io/v1 kind: Certificate metadata: name: minio namespace: minio spec: secretName: minio-tls issuerRef: name: kearos-issuer kind: "ClusterIssuer" commonName: minio.h2o-2-19271.h2o.vmware.com dnsNames: - minio.h2o-2-19271.h2o.vmware.com - minio-console.h2o-2-19271.h2o.vmware.com</p> <hr> <p>apiVersion: projectcontour.io/v1 kind: HTTPProxy metadata: name: minio-insecure namespace: minio spec: ingressClassName: contour virtualhost: fqdn: minio.h2o-2-19271.h2o.vmware.com routes: - services: - name: minio port: 9000</p> <hr> <p>apiVersion: projectcontour.io/v1 kind: HTTPProxy metadata: name: minio-api namespace: minio spec: ingressClassName: contour virtualhost: fqdn: minio-console.h2o-2-19271.h2o.vmware.com tls: secretName: minio-tls routes: - services: - name: minio port: 9001 <div class="language-text highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a>#### TechDocs
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a>```sh
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a>export AWS_ACCESS_KEY_ID=BdPJSbbKN3FvaBxEq4ub
</span><span id=__span-26-5><a id=__codelineno-26-5 name=__codelineno-26-5 href=#__codelineno-26-5></a>export AWS_SECRET_ACCESS_KEY=WwNJpwH4oDr27UlpJl9xcIeYsVStIz7U7S0iYYc1
</span><span id=__span-26-6><a id=__codelineno-26-6 name=__codelineno-26-6 href=#__codelineno-26-6></a>export AWS_REGION=us-east-1
</span></code></pre></div></p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a>mc<span class=w> </span><span class=nb>alias</span><span class=w> </span><span class=nb>set</span><span class=w> </span>minio_h20<span class=w> </span>https://<span class=nv>$MINIO_HOSTNAME</span><span class=w> </span>admin<span class=w> </span><span class=s1>&#39;VMware123!&#39;</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a>mc<span class=w> </span>mb<span class=w> </span>--ignore-existing<span class=w> </span>minio_h20/techdocs
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>mc<span class=w> </span>mb<span class=w> </span>--ignore-existing<span class=w> </span>minio_h20/docs
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a>mc<span class=w> </span>ls<span class=w> </span>minio_h20/
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:11:03<span class=w> </span>CET<span class=o>]</span><span class=w>     </span>0B<span class=w> </span>docs/
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:11:07<span class=w> </span>CET<span class=o>]</span><span class=w>     </span>0B<span class=w> </span>techdocs/
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a>npx<span class=w> </span>@techdocs/cli<span class=w> </span>publish<span class=w> </span>--publisher-type<span class=w> </span>awsS3<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span>--awsEndpoint<span class=w> </span>https://minio.h2o-2-19271.h2o.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>  </span>--storage-name<span class=w> </span>docs<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>  </span>--entity<span class=w> </span>default/Component/spring-boot-postgres<span class=w> </span><span class=se>\</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>  </span>--awsS3ForcePathStyle
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a>mc<span class=w> </span>ls<span class=w> </span>minio_h20/docs/default/component/spring-boot-postgres/
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:17<span class=w> </span>CET<span class=o>]</span><span class=w>  </span>15KiB<span class=w> </span>STANDARD<span class=w> </span><span class=m>404</span>.html
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:18<span class=w> </span>CET<span class=o>]</span><span class=w>  </span>21KiB<span class=w> </span>STANDARD<span class=w> </span>index.html
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:18<span class=w> </span>CET<span class=o>]</span><span class=w>   </span>277B<span class=w> </span>STANDARD<span class=w> </span>sitemap.xml
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:18<span class=w> </span>CET<span class=o>]</span><span class=w>   </span>217B<span class=w> </span>STANDARD<span class=w> </span>sitemap.xml.gz
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:18<span class=w> </span>CET<span class=o>]</span><span class=w> </span><span class=m>2</span>.0KiB<span class=w> </span>STANDARD<span class=w> </span>techdocs_metadata.json
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:51<span class=w> </span>CET<span class=o>]</span><span class=w>     </span>0B<span class=w> </span>assets/
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=o>[</span><span class=m>2023</span>-11-28<span class=w> </span><span class=m>16</span>:14:51<span class=w> </span>CET<span class=o>]</span><span class=w>     </span>0B<span class=w> </span>search/
</span></code></pre></div> <h3 id=harbor>Harbor<a class=headerlink href=#harbor title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>add<span class=w> </span>tanzu-standard<span class=w> </span>--url<span class=w> </span>projects.registry.vmware.com/tkg/packages/standard/repo:v2023.7.13<span class=w> </span>--namespace<span class=w> </span>tkg-system
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>kapp-rbac-tanzu-packages.yaml
</span></code></pre></div> <p>Create <code>harbor-package-install.yaml</code></p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>harbor-package-install.yaml
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a>kubectl<span class=w> </span>get<span class=w> </span>pkgi<span class=w> </span>-n<span class=w> </span>tanzu-packages
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a>kubectl<span class=w> </span>get<span class=w> </span>app<span class=w> </span>-n<span class=w> </span>tanzu-packages
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a>kubectl<span class=w> </span>get<span class=w> </span>po,httpproxy<span class=w> </span>-n<span class=w> </span>tanzu-system-registry
</span></code></pre></div> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-40-1><a id=__codelineno-40-1 name=__codelineno-40-1 href=#__codelineno-40-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-40-2><a id=__codelineno-40-2 name=__codelineno-40-2 href=#__codelineno-40-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span>
</span><span id=__span-40-3><a id=__codelineno-40-3 name=__codelineno-40-3 href=#__codelineno-40-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-4><a id=__codelineno-40-4 name=__codelineno-40-4 href=#__codelineno-40-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-system-registry</span>
</span><span id=__span-40-5><a id=__codelineno-40-5 name=__codelineno-40-5 href=#__codelineno-40-5></a><span class=nn>---</span>
</span><span id=__span-40-6><a id=__codelineno-40-6 name=__codelineno-40-6 href=#__codelineno-40-6></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-40-7><a id=__codelineno-40-7 name=__codelineno-40-7 href=#__codelineno-40-7></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span>
</span><span id=__span-40-8><a id=__codelineno-40-8 name=__codelineno-40-8 href=#__codelineno-40-8></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-9><a id=__codelineno-40-9 name=__codelineno-40-9 href=#__codelineno-40-9></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-packages</span>
</span><span id=__span-40-10><a id=__codelineno-40-10 name=__codelineno-40-10 href=#__codelineno-40-10></a><span class=nn>---</span>
</span><span id=__span-40-11><a id=__codelineno-40-11 name=__codelineno-40-11 href=#__codelineno-40-11></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
</span><span id=__span-40-12><a id=__codelineno-40-12 name=__codelineno-40-12 href=#__codelineno-40-12></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id=__span-40-13><a id=__codelineno-40-13 name=__codelineno-40-13 href=#__codelineno-40-13></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-14><a id=__codelineno-40-14 name=__codelineno-40-14 href=#__codelineno-40-14></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-role</span>
</span><span id=__span-40-15><a id=__codelineno-40-15 name=__codelineno-40-15 href=#__codelineno-40-15></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-system-registry</span>
</span><span id=__span-40-16><a id=__codelineno-40-16 name=__codelineno-40-16 href=#__codelineno-40-16></a><span class=nt>rules</span><span class=p>:</span>
</span><span id=__span-40-17><a id=__codelineno-40-17 name=__codelineno-40-17 href=#__codelineno-40-17></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-18><a id=__codelineno-40-18 name=__codelineno-40-18 href=#__codelineno-40-18></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;configmaps&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;services&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;secrets&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;pods&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;serviceaccounts&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;persistentvolumeclaims&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;persistentvolumes&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-19><a id=__codelineno-40-19 name=__codelineno-40-19 href=#__codelineno-40-19></a><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-20><a id=__codelineno-40-20 name=__codelineno-40-20 href=#__codelineno-40-20></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;apps&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-21><a id=__codelineno-40-21 name=__codelineno-40-21 href=#__codelineno-40-21></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;deployments&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;replicasets&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;daemonsets&quot;</span><span class="p p-Indicator">,</span><span class=w> </span><span class=s>&quot;statefulsets&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-22><a id=__codelineno-40-22 name=__codelineno-40-22 href=#__codelineno-40-22></a><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-23><a id=__codelineno-40-23 name=__codelineno-40-23 href=#__codelineno-40-23></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;cert-manager.io&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-24><a id=__codelineno-40-24 name=__codelineno-40-24 href=#__codelineno-40-24></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-25><a id=__codelineno-40-25 name=__codelineno-40-25 href=#__codelineno-40-25></a><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-26><a id=__codelineno-40-26 name=__codelineno-40-26 href=#__codelineno-40-26></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;projectcontour.io&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-27><a id=__codelineno-40-27 name=__codelineno-40-27 href=#__codelineno-40-27></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-28><a id=__codelineno-40-28 name=__codelineno-40-28 href=#__codelineno-40-28></a><span class=w>  </span><span class=nt>verbs</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">[</span><span class=s>&quot;*&quot;</span><span class="p p-Indicator">]</span>
</span><span id=__span-40-29><a id=__codelineno-40-29 name=__codelineno-40-29 href=#__codelineno-40-29></a><span class=nn>---</span>
</span><span id=__span-40-30><a id=__codelineno-40-30 name=__codelineno-40-30 href=#__codelineno-40-30></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">RoleBinding</span>
</span><span id=__span-40-31><a id=__codelineno-40-31 name=__codelineno-40-31 href=#__codelineno-40-31></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id=__span-40-32><a id=__codelineno-40-32 name=__codelineno-40-32 href=#__codelineno-40-32></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-33><a id=__codelineno-40-33 name=__codelineno-40-33 href=#__codelineno-40-33></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-role-binding</span>
</span><span id=__span-40-34><a id=__codelineno-40-34 name=__codelineno-40-34 href=#__codelineno-40-34></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-system-registry</span>
</span><span id=__span-40-35><a id=__codelineno-40-35 name=__codelineno-40-35 href=#__codelineno-40-35></a><span class=nt>subjects</span><span class=p>:</span>
</span><span id=__span-40-36><a id=__codelineno-40-36 name=__codelineno-40-36 href=#__codelineno-40-36></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id=__span-40-37><a id=__codelineno-40-37 name=__codelineno-40-37 href=#__codelineno-40-37></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-sa</span>
</span><span id=__span-40-38><a id=__codelineno-40-38 name=__codelineno-40-38 href=#__codelineno-40-38></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-packages</span>
</span><span id=__span-40-39><a id=__codelineno-40-39 name=__codelineno-40-39 href=#__codelineno-40-39></a><span class=nt>roleRef</span><span class=p>:</span>
</span><span id=__span-40-40><a id=__codelineno-40-40 name=__codelineno-40-40 href=#__codelineno-40-40></a><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</span><span id=__span-40-41><a id=__codelineno-40-41 name=__codelineno-40-41 href=#__codelineno-40-41></a><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Role</span>
</span><span id=__span-40-42><a id=__codelineno-40-42 name=__codelineno-40-42 href=#__codelineno-40-42></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-role</span>
</span><span id=__span-40-43><a id=__codelineno-40-43 name=__codelineno-40-43 href=#__codelineno-40-43></a><span class=nn>---</span>
</span><span id=__span-40-44><a id=__codelineno-40-44 name=__codelineno-40-44 href=#__codelineno-40-44></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
</span><span id=__span-40-45><a id=__codelineno-40-45 name=__codelineno-40-45 href=#__codelineno-40-45></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Certificate</span>
</span><span id=__span-40-46><a id=__codelineno-40-46 name=__codelineno-40-46 href=#__codelineno-40-46></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-47><a id=__codelineno-40-47 name=__codelineno-40-47 href=#__codelineno-40-47></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor</span>
</span><span id=__span-40-48><a id=__codelineno-40-48 name=__codelineno-40-48 href=#__codelineno-40-48></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-system-registry</span>
</span><span id=__span-40-49><a id=__codelineno-40-49 name=__codelineno-40-49 href=#__codelineno-40-49></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-40-50><a id=__codelineno-40-50 name=__codelineno-40-50 href=#__codelineno-40-50></a><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor-tls</span>
</span><span id=__span-40-51><a id=__codelineno-40-51 name=__codelineno-40-51 href=#__codelineno-40-51></a><span class=w>  </span><span class=nt>issuerRef</span><span class=p>:</span>
</span><span id=__span-40-52><a id=__codelineno-40-52 name=__codelineno-40-52 href=#__codelineno-40-52></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kearos-issuer</span>
</span><span id=__span-40-53><a id=__codelineno-40-53 name=__codelineno-40-53 href=#__codelineno-40-53></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s>&quot;ClusterIssuer&quot;</span>
</span><span id=__span-40-54><a id=__codelineno-40-54 name=__codelineno-40-54 href=#__codelineno-40-54></a><span class=w>  </span><span class=nt>commonName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-40-55><a id=__codelineno-40-55 name=__codelineno-40-55 href=#__codelineno-40-55></a><span class=w>  </span><span class=nt>dnsNames</span><span class=p>:</span>
</span><span id=__span-40-56><a id=__codelineno-40-56 name=__codelineno-40-56 href=#__codelineno-40-56></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-40-57><a id=__codelineno-40-57 name=__codelineno-40-57 href=#__codelineno-40-57></a><span class=nn>---</span>
</span><span id=__span-40-58><a id=__codelineno-40-58 name=__codelineno-40-58 href=#__codelineno-40-58></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-40-59><a id=__codelineno-40-59 name=__codelineno-40-59 href=#__codelineno-40-59></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id=__span-40-60><a id=__codelineno-40-60 name=__codelineno-40-60 href=#__codelineno-40-60></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-61><a id=__codelineno-40-61 name=__codelineno-40-61 href=#__codelineno-40-61></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor-values</span>
</span><span id=__span-40-62><a id=__codelineno-40-62 name=__codelineno-40-62 href=#__codelineno-40-62></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-packages</span>
</span><span id=__span-40-63><a id=__codelineno-40-63 name=__codelineno-40-63 href=#__codelineno-40-63></a><span class=nt>stringData</span><span class=p>:</span>
</span><span id=__span-40-64><a id=__codelineno-40-64 name=__codelineno-40-64 href=#__codelineno-40-64></a><span class=w>  </span><span class=nt>values.yml</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-40-65><a id=__codelineno-40-65 name=__codelineno-40-65 href=#__codelineno-40-65></a><span class=w>    </span><span class=no>tlsCertificateSecretName: harbor-tls</span>
</span><span id=__span-40-66><a id=__codelineno-40-66 name=__codelineno-40-66 href=#__codelineno-40-66></a><span class=w>    </span><span class=no>caBundleSecretName: harbor-tls</span>
</span><span id=__span-40-67><a id=__codelineno-40-67 name=__codelineno-40-67 href=#__codelineno-40-67></a><span class=w>    </span><span class=no>namespace: tanzu-system-registry</span>
</span><span id=__span-40-68><a id=__codelineno-40-68 name=__codelineno-40-68 href=#__codelineno-40-68></a><span class=w>    </span><span class=no>hostname: harbor.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-40-69><a id=__codelineno-40-69 name=__codelineno-40-69 href=#__codelineno-40-69></a><span class=w>    </span><span class=no>port:</span>
</span><span id=__span-40-70><a id=__codelineno-40-70 name=__codelineno-40-70 href=#__codelineno-40-70></a><span class=w>      </span><span class=no>https: 443</span>
</span><span id=__span-40-71><a id=__codelineno-40-71 name=__codelineno-40-71 href=#__codelineno-40-71></a><span class=w>    </span><span class=no>logLevel: info</span>
</span><span id=__span-40-72><a id=__codelineno-40-72 name=__codelineno-40-72 href=#__codelineno-40-72></a><span class=w>    </span><span class=no>enableContourHttpProxy: true</span>
</span><span id=__span-40-73><a id=__codelineno-40-73 name=__codelineno-40-73 href=#__codelineno-40-73></a><span class=w>    </span><span class=no>harborAdminPassword: VMware123!</span>
</span><span id=__span-40-74><a id=__codelineno-40-74 name=__codelineno-40-74 href=#__codelineno-40-74></a><span class=w>    </span><span class=no>secretKey: j0Kn0UlfSGzMTBx6</span>
</span><span id=__span-40-75><a id=__codelineno-40-75 name=__codelineno-40-75 href=#__codelineno-40-75></a><span class=w>    </span><span class=no>database:</span>
</span><span id=__span-40-76><a id=__codelineno-40-76 name=__codelineno-40-76 href=#__codelineno-40-76></a><span class=w>      </span><span class=no>password: 4Oj0848rTIvzJiMc</span>
</span><span id=__span-40-77><a id=__codelineno-40-77 name=__codelineno-40-77 href=#__codelineno-40-77></a><span class=w>    </span><span class=no>core:</span>
</span><span id=__span-40-78><a id=__codelineno-40-78 name=__codelineno-40-78 href=#__codelineno-40-78></a><span class=w>      </span><span class=no>replicas: 1</span>
</span><span id=__span-40-79><a id=__codelineno-40-79 name=__codelineno-40-79 href=#__codelineno-40-79></a><span class=w>      </span><span class=no>secret: vFib2c87qg1FFZqI</span>
</span><span id=__span-40-80><a id=__codelineno-40-80 name=__codelineno-40-80 href=#__codelineno-40-80></a><span class=w>      </span><span class=no>xsrfKey: sGn5nIgBQKdwx89tZLO5pTJAqbCwVRU8</span>
</span><span id=__span-40-81><a id=__codelineno-40-81 name=__codelineno-40-81 href=#__codelineno-40-81></a><span class=w>    </span><span class=no>jobservice:</span>
</span><span id=__span-40-82><a id=__codelineno-40-82 name=__codelineno-40-82 href=#__codelineno-40-82></a><span class=w>      </span><span class=no>replicas: 1</span>
</span><span id=__span-40-83><a id=__codelineno-40-83 name=__codelineno-40-83 href=#__codelineno-40-83></a><span class=w>      </span><span class=no>secret: vFib2c87qg1FFZqI</span>
</span><span id=__span-40-84><a id=__codelineno-40-84 name=__codelineno-40-84 href=#__codelineno-40-84></a><span class=w>    </span><span class=no>registry:</span>
</span><span id=__span-40-85><a id=__codelineno-40-85 name=__codelineno-40-85 href=#__codelineno-40-85></a><span class=w>      </span><span class=no>replicas: 1</span>
</span><span id=__span-40-86><a id=__codelineno-40-86 name=__codelineno-40-86 href=#__codelineno-40-86></a><span class=w>      </span><span class=no>secret: vFib2c87qg1FFZqI</span>
</span><span id=__span-40-87><a id=__codelineno-40-87 name=__codelineno-40-87 href=#__codelineno-40-87></a><span class=w>    </span><span class=no>notary:</span>
</span><span id=__span-40-88><a id=__codelineno-40-88 name=__codelineno-40-88 href=#__codelineno-40-88></a><span class=w>      </span><span class=no>enabled: true</span>
</span><span id=__span-40-89><a id=__codelineno-40-89 name=__codelineno-40-89 href=#__codelineno-40-89></a><span class=w>    </span><span class=no>trivy:</span>
</span><span id=__span-40-90><a id=__codelineno-40-90 name=__codelineno-40-90 href=#__codelineno-40-90></a><span class=w>      </span><span class=no>enabled: true</span>
</span><span id=__span-40-91><a id=__codelineno-40-91 name=__codelineno-40-91 href=#__codelineno-40-91></a><span class=w>      </span><span class=no>replicas: 1</span>
</span><span id=__span-40-92><a id=__codelineno-40-92 name=__codelineno-40-92 href=#__codelineno-40-92></a><span class=w>      </span><span class=no>gitHubToken: &quot;&quot;</span>
</span><span id=__span-40-93><a id=__codelineno-40-93 name=__codelineno-40-93 href=#__codelineno-40-93></a><span class=w>      </span><span class=no>skipUpdate: true</span>
</span><span id=__span-40-94><a id=__codelineno-40-94 name=__codelineno-40-94 href=#__codelineno-40-94></a><span class=w>    </span><span class=no>persistence:</span>
</span><span id=__span-40-95><a id=__codelineno-40-95 name=__codelineno-40-95 href=#__codelineno-40-95></a><span class=w>      </span><span class=no>persistentVolumeClaim:</span>
</span><span id=__span-40-96><a id=__codelineno-40-96 name=__codelineno-40-96 href=#__codelineno-40-96></a><span class=w>        </span><span class=no>registry:</span>
</span><span id=__span-40-97><a id=__codelineno-40-97 name=__codelineno-40-97 href=#__codelineno-40-97></a><span class=w>          </span><span class=no>storageClass: vc01cl01-t0compute</span>
</span><span id=__span-40-98><a id=__codelineno-40-98 name=__codelineno-40-98 href=#__codelineno-40-98></a><span class=w>          </span><span class=no>accessMode: ReadWriteOnce</span>
</span><span id=__span-40-99><a id=__codelineno-40-99 name=__codelineno-40-99 href=#__codelineno-40-99></a><span class=w>          </span><span class=no>size: 100Gi</span>
</span><span id=__span-40-100><a id=__codelineno-40-100 name=__codelineno-40-100 href=#__codelineno-40-100></a><span class=w>        </span><span class=no>jobservice:</span>
</span><span id=__span-40-101><a id=__codelineno-40-101 name=__codelineno-40-101 href=#__codelineno-40-101></a><span class=w>          </span><span class=no>jobLog:</span>
</span><span id=__span-40-102><a id=__codelineno-40-102 name=__codelineno-40-102 href=#__codelineno-40-102></a><span class=w>            </span><span class=no>storageClass: vc01cl01-t0compute</span>
</span><span id=__span-40-103><a id=__codelineno-40-103 name=__codelineno-40-103 href=#__codelineno-40-103></a><span class=w>            </span><span class=no>accessMode: ReadWriteOnce</span>
</span><span id=__span-40-104><a id=__codelineno-40-104 name=__codelineno-40-104 href=#__codelineno-40-104></a><span class=w>            </span><span class=no>size: 10Gi</span>
</span><span id=__span-40-105><a id=__codelineno-40-105 name=__codelineno-40-105 href=#__codelineno-40-105></a><span class=w>        </span><span class=no>database:</span>
</span><span id=__span-40-106><a id=__codelineno-40-106 name=__codelineno-40-106 href=#__codelineno-40-106></a><span class=w>          </span><span class=no>storageClass: vc01cl01-t0compute</span>
</span><span id=__span-40-107><a id=__codelineno-40-107 name=__codelineno-40-107 href=#__codelineno-40-107></a><span class=w>          </span><span class=no>accessMode: ReadWriteOnce</span>
</span><span id=__span-40-108><a id=__codelineno-40-108 name=__codelineno-40-108 href=#__codelineno-40-108></a><span class=w>          </span><span class=no>size: 10Gi</span>
</span><span id=__span-40-109><a id=__codelineno-40-109 name=__codelineno-40-109 href=#__codelineno-40-109></a><span class=w>        </span><span class=no>redis:</span>
</span><span id=__span-40-110><a id=__codelineno-40-110 name=__codelineno-40-110 href=#__codelineno-40-110></a><span class=w>          </span><span class=no>storageClass: vc01cl01-t0compute</span>
</span><span id=__span-40-111><a id=__codelineno-40-111 name=__codelineno-40-111 href=#__codelineno-40-111></a><span class=w>          </span><span class=no>accessMode: ReadWriteOnce</span>
</span><span id=__span-40-112><a id=__codelineno-40-112 name=__codelineno-40-112 href=#__codelineno-40-112></a><span class=w>          </span><span class=no>size: 5Gi</span>
</span><span id=__span-40-113><a id=__codelineno-40-113 name=__codelineno-40-113 href=#__codelineno-40-113></a><span class=w>        </span><span class=no>trivy:</span>
</span><span id=__span-40-114><a id=__codelineno-40-114 name=__codelineno-40-114 href=#__codelineno-40-114></a><span class=w>          </span><span class=no>storageClass: vc01cl01-t0compute</span>
</span><span id=__span-40-115><a id=__codelineno-40-115 name=__codelineno-40-115 href=#__codelineno-40-115></a><span class=w>          </span><span class=no>accessMode: ReadWriteOnce</span>
</span><span id=__span-40-116><a id=__codelineno-40-116 name=__codelineno-40-116 href=#__codelineno-40-116></a><span class=w>          </span><span class=no>size: 10Gi</span>
</span><span id=__span-40-117><a id=__codelineno-40-117 name=__codelineno-40-117 href=#__codelineno-40-117></a><span class=w>      </span><span class=no>imageChartStorage:</span>
</span><span id=__span-40-118><a id=__codelineno-40-118 name=__codelineno-40-118 href=#__codelineno-40-118></a><span class=w>        </span><span class=no>disableredirect: false</span>
</span><span id=__span-40-119><a id=__codelineno-40-119 name=__codelineno-40-119 href=#__codelineno-40-119></a><span class=w>        </span><span class=no>type: filesystem</span>
</span><span id=__span-40-120><a id=__codelineno-40-120 name=__codelineno-40-120 href=#__codelineno-40-120></a><span class=w>        </span><span class=no>filesystem:</span>
</span><span id=__span-40-121><a id=__codelineno-40-121 name=__codelineno-40-121 href=#__codelineno-40-121></a><span class=w>          </span><span class=no>rootdirectory: /storage</span>
</span><span id=__span-40-122><a id=__codelineno-40-122 name=__codelineno-40-122 href=#__codelineno-40-122></a><span class=w>    </span><span class=no>pspNames: vmware-system-privileged</span>
</span><span id=__span-40-123><a id=__codelineno-40-123 name=__codelineno-40-123 href=#__codelineno-40-123></a><span class=w>    </span><span class=no>metrics:</span>
</span><span id=__span-40-124><a id=__codelineno-40-124 name=__codelineno-40-124 href=#__codelineno-40-124></a><span class=w>      </span><span class=no>enabled: false</span>
</span><span id=__span-40-125><a id=__codelineno-40-125 name=__codelineno-40-125 href=#__codelineno-40-125></a><span class=w>      </span><span class=no>core:</span>
</span><span id=__span-40-126><a id=__codelineno-40-126 name=__codelineno-40-126 href=#__codelineno-40-126></a><span class=w>        </span><span class=no>path: /metrics</span>
</span><span id=__span-40-127><a id=__codelineno-40-127 name=__codelineno-40-127 href=#__codelineno-40-127></a><span class=w>        </span><span class=no>port: 8001</span>
</span><span id=__span-40-128><a id=__codelineno-40-128 name=__codelineno-40-128 href=#__codelineno-40-128></a><span class=w>      </span><span class=no>registry:</span>
</span><span id=__span-40-129><a id=__codelineno-40-129 name=__codelineno-40-129 href=#__codelineno-40-129></a><span class=w>        </span><span class=no>path: /metrics</span>
</span><span id=__span-40-130><a id=__codelineno-40-130 name=__codelineno-40-130 href=#__codelineno-40-130></a><span class=w>        </span><span class=no>port: 8001</span>
</span><span id=__span-40-131><a id=__codelineno-40-131 name=__codelineno-40-131 href=#__codelineno-40-131></a><span class=w>      </span><span class=no>jobservice:</span>
</span><span id=__span-40-132><a id=__codelineno-40-132 name=__codelineno-40-132 href=#__codelineno-40-132></a><span class=w>        </span><span class=no>path: /metrics</span>
</span><span id=__span-40-133><a id=__codelineno-40-133 name=__codelineno-40-133 href=#__codelineno-40-133></a><span class=w>        </span><span class=no>port: 8001</span>
</span><span id=__span-40-134><a id=__codelineno-40-134 name=__codelineno-40-134 href=#__codelineno-40-134></a><span class=w>      </span><span class=no>exporter:</span>
</span><span id=__span-40-135><a id=__codelineno-40-135 name=__codelineno-40-135 href=#__codelineno-40-135></a><span class=w>        </span><span class=no>path: /metrics</span>
</span><span id=__span-40-136><a id=__codelineno-40-136 name=__codelineno-40-136 href=#__codelineno-40-136></a><span class=w>        </span><span class=no>port: 8001</span>
</span><span id=__span-40-137><a id=__codelineno-40-137 name=__codelineno-40-137 href=#__codelineno-40-137></a><span class=w>    </span><span class=no>network:</span>
</span><span id=__span-40-138><a id=__codelineno-40-138 name=__codelineno-40-138 href=#__codelineno-40-138></a><span class=w>      </span><span class=no>ipFamilies: [&quot;IPv4&quot;, &quot;IPv6&quot;]</span>
</span><span id=__span-40-139><a id=__codelineno-40-139 name=__codelineno-40-139 href=#__codelineno-40-139></a>
</span><span id=__span-40-140><a id=__codelineno-40-140 name=__codelineno-40-140 href=#__codelineno-40-140></a><span class=nn>---</span>
</span><span id=__span-40-141><a id=__codelineno-40-141 name=__codelineno-40-141 href=#__codelineno-40-141></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">packaging.carvel.dev/v1alpha1</span>
</span><span id=__span-40-142><a id=__codelineno-40-142 name=__codelineno-40-142 href=#__codelineno-40-142></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">PackageInstall</span>
</span><span id=__span-40-143><a id=__codelineno-40-143 name=__codelineno-40-143 href=#__codelineno-40-143></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-40-144><a id=__codelineno-40-144 name=__codelineno-40-144 href=#__codelineno-40-144></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor</span>
</span><span id=__span-40-145><a id=__codelineno-40-145 name=__codelineno-40-145 href=#__codelineno-40-145></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tanzu-packages</span>
</span><span id=__span-40-146><a id=__codelineno-40-146 name=__codelineno-40-146 href=#__codelineno-40-146></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-40-147><a id=__codelineno-40-147 name=__codelineno-40-147 href=#__codelineno-40-147></a><span class=w>  </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-sa</span>
</span><span id=__span-40-148><a id=__codelineno-40-148 name=__codelineno-40-148 href=#__codelineno-40-148></a><span class=w>  </span><span class=nt>packageRef</span><span class=p>:</span>
</span><span id=__span-40-149><a id=__codelineno-40-149 name=__codelineno-40-149 href=#__codelineno-40-149></a><span class=w>    </span><span class=nt>refName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tanzu.vmware.com</span>
</span><span id=__span-40-150><a id=__codelineno-40-150 name=__codelineno-40-150 href=#__codelineno-40-150></a><span class=w>    </span><span class=nt>versionSelection</span><span class=p>:</span>
</span><span id=__span-40-151><a id=__codelineno-40-151 name=__codelineno-40-151 href=#__codelineno-40-151></a><span class=w>      </span><span class=nt>constraints</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">2.8.4+vmware.1-tkg.1</span>
</span><span id=__span-40-152><a id=__codelineno-40-152 name=__codelineno-40-152 href=#__codelineno-40-152></a><span class=w>  </span><span class=nt>values</span><span class=p>:</span>
</span><span id=__span-40-153><a id=__codelineno-40-153 name=__codelineno-40-153 href=#__codelineno-40-153></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>secretRef</span><span class=p>:</span>
</span><span id=__span-40-154><a id=__codelineno-40-154 name=__codelineno-40-154 href=#__codelineno-40-154></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor-values</span>
</span><span id=__span-40-155><a id=__codelineno-40-155 name=__codelineno-40-155 href=#__codelineno-40-155></a><span class=w>      </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">values.yml</span>
</span></code></pre></div> <h3 id=gitlab>GitLab<a class=headerlink href=#gitlab title="Permanent link">&para;</a></h3> <p>Namespaces config:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-41-1><a id=__codelineno-41-1 name=__codelineno-41-1 href=#__codelineno-41-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-41-2><a id=__codelineno-41-2 name=__codelineno-41-2 href=#__codelineno-41-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span>
</span><span id=__span-41-3><a id=__codelineno-41-3 name=__codelineno-41-3 href=#__codelineno-41-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-41-4><a id=__codelineno-41-4 name=__codelineno-41-4 href=#__codelineno-41-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</span><span id=__span-41-5><a id=__codelineno-41-5 name=__codelineno-41-5 href=#__codelineno-41-5></a><span class=nn>---</span>
</span><span id=__span-41-6><a id=__codelineno-41-6 name=__codelineno-41-6 href=#__codelineno-41-6></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">cert-manager.io/v1</span>
</span><span id=__span-41-7><a id=__codelineno-41-7 name=__codelineno-41-7 href=#__codelineno-41-7></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Certificate</span>
</span><span id=__span-41-8><a id=__codelineno-41-8 name=__codelineno-41-8 href=#__codelineno-41-8></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-41-9><a id=__codelineno-41-9 name=__codelineno-41-9 href=#__codelineno-41-9></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</span><span id=__span-41-10><a id=__codelineno-41-10 name=__codelineno-41-10 href=#__codelineno-41-10></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</span><span id=__span-41-11><a id=__codelineno-41-11 name=__codelineno-41-11 href=#__codelineno-41-11></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-41-12><a id=__codelineno-41-12 name=__codelineno-41-12 href=#__codelineno-41-12></a><span class=w>  </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab-tls</span>
</span><span id=__span-41-13><a id=__codelineno-41-13 name=__codelineno-41-13 href=#__codelineno-41-13></a><span class=w>  </span><span class=nt>issuerRef</span><span class=p>:</span>
</span><span id=__span-41-14><a id=__codelineno-41-14 name=__codelineno-41-14 href=#__codelineno-41-14></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kearos-issuer</span>
</span><span id=__span-41-15><a id=__codelineno-41-15 name=__codelineno-41-15 href=#__codelineno-41-15></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class=s>&quot;ClusterIssuer&quot;</span>
</span><span id=__span-41-16><a id=__codelineno-41-16 name=__codelineno-41-16 href=#__codelineno-41-16></a><span class=w>  </span><span class=nt>commonName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-41-17><a id=__codelineno-41-17 name=__codelineno-41-17 href=#__codelineno-41-17></a><span class=w>  </span><span class=nt>dnsNames</span><span class=p>:</span>
</span><span id=__span-41-18><a id=__codelineno-41-18 name=__codelineno-41-18 href=#__codelineno-41-18></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-41-19><a id=__codelineno-41-19 name=__codelineno-41-19 href=#__codelineno-41-19></a><span class=nn>---</span>
</span><span id=__span-41-20><a id=__codelineno-41-20 name=__codelineno-41-20 href=#__codelineno-41-20></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">projectcontour.io/v1</span>
</span><span id=__span-41-21><a id=__codelineno-41-21 name=__codelineno-41-21 href=#__codelineno-41-21></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">HTTPProxy</span>
</span><span id=__span-41-22><a id=__codelineno-41-22 name=__codelineno-41-22 href=#__codelineno-41-22></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-41-23><a id=__codelineno-41-23 name=__codelineno-41-23 href=#__codelineno-41-23></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</span><span id=__span-41-24><a id=__codelineno-41-24 name=__codelineno-41-24 href=#__codelineno-41-24></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab</span>
</span><span id=__span-41-25><a id=__codelineno-41-25 name=__codelineno-41-25 href=#__codelineno-41-25></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-41-26><a id=__codelineno-41-26 name=__codelineno-41-26 href=#__codelineno-41-26></a><span class=w>  </span><span class=nt>ingressClassName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">contour</span>
</span><span id=__span-41-27><a id=__codelineno-41-27 name=__codelineno-41-27 href=#__codelineno-41-27></a><span class=w>  </span><span class=nt>virtualhost</span><span class=p>:</span>
</span><span id=__span-41-28><a id=__codelineno-41-28 name=__codelineno-41-28 href=#__codelineno-41-28></a><span class=w>    </span><span class=nt>fqdn</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-41-29><a id=__codelineno-41-29 name=__codelineno-41-29 href=#__codelineno-41-29></a><span class=w>    </span><span class=nt>tls</span><span class=p>:</span>
</span><span id=__span-41-30><a id=__codelineno-41-30 name=__codelineno-41-30 href=#__codelineno-41-30></a><span class=w>      </span><span class=nt>secretName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab-tls</span>
</span><span id=__span-41-31><a id=__codelineno-41-31 name=__codelineno-41-31 href=#__codelineno-41-31></a><span class=w>  </span><span class=nt>routes</span><span class=p>:</span>
</span><span id=__span-41-32><a id=__codelineno-41-32 name=__codelineno-41-32 href=#__codelineno-41-32></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>services</span><span class=p>:</span>
</span><span id=__span-41-33><a id=__codelineno-41-33 name=__codelineno-41-33 href=#__codelineno-41-33></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab-webservice-default</span>
</span><span id=__span-41-34><a id=__codelineno-41-34 name=__codelineno-41-34 href=#__codelineno-41-34></a><span class=w>      </span><span class=nt>port</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">8181</span>
</span><span id=__span-41-35><a id=__codelineno-41-35 name=__codelineno-41-35 href=#__codelineno-41-35></a><span class=w>    </span><span class=nt>enableWebsockets</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span><span id=__span-41-36><a id=__codelineno-41-36 name=__codelineno-41-36 href=#__codelineno-41-36></a><span class=w>    </span><span class=nt>permitInsecure</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-42-1><a id=__codelineno-42-1 name=__codelineno-42-1 href=#__codelineno-42-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>gitlab-namespace.yaml
</span></code></pre></div> <p>Values:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-43-1><a id=__codelineno-43-1 name=__codelineno-43-1 href=#__codelineno-43-1></a><span class=nt>global</span><span class=p>:</span>
</span><span id=__span-43-2><a id=__codelineno-43-2 name=__codelineno-43-2 href=#__codelineno-43-2></a><span class=w>  </span><span class=nt>edition</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ce</span>
</span><span id=__span-43-3><a id=__codelineno-43-3 name=__codelineno-43-3 href=#__codelineno-43-3></a><span class=w>  </span><span class=nt>hosts</span><span class=p>:</span>
</span><span id=__span-43-4><a id=__codelineno-43-4 name=__codelineno-43-4 href=#__codelineno-43-4></a><span class=w>    </span><span class=nt>domain</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gitlab.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-43-5><a id=__codelineno-43-5 name=__codelineno-43-5 href=#__codelineno-43-5></a><span class=w>    </span><span class=nt>https</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-6><a id=__codelineno-43-6 name=__codelineno-43-6 href=#__codelineno-43-6></a><span class=w>  </span><span class=nt>ingress</span><span class=p>:</span>
</span><span id=__span-43-7><a id=__codelineno-43-7 name=__codelineno-43-7 href=#__codelineno-43-7></a><span class=w>    </span><span class=nt>configureCertmanager</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-8><a id=__codelineno-43-8 name=__codelineno-43-8 href=#__codelineno-43-8></a><span class=w>    </span><span class=nt>provider</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">contour</span>
</span><span id=__span-43-9><a id=__codelineno-43-9 name=__codelineno-43-9 href=#__codelineno-43-9></a><span class=w>    </span><span class=nt>class</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">contour</span>
</span><span id=__span-43-10><a id=__codelineno-43-10 name=__codelineno-43-10 href=#__codelineno-43-10></a><span class=w>    </span><span class=nt>enabled</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-11><a id=__codelineno-43-11 name=__codelineno-43-11 href=#__codelineno-43-11></a><span class=nt>certmanager</span><span class=p>:</span>
</span><span id=__span-43-12><a id=__codelineno-43-12 name=__codelineno-43-12 href=#__codelineno-43-12></a><span class=w>  </span><span class=nt>installCRDs</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-13><a id=__codelineno-43-13 name=__codelineno-43-13 href=#__codelineno-43-13></a><span class=w>  </span><span class=nt>install</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-14><a id=__codelineno-43-14 name=__codelineno-43-14 href=#__codelineno-43-14></a><span class=nt>gitlab-runner</span><span class=p>:</span>
</span><span id=__span-43-15><a id=__codelineno-43-15 name=__codelineno-43-15 href=#__codelineno-43-15></a><span class=w>  </span><span class=nt>install</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
</span><span id=__span-43-16><a id=__codelineno-43-16 name=__codelineno-43-16 href=#__codelineno-43-16></a><span class=nt>gitlab</span><span class=p>:</span>
</span><span id=__span-43-17><a id=__codelineno-43-17 name=__codelineno-43-17 href=#__codelineno-43-17></a><span class=w>  </span><span class=nt>webservice</span><span class=p>:</span>
</span><span id=__span-43-18><a id=__codelineno-43-18 name=__codelineno-43-18 href=#__codelineno-43-18></a><span class=w>    </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-43-19><a id=__codelineno-43-19 name=__codelineno-43-19 href=#__codelineno-43-19></a><span class=w>    </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-43-20><a id=__codelineno-43-20 name=__codelineno-43-20 href=#__codelineno-43-20></a><span class=w>  </span><span class=nt>sidekiq</span><span class=p>:</span>
</span><span id=__span-43-21><a id=__codelineno-43-21 name=__codelineno-43-21 href=#__codelineno-43-21></a><span class=w>    </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-43-22><a id=__codelineno-43-22 name=__codelineno-43-22 href=#__codelineno-43-22></a><span class=w>    </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-43-23><a id=__codelineno-43-23 name=__codelineno-43-23 href=#__codelineno-43-23></a><span class=w>  </span><span class=nt>gitlab-shell</span><span class=p>:</span>
</span><span id=__span-43-24><a id=__codelineno-43-24 name=__codelineno-43-24 href=#__codelineno-43-24></a><span class=w>    </span><span class=nt>minReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span><span id=__span-43-25><a id=__codelineno-43-25 name=__codelineno-43-25 href=#__codelineno-43-25></a><span class=w>    </span><span class=nt>maxReplicas</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-44-1><a id=__codelineno-44-1 name=__codelineno-44-1 href=#__codelineno-44-1></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>gitlab<span class=w> </span>gitlab/gitlab<span class=w> </span><span class=se>\</span>
</span><span id=__span-44-2><a id=__codelineno-44-2 name=__codelineno-44-2 href=#__codelineno-44-2></a><span class=w>  </span>--namespace<span class=w> </span>gitlab<span class=w> </span>--wait<span class=w> </span>--version<span class=w> </span><span class=m>6</span>.6.0<span class=w> </span><span class=se>\</span>
</span><span id=__span-44-3><a id=__codelineno-44-3 name=__codelineno-44-3 href=#__codelineno-44-3></a><span class=w>  </span>--values<span class=w> </span>gitlab-values.yaml
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-45-1><a id=__codelineno-45-1 name=__codelineno-45-1 href=#__codelineno-45-1></a>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>docker-registry<span class=w> </span>dh-registry-credentials<span class=w> </span><span class=se>\</span>
</span><span id=__span-45-2><a id=__codelineno-45-2 name=__codelineno-45-2 href=#__codelineno-45-2></a><span class=w>    </span>--docker-username<span class=o>=</span>joostvdgtanzu<span class=w> </span><span class=se>\</span>
</span><span id=__span-45-3><a id=__codelineno-45-3 name=__codelineno-45-3 href=#__codelineno-45-3></a><span class=w>    </span>--docker-password<span class=o>=</span>???<span class=w> </span><span class=se>\</span>
</span><span id=__span-45-4><a id=__codelineno-45-4 name=__codelineno-45-4 href=#__codelineno-45-4></a><span class=w>    </span>--docker-server<span class=o>=</span>https://index.docker.io/v2/<span class=w> </span>-n<span class=w> </span>gitlab
</span></code></pre></div> <p>And then add the secret as imagePullSecret to the SA:</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-46-1><a id=__codelineno-46-1 name=__codelineno-46-1 href=#__codelineno-46-1></a>kubectl<span class=w> </span>edit<span class=w> </span>-n<span class=w> </span>gitlab<span class=w> </span>sa<span class=w> </span>default
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-47-1><a id=__codelineno-47-1 name=__codelineno-47-1 href=#__codelineno-47-1></a>imagePullSecrets:
</span><span id=__span-47-2><a id=__codelineno-47-2 name=__codelineno-47-2 href=#__codelineno-47-2></a><span class=w>  </span>-<span class=w> </span>name:<span class=w> </span>dh-registry-credentials
</span></code></pre></div> <h3 id=argocd-install-in-full-with-access-to-run>ArgoCD - Install in Full with Access to Run<a class=headerlink href=#argocd-install-in-full-with-access-to-run title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>argocd-values.yaml</span><pre><span></span><code><span id=__span-48-1><a id=__codelineno-48-1 name=__codelineno-48-1 href=#__codelineno-48-1></a>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-49-1><a id=__codelineno-49-1 name=__codelineno-49-1 href=#__codelineno-49-1></a>helm<span class=w> </span>upgrade<span class=w> </span>--install<span class=w> </span>argocd<span class=w> </span>argo/argo-cd<span class=w> </span><span class=se>\</span>
</span><span id=__span-49-2><a id=__codelineno-49-2 name=__codelineno-49-2 href=#__codelineno-49-2></a><span class=w>  </span>--namespace<span class=w> </span>argocd<span class=w> </span><span class=se>\</span>
</span><span id=__span-49-3><a id=__codelineno-49-3 name=__codelineno-49-3 href=#__codelineno-49-3></a><span class=w>  </span>--wait<span class=w> </span><span class=se>\</span>
</span><span id=__span-49-4><a id=__codelineno-49-4 name=__codelineno-49-4 href=#__codelineno-49-4></a><span class=w>  </span>--version<span class=w> </span><span class=m>5</span>.46.7<span class=w> </span><span class=se>\</span>
</span><span id=__span-49-5><a id=__codelineno-49-5 name=__codelineno-49-5 href=#__codelineno-49-5></a><span class=w>  </span>--values<span class=w> </span>argocd-values.yaml
</span></code></pre></div> <h2 id=notes-tap-gitops-17>Notes - TAP GitOps 1.7<a class=headerlink href=#notes-tap-gitops-17 title="Permanent link">&para;</a></h2> <ul> <li><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/install-gitops-sops.html>https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/install-gitops-sops.html</a></li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-50-1><a id=__codelineno-50-1 name=__codelineno-50-1 href=#__codelineno-50-1></a><span class=nb>export</span><span class=w> </span><span class=nv>SOPS_AGE_KEY</span><span class=o>=</span><span class=k>$(</span>cat<span class=w> </span>key.txt<span class=k>)</span>
</span><span id=__span-50-2><a id=__codelineno-50-2 name=__codelineno-50-2 href=#__codelineno-50-2></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_PKGR_REPO</span><span class=o>=</span>harbor.tap.h2o-2-19271.h2o.vmware.com/tap/tap-packages
</span></code></pre></div> <h3 id=kapp-controller>KAPP Controller<a class=headerlink href=#kapp-controller title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-51-1><a id=__codelineno-51-1 name=__codelineno-51-1 href=#__codelineno-51-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-51-2><a id=__codelineno-51-2 name=__codelineno-51-2 href=#__codelineno-51-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id=__span-51-3><a id=__codelineno-51-3 name=__codelineno-51-3 href=#__codelineno-51-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-51-4><a id=__codelineno-51-4 name=__codelineno-51-4 href=#__codelineno-51-4></a><span class=w>  </span><span class=c1># Name must be `kapp-controller-config` for kapp controller to pick it up</span>
</span><span id=__span-51-5><a id=__codelineno-51-5 name=__codelineno-51-5 href=#__codelineno-51-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kapp-controller-config</span>
</span><span id=__span-51-6><a id=__codelineno-51-6 name=__codelineno-51-6 href=#__codelineno-51-6></a>
</span><span id=__span-51-7><a id=__codelineno-51-7 name=__codelineno-51-7 href=#__codelineno-51-7></a><span class=w>  </span><span class=c1># Namespace must match the namespace kapp-controller is deployed to</span>
</span><span id=__span-51-8><a id=__codelineno-51-8 name=__codelineno-51-8 href=#__codelineno-51-8></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tkg-system</span>
</span><span id=__span-51-9><a id=__codelineno-51-9 name=__codelineno-51-9 href=#__codelineno-51-9></a>
</span><span id=__span-51-10><a id=__codelineno-51-10 name=__codelineno-51-10 href=#__codelineno-51-10></a><span class=nt>stringData</span><span class=p>:</span>
</span><span id=__span-51-11><a id=__codelineno-51-11 name=__codelineno-51-11 href=#__codelineno-51-11></a><span class=w>  </span><span class=c1># A cert chain of trusted ca certs. These will be added to the system-wide</span>
</span><span id=__span-51-12><a id=__codelineno-51-12 name=__codelineno-51-12 href=#__codelineno-51-12></a><span class=w>  </span><span class=c1># cert pool of trusted ca&#39;s (optional)</span>
</span><span id=__span-51-13><a id=__codelineno-51-13 name=__codelineno-51-13 href=#__codelineno-51-13></a><span class=w>  </span><span class=nt>caCerts</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-51-14><a id=__codelineno-51-14 name=__codelineno-51-14 href=#__codelineno-51-14></a><span class=w>    </span><span class=no>-----BEGIN CERTIFICATE-----</span>
</span><span id=__span-51-15><a id=__codelineno-51-15 name=__codelineno-51-15 href=#__codelineno-51-15></a><span class=w>    </span><span class=no>MIID7jCCAtagAwIBAgIURv5DzXSDklERFu4gL2sQBNeRg+owDQYJKoZIhvcNAQEL</span>
</span><span id=__span-51-16><a id=__codelineno-51-16 name=__codelineno-51-16 href=#__codelineno-51-16></a><span class=w>    </span><span class=no>BQAwgY4xCzAJBgNVBAYTAk5MMRgwFgYDVQQIEw9UaGUgTmV0aGVybGFuZHMxEDAO</span>
</span><span id=__span-51-17><a id=__codelineno-51-17 name=__codelineno-51-17 href=#__codelineno-51-17></a><span class=w>    </span><span class=no>BgNVBAcTB1V0cmVjaHQxFTATBgNVBAoTDEtlYXJvcyBUYW56dTEdMBsGA1UECxMU</span>
</span><span id=__span-51-18><a id=__codelineno-51-18 name=__codelineno-51-18 href=#__codelineno-51-18></a><span class=w>    </span><span class=no>S2Vhcm9zIFRhbnp1IFJvb3QgQ0ExHTAbBgNVBAMTFEtlYXJvcyBUYW56dSBSb290</span>
</span><span id=__span-51-19><a id=__codelineno-51-19 name=__codelineno-51-19 href=#__codelineno-51-19></a><span class=w>    </span><span class=no>IENBMB4XDTIyMDMyMzE1MzUwMFoXDTI3MDMyMjE1MzUwMFowgY4xCzAJBgNVBAYT</span>
</span><span id=__span-51-20><a id=__codelineno-51-20 name=__codelineno-51-20 href=#__codelineno-51-20></a><span class=w>    </span><span class=no>Ak5MMRgwFgYDVQQIEw9UaGUgTmV0aGVybGFuZHMxEDAOBgNVBAcTB1V0cmVjaHQx</span>
</span><span id=__span-51-21><a id=__codelineno-51-21 name=__codelineno-51-21 href=#__codelineno-51-21></a><span class=w>    </span><span class=no>FTATBgNVBAoTDEtlYXJvcyBUYW56dTEdMBsGA1UECxMUS2Vhcm9zIFRhbnp1IFJv</span>
</span><span id=__span-51-22><a id=__codelineno-51-22 name=__codelineno-51-22 href=#__codelineno-51-22></a><span class=w>    </span><span class=no>b3QgQ0ExHTAbBgNVBAMTFEtlYXJvcyBUYW56dSBSb290IENBMIIBIjANBgkqhkiG</span>
</span><span id=__span-51-23><a id=__codelineno-51-23 name=__codelineno-51-23 href=#__codelineno-51-23></a><span class=w>    </span><span class=no>9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyZXDL9W2vu365m//E/w8n1M189a5mI9HcTYa</span>
</span><span id=__span-51-24><a id=__codelineno-51-24 name=__codelineno-51-24 href=#__codelineno-51-24></a><span class=w>    </span><span class=no>0xZhnup58Zp72PsgzujI/fQe43JEeC+aIOcmsoDaQ/uqRi8p8phU5/poxKCbe9SM</span>
</span><span id=__span-51-25><a id=__codelineno-51-25 name=__codelineno-51-25 href=#__codelineno-51-25></a><span class=w>    </span><span class=no>f1OflLD9k2dwte6OV5kcSUbVOgScKL1wGEo5mdOiTFrEp5aLBUcbUeJMYz2IqLVa</span>
</span><span id=__span-51-26><a id=__codelineno-51-26 name=__codelineno-51-26 href=#__codelineno-51-26></a><span class=w>    </span><span class=no>v52H0vTzGfmrfSm/PQb+5qnCE5D88DREqKtWdWW2bCW0HhxVHk6XX/FKD2Z0FHWI</span>
</span><span id=__span-51-27><a id=__codelineno-51-27 name=__codelineno-51-27 href=#__codelineno-51-27></a><span class=w>    </span><span class=no>ChejeaiarXqWBI94BANbOAOmlhjjyJekT5hL1gh7BuCLbiE+A53kWnXO6Xb/eyuJ</span>
</span><span id=__span-51-28><a id=__codelineno-51-28 name=__codelineno-51-28 href=#__codelineno-51-28></a><span class=w>    </span><span class=no>obr+uHLJldoJq7SFyvxrDd/8LAJD4XMCEz+3gWjYDXMH7GfPWwIDAQABo0IwQDAO</span>
</span><span id=__span-51-29><a id=__codelineno-51-29 name=__codelineno-51-29 href=#__codelineno-51-29></a><span class=w>    </span><span class=no>BgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUfGU50Pe9</span>
</span><span id=__span-51-30><a id=__codelineno-51-30 name=__codelineno-51-30 href=#__codelineno-51-30></a><span class=w>    </span><span class=no>YTv5SFvGVOz6R7ddPcUwDQYJKoZIhvcNAQELBQADggEBAHMoNDxy9/kL4nW0Bhc5</span>
</span><span id=__span-51-31><a id=__codelineno-51-31 name=__codelineno-51-31 href=#__codelineno-51-31></a><span class=w>    </span><span class=no>Gn0mD8xqt+qpLGgChlsMPNR0xPW04YDotm+GmZHZg1t6vE8WPKsktcuv76d+hX4A</span>
</span><span id=__span-51-32><a id=__codelineno-51-32 name=__codelineno-51-32 href=#__codelineno-51-32></a><span class=w>    </span><span class=no>uhXXGS9D0FeC6I6j6dOIW7Sbd3iAQQopwICYFL9EFA+QAINeY/Y99Lf3B11JfLU8</span>
</span><span id=__span-51-33><a id=__codelineno-51-33 name=__codelineno-51-33 href=#__codelineno-51-33></a><span class=w>    </span><span class=no>jN9uGHKFI0FVwHX428ObVrDi3+OCNewQ3fLmrRQe6F6q2OU899huCg+eYECWvxZR</span>
</span><span id=__span-51-34><a id=__codelineno-51-34 name=__codelineno-51-34 href=#__codelineno-51-34></a><span class=w>    </span><span class=no>a3SlVZmYnefbA87jI2FRHUPqxp4P2mDwj/RZxhgIobhw0zz08sqC6DW0Aj1OIJe5</span>
</span><span id=__span-51-35><a id=__codelineno-51-35 name=__codelineno-51-35 href=#__codelineno-51-35></a><span class=w>    </span><span class=no>sDAm0uiUdqs7FZN2uKkLKekdTgW0QkTFEJTk5Yk9t/hOrjnHoWQfB+mLhO3vPhip</span>
</span><span id=__span-51-36><a id=__codelineno-51-36 name=__codelineno-51-36 href=#__codelineno-51-36></a><span class=w>    </span><span class=no>vhs=</span>
</span><span id=__span-51-37><a id=__codelineno-51-37 name=__codelineno-51-37 href=#__codelineno-51-37></a><span class=w>    </span><span class=no>-----END CERTIFICATE-----</span>
</span></code></pre></div> <h2 id=tkr-126-admission-policies>TKR 1.26 Admission Policies<a class=headerlink href=#tkr-126-admission-policies title="Permanent link">&para;</a></h2> <ul> <li>see issue: <a href=https://vmware.slack.com/archives/C02D60T1ZDJ/p1697207282314919>https://vmware.slack.com/archives/C02D60T1ZDJ/p1697207282314919</a></li> <li>create cluster via TMC</li> <li>create mutation policies to add labels to all namespaces</li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-52-1><a id=__codelineno-52-1 name=__codelineno-52-1 href=#__codelineno-52-1></a><span class=nt>type</span><span class=p>:</span>
</span><span id=__span-52-2><a id=__codelineno-52-2 name=__codelineno-52-2 href=#__codelineno-52-2></a><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Policy</span>
</span><span id=__span-52-3><a id=__codelineno-52-3 name=__codelineno-52-3 href=#__codelineno-52-3></a><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1alpha1</span>
</span><span id=__span-52-4><a id=__codelineno-52-4 name=__codelineno-52-4 href=#__codelineno-52-4></a><span class=w>  </span><span class=nt>package</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vmware.tanzu.manage.v1alpha1.clustergroup.policy</span>
</span><span id=__span-52-5><a id=__codelineno-52-5 name=__codelineno-52-5 href=#__codelineno-52-5></a><span class=nt>fullName</span><span class=p>:</span>
</span><span id=__span-52-6><a id=__codelineno-52-6 name=__codelineno-52-6 href=#__codelineno-52-6></a><span class=w>  </span><span class=nt>orgId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">26620245-46a1-4f87-8b0c-63f6b4c41198</span>
</span><span id=__span-52-7><a id=__codelineno-52-7 name=__codelineno-52-7 href=#__codelineno-52-7></a><span class=w>  </span><span class=nt>clusterGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">joostvdg-h2o</span>
</span><span id=__span-52-8><a id=__codelineno-52-8 name=__codelineno-52-8 href=#__codelineno-52-8></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">enforce</span>
</span><span id=__span-52-9><a id=__codelineno-52-9 name=__codelineno-52-9 href=#__codelineno-52-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-52-10><a id=__codelineno-52-10 name=__codelineno-52-10 href=#__codelineno-52-10></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mutation-policy</span>
</span><span id=__span-52-11><a id=__codelineno-52-11 name=__codelineno-52-11 href=#__codelineno-52-11></a><span class=w>  </span><span class=nt>recipe</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">label</span>
</span><span id=__span-52-12><a id=__codelineno-52-12 name=__codelineno-52-12 href=#__codelineno-52-12></a><span class=w>  </span><span class=nt>recipeVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-52-13><a id=__codelineno-52-13 name=__codelineno-52-13 href=#__codelineno-52-13></a><span class=w>  </span><span class=nt>input</span><span class=p>:</span>
</span><span id=__span-52-14><a id=__codelineno-52-14 name=__codelineno-52-14 href=#__codelineno-52-14></a><span class=w>    </span><span class=nt>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;*&quot;</span>
</span><span id=__span-52-15><a id=__codelineno-52-15 name=__codelineno-52-15 href=#__codelineno-52-15></a><span class=w>    </span><span class=nt>targetKubernetesResources</span><span class=p>:</span>
</span><span id=__span-52-16><a id=__codelineno-52-16 name=__codelineno-52-16 href=#__codelineno-52-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
</span><span id=__span-52-17><a id=__codelineno-52-17 name=__codelineno-52-17 href=#__codelineno-52-17></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-52-18><a id=__codelineno-52-18 name=__codelineno-52-18 href=#__codelineno-52-18></a><span class=w>        </span><span class=nt>kinds</span><span class=p>:</span>
</span><span id=__span-52-19><a id=__codelineno-52-19 name=__codelineno-52-19 href=#__codelineno-52-19></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span>
</span><span id=__span-52-20><a id=__codelineno-52-20 name=__codelineno-52-20 href=#__codelineno-52-20></a><span class=w>    </span><span class=nt>label</span><span class=p>:</span>
</span><span id=__span-52-21><a id=__codelineno-52-21 name=__codelineno-52-21 href=#__codelineno-52-21></a><span class=w>      </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pod-security.kubernetes.io/enforce</span>
</span><span id=__span-52-22><a id=__codelineno-52-22 name=__codelineno-52-22 href=#__codelineno-52-22></a><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">privileged</span>
</span><span id=__span-52-23><a id=__codelineno-52-23 name=__codelineno-52-23 href=#__codelineno-52-23></a><span class=w>  </span><span class=nt>namespaceSelector</span><span class=p>:</span>
</span><span id=__span-52-24><a id=__codelineno-52-24 name=__codelineno-52-24 href=#__codelineno-52-24></a><span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span>
</span><span id=__span-52-25><a id=__codelineno-52-25 name=__codelineno-52-25 href=#__codelineno-52-25></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/metadata.name</span>
</span><span id=__span-52-26><a id=__codelineno-52-26 name=__codelineno-52-26 href=#__codelineno-52-26></a><span class=w>        </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span></code></pre></div> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-53-1><a id=__codelineno-53-1 name=__codelineno-53-1 href=#__codelineno-53-1></a><span class=nt>type</span><span class=p>:</span>
</span><span id=__span-53-2><a id=__codelineno-53-2 name=__codelineno-53-2 href=#__codelineno-53-2></a><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Policy</span>
</span><span id=__span-53-3><a id=__codelineno-53-3 name=__codelineno-53-3 href=#__codelineno-53-3></a><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1alpha1</span>
</span><span id=__span-53-4><a id=__codelineno-53-4 name=__codelineno-53-4 href=#__codelineno-53-4></a><span class=w>  </span><span class=nt>package</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">vmware.tanzu.manage.v1alpha1.clustergroup.policy</span>
</span><span id=__span-53-5><a id=__codelineno-53-5 name=__codelineno-53-5 href=#__codelineno-53-5></a><span class=nt>fullName</span><span class=p>:</span>
</span><span id=__span-53-6><a id=__codelineno-53-6 name=__codelineno-53-6 href=#__codelineno-53-6></a><span class=w>  </span><span class=nt>orgId</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">26620245-46a1-4f87-8b0c-63f6b4c41198</span>
</span><span id=__span-53-7><a id=__codelineno-53-7 name=__codelineno-53-7 href=#__codelineno-53-7></a><span class=w>  </span><span class=nt>clusterGroupName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">joostvdg-h2o</span>
</span><span id=__span-53-8><a id=__codelineno-53-8 name=__codelineno-53-8 href=#__codelineno-53-8></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">enforce-version</span>
</span><span id=__span-53-9><a id=__codelineno-53-9 name=__codelineno-53-9 href=#__codelineno-53-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-53-10><a id=__codelineno-53-10 name=__codelineno-53-10 href=#__codelineno-53-10></a><span class=w>  </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mutation-policy</span>
</span><span id=__span-53-11><a id=__codelineno-53-11 name=__codelineno-53-11 href=#__codelineno-53-11></a><span class=w>  </span><span class=nt>recipe</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">label</span>
</span><span id=__span-53-12><a id=__codelineno-53-12 name=__codelineno-53-12 href=#__codelineno-53-12></a><span class=w>  </span><span class=nt>recipeVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-53-13><a id=__codelineno-53-13 name=__codelineno-53-13 href=#__codelineno-53-13></a><span class=w>  </span><span class=nt>input</span><span class=p>:</span>
</span><span id=__span-53-14><a id=__codelineno-53-14 name=__codelineno-53-14 href=#__codelineno-53-14></a><span class=w>    </span><span class=nt>scope</span><span class=p>:</span><span class=w> </span><span class=s>&quot;*&quot;</span>
</span><span id=__span-53-15><a id=__codelineno-53-15 name=__codelineno-53-15 href=#__codelineno-53-15></a><span class=w>    </span><span class=nt>targetKubernetesResources</span><span class=p>:</span>
</span><span id=__span-53-16><a id=__codelineno-53-16 name=__codelineno-53-16 href=#__codelineno-53-16></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
</span><span id=__span-53-17><a id=__codelineno-53-17 name=__codelineno-53-17 href=#__codelineno-53-17></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class=s>&quot;&quot;</span>
</span><span id=__span-53-18><a id=__codelineno-53-18 name=__codelineno-53-18 href=#__codelineno-53-18></a><span class=w>        </span><span class=nt>kinds</span><span class=p>:</span>
</span><span id=__span-53-19><a id=__codelineno-53-19 name=__codelineno-53-19 href=#__codelineno-53-19></a><span class=w>          </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Namespace</span>
</span><span id=__span-53-20><a id=__codelineno-53-20 name=__codelineno-53-20 href=#__codelineno-53-20></a><span class=w>    </span><span class=nt>label</span><span class=p>:</span>
</span><span id=__span-53-21><a id=__codelineno-53-21 name=__codelineno-53-21 href=#__codelineno-53-21></a><span class=w>      </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pod-security.kubernetes.io/enforce-version</span>
</span><span id=__span-53-22><a id=__codelineno-53-22 name=__codelineno-53-22 href=#__codelineno-53-22></a><span class=w>      </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">latest</span>
</span><span id=__span-53-23><a id=__codelineno-53-23 name=__codelineno-53-23 href=#__codelineno-53-23></a><span class=w>  </span><span class=nt>namespaceSelector</span><span class=p>:</span>
</span><span id=__span-53-24><a id=__codelineno-53-24 name=__codelineno-53-24 href=#__codelineno-53-24></a><span class=w>    </span><span class=nt>matchExpressions</span><span class=p>:</span>
</span><span id=__span-53-25><a id=__codelineno-53-25 name=__codelineno-53-25 href=#__codelineno-53-25></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/metadata.name</span>
</span><span id=__span-53-26><a id=__codelineno-53-26 name=__codelineno-53-26 href=#__codelineno-53-26></a><span class=w>        </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Exists</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-54-1><a id=__codelineno-54-1 name=__codelineno-54-1 href=#__codelineno-54-1></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_HOSTNAME</span><span class=o>=</span>registry.tanzu.vmware.com
</span><span id=__span-54-2><a id=__codelineno-54-2 name=__codelineno-54-2 href=#__codelineno-54-2></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_USERNAME</span><span class=o>=</span>jvandergrien@vmware.com
</span><span id=__span-54-3><a id=__codelineno-54-3 name=__codelineno-54-3 href=#__codelineno-54-3></a><span class=nb>export</span><span class=w> </span><span class=nv>INSTALL_REGISTRY_PASSWORD</span><span class=o>=</span><span class=s1>&#39;X6qRPlP@0056$&amp;qx%SCSIOFH&#39;</span>
</span><span id=__span-54-4><a id=__codelineno-54-4 name=__codelineno-54-4 href=#__codelineno-54-4></a><span class=nb>export</span><span class=w> </span><span class=nv>GIT_SSH_PRIVATE_KEY</span><span class=o>=</span><span class=k>$(</span>cat<span class=w> </span><span class=nv>$HOME</span>/.ssh/id_rsa<span class=k>)</span>
</span><span id=__span-54-5><a id=__codelineno-54-5 name=__codelineno-54-5 href=#__codelineno-54-5></a><span class=nb>export</span><span class=w> </span><span class=nv>GIT_KNOWN_HOSTS</span><span class=o>=</span><span class=k>$(</span>ssh-keyscan<span class=w> </span>github.com<span class=k>)</span>
</span><span id=__span-54-6><a id=__codelineno-54-6 name=__codelineno-54-6 href=#__codelineno-54-6></a><span class=nb>export</span><span class=w> </span><span class=nv>SOPS_AGE_KEY</span><span class=o>=</span><span class=k>$(</span>cat<span class=w> </span>/Users/joostvdg/Projects/tap-gitops/key.txt<span class=k>)</span>
</span><span id=__span-54-7><a id=__codelineno-54-7 name=__codelineno-54-7 href=#__codelineno-54-7></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_PKGR_REPO</span><span class=o>=</span>registry.tanzu.vmware.com/tanzu-application-platform/tap-packages
</span></code></pre></div> <h2 id=kpack-tutorial>KPACK Tutorial<a class=headerlink href=#kpack-tutorial title="Permanent link">&para;</a></h2> <ul> <li><a href=https://github.com/buildpacks-community/kpack/blob/main/docs/tutorial.md>https://github.com/buildpacks-community/kpack/blob/main/docs/tutorial.md</a></li> </ul> <h3 id=registry-secret>Registry Secret<a class=headerlink href=#registry-secret title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-55-1><a id=__codelineno-55-1 name=__codelineno-55-1 href=#__codelineno-55-1></a>kp<span class=w> </span>secret<span class=w> </span>create<span class=w> </span>my-registry-cred<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-2><a id=__codelineno-55-2 name=__codelineno-55-2 href=#__codelineno-55-2></a><span class=w>  </span>--registry<span class=w> </span>harbor.tap.h2o-2-19271.h2o.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-3><a id=__codelineno-55-3 name=__codelineno-55-3 href=#__codelineno-55-3></a><span class=w>  </span>--registry-user<span class=w> </span>admin<span class=w> </span><span class=se>\</span>
</span><span id=__span-55-4><a id=__codelineno-55-4 name=__codelineno-55-4 href=#__codelineno-55-4></a><span class=w>  </span>--namespace<span class=w> </span>tap-install
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-56-1><a id=__codelineno-56-1 name=__codelineno-56-1 href=#__codelineno-56-1></a>kubectl<span class=w> </span>create<span class=w> </span>secret<span class=w> </span>docker-registry<span class=w> </span>tutorial-registry-credentials<span class=w> </span><span class=se>\</span>
</span><span id=__span-56-2><a id=__codelineno-56-2 name=__codelineno-56-2 href=#__codelineno-56-2></a><span class=w>    </span>--docker-username<span class=o>=</span>admin<span class=w> </span><span class=se>\</span>
</span><span id=__span-56-3><a id=__codelineno-56-3 name=__codelineno-56-3 href=#__codelineno-56-3></a><span class=w>    </span>--docker-password<span class=o>=</span><span class=s1>&#39;VMware123!&#39;</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-56-4><a id=__codelineno-56-4 name=__codelineno-56-4 href=#__codelineno-56-4></a><span class=w>    </span>--docker-server<span class=o>=</span>harbor.tap.h2o-2-19271.h2o.vmware.com<span class=w> </span><span class=se>\</span>
</span><span id=__span-56-5><a id=__codelineno-56-5 name=__codelineno-56-5 href=#__codelineno-56-5></a><span class=w>    </span>--namespace<span class=w> </span>ktest
</span></code></pre></div> <h3 id=serviceaccount>ServiceAccount<a class=headerlink href=#serviceaccount title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>sa.yaml</span><pre><span></span><code><span id=__span-57-1><a id=__codelineno-57-1 name=__codelineno-57-1 href=#__codelineno-57-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-57-2><a id=__codelineno-57-2 name=__codelineno-57-2 href=#__codelineno-57-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id=__span-57-3><a id=__codelineno-57-3 name=__codelineno-57-3 href=#__codelineno-57-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-57-4><a id=__codelineno-57-4 name=__codelineno-57-4 href=#__codelineno-57-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tutorial-service-account</span>
</span><span id=__span-57-5><a id=__codelineno-57-5 name=__codelineno-57-5 href=#__codelineno-57-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest</span>
</span><span id=__span-57-6><a id=__codelineno-57-6 name=__codelineno-57-6 href=#__codelineno-57-6></a><span class=nt>secrets</span><span class=p>:</span>
</span><span id=__span-57-7><a id=__codelineno-57-7 name=__codelineno-57-7 href=#__codelineno-57-7></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tutorial-registry-credentials</span>
</span><span id=__span-57-8><a id=__codelineno-57-8 name=__codelineno-57-8 href=#__codelineno-57-8></a><span class=nt>imagePullSecrets</span><span class=p>:</span>
</span><span id=__span-57-9><a id=__codelineno-57-9 name=__codelineno-57-9 href=#__codelineno-57-9></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tutorial-registry-credentials</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-58-1><a id=__codelineno-58-1 name=__codelineno-58-1 href=#__codelineno-58-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>sa.yaml
</span></code></pre></div> <h3 id=clusterstore>ClusterStore<a class=headerlink href=#clusterstore title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>store.yaml</span><pre><span></span><code><span id=__span-59-1><a id=__codelineno-59-1 name=__codelineno-59-1 href=#__codelineno-59-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kpack.io/v1alpha2</span>
</span><span id=__span-59-2><a id=__codelineno-59-2 name=__codelineno-59-2 href=#__codelineno-59-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterStore</span>
</span><span id=__span-59-3><a id=__codelineno-59-3 name=__codelineno-59-3 href=#__codelineno-59-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-59-4><a id=__codelineno-59-4 name=__codelineno-59-4 href=#__codelineno-59-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest</span>
</span><span id=__span-59-5><a id=__codelineno-59-5 name=__codelineno-59-5 href=#__codelineno-59-5></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-59-6><a id=__codelineno-59-6 name=__codelineno-59-6 href=#__codelineno-59-6></a><span class=w>  </span><span class=nt>sources</span><span class=p>:</span>
</span><span id=__span-59-7><a id=__codelineno-59-7 name=__codelineno-59-7 href=#__codelineno-59-7></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gcr.io/paketo-buildpacks/java</span>
</span><span id=__span-59-8><a id=__codelineno-59-8 name=__codelineno-59-8 href=#__codelineno-59-8></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">gcr.io/paketo-buildpacks/nodejs</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-60-1><a id=__codelineno-60-1 name=__codelineno-60-1 href=#__codelineno-60-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>store.yaml
</span></code></pre></div> <h3 id=clusterstack>ClusterStack<a class=headerlink href=#clusterstack title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>stack.yaml</span><pre><span></span><code><span id=__span-61-1><a id=__codelineno-61-1 name=__codelineno-61-1 href=#__codelineno-61-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kpack.io/v1alpha2</span>
</span><span id=__span-61-2><a id=__codelineno-61-2 name=__codelineno-61-2 href=#__codelineno-61-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterStack</span>
</span><span id=__span-61-3><a id=__codelineno-61-3 name=__codelineno-61-3 href=#__codelineno-61-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-61-4><a id=__codelineno-61-4 name=__codelineno-61-4 href=#__codelineno-61-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest-base</span>
</span><span id=__span-61-5><a id=__codelineno-61-5 name=__codelineno-61-5 href=#__codelineno-61-5></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-61-6><a id=__codelineno-61-6 name=__codelineno-61-6 href=#__codelineno-61-6></a><span class=w>  </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class=s>&quot;io.buildpacks.stacks.jammy&quot;</span>
</span><span id=__span-61-7><a id=__codelineno-61-7 name=__codelineno-61-7 href=#__codelineno-61-7></a><span class=w>  </span><span class=nt>buildImage</span><span class=p>:</span>
</span><span id=__span-61-8><a id=__codelineno-61-8 name=__codelineno-61-8 href=#__codelineno-61-8></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s>&quot;paketobuildpacks/build-jammy-base&quot;</span>
</span><span id=__span-61-9><a id=__codelineno-61-9 name=__codelineno-61-9 href=#__codelineno-61-9></a><span class=w>  </span><span class=nt>runImage</span><span class=p>:</span>
</span><span id=__span-61-10><a id=__codelineno-61-10 name=__codelineno-61-10 href=#__codelineno-61-10></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=s>&quot;paketobuildpacks/run-jammy-base&quot;</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-62-1><a id=__codelineno-62-1 name=__codelineno-62-1 href=#__codelineno-62-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>stack.yaml
</span></code></pre></div> <h3 id=builder>Builder<a class=headerlink href=#builder title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>builder.yaml</span><pre><span></span><code><span id=__span-63-1><a id=__codelineno-63-1 name=__codelineno-63-1 href=#__codelineno-63-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">kpack.io/v1alpha2</span>
</span><span id=__span-63-2><a id=__codelineno-63-2 name=__codelineno-63-2 href=#__codelineno-63-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Builder</span>
</span><span id=__span-63-3><a id=__codelineno-63-3 name=__codelineno-63-3 href=#__codelineno-63-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-63-4><a id=__codelineno-63-4 name=__codelineno-63-4 href=#__codelineno-63-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">test</span>
</span><span id=__span-63-5><a id=__codelineno-63-5 name=__codelineno-63-5 href=#__codelineno-63-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest</span>
</span><span id=__span-63-6><a id=__codelineno-63-6 name=__codelineno-63-6 href=#__codelineno-63-6></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-63-7><a id=__codelineno-63-7 name=__codelineno-63-7 href=#__codelineno-63-7></a><span class=w>  </span><span class=nt>serviceAccountName</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tutorial-service-account</span>
</span><span id=__span-63-8><a id=__codelineno-63-8 name=__codelineno-63-8 href=#__codelineno-63-8></a><span class=w>  </span><span class=nt>tag</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo:default-builder</span>
</span><span id=__span-63-9><a id=__codelineno-63-9 name=__codelineno-63-9 href=#__codelineno-63-9></a><span class=w>  </span><span class=nt>stack</span><span class=p>:</span>
</span><span id=__span-63-10><a id=__codelineno-63-10 name=__codelineno-63-10 href=#__codelineno-63-10></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest-base</span>
</span><span id=__span-63-11><a id=__codelineno-63-11 name=__codelineno-63-11 href=#__codelineno-63-11></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterStack</span>
</span><span id=__span-63-12><a id=__codelineno-63-12 name=__codelineno-63-12 href=#__codelineno-63-12></a><span class=w>  </span><span class=nt>store</span><span class=p>:</span>
</span><span id=__span-63-13><a id=__codelineno-63-13 name=__codelineno-63-13 href=#__codelineno-63-13></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ktest</span>
</span><span id=__span-63-14><a id=__codelineno-63-14 name=__codelineno-63-14 href=#__codelineno-63-14></a><span class=w>    </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterStore</span>
</span><span id=__span-63-15><a id=__codelineno-63-15 name=__codelineno-63-15 href=#__codelineno-63-15></a><span class=w>  </span><span class=nt>order</span><span class=p>:</span>
</span><span id=__span-63-16><a id=__codelineno-63-16 name=__codelineno-63-16 href=#__codelineno-63-16></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span>
</span><span id=__span-63-17><a id=__codelineno-63-17 name=__codelineno-63-17 href=#__codelineno-63-17></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">paketo-buildpacks/java</span>
</span><span id=__span-63-18><a id=__codelineno-63-18 name=__codelineno-63-18 href=#__codelineno-63-18></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span>
</span><span id=__span-63-19><a id=__codelineno-63-19 name=__codelineno-63-19 href=#__codelineno-63-19></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>id</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">paketo-buildpacks/nodejs</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-64-1><a id=__codelineno-64-1 name=__codelineno-64-1 href=#__codelineno-64-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>builder.yaml
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-65-1><a id=__codelineno-65-1 name=__codelineno-65-1 href=#__codelineno-65-1></a>kubectl<span class=w> </span>get<span class=w> </span>builder<span class=w> </span>-n<span class=w> </span>ktest
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-66-1><a id=__codelineno-66-1 name=__codelineno-66-1 href=#__codelineno-66-1></a>kubectl<span class=w> </span>describe<span class=w> </span>builder<span class=w> </span>-n<span class=w> </span>ktest<span class=w> </span><span class=nb>test</span>
</span></code></pre></div> <p>full-deps-package-repo</p> <p>harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo:default-builder harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo:</p> <p>docker pull harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo@sha256:741114edfb85c5fafdabdb04ad5cc3057e4f645dea3bef8d687f0e1cad75209e</p> <h2 id=relocate-images>Relocate Images<a class=headerlink href=#relocate-images title="Permanent link">&para;</a></h2> <h3 id=tap>TAP<a class=headerlink href=#tap title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-67-1><a id=__codelineno-67-1 name=__codelineno-67-1 href=#__codelineno-67-1></a><span class=c1># Set tanzunet as the source registry to copy the Tanzu Application Platform packages from.</span>
</span><span id=__span-67-2><a id=__codelineno-67-2 name=__codelineno-67-2 href=#__codelineno-67-2></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_HOSTNAME_0</span><span class=o>=</span>registry.tanzu.vmware.com
</span><span id=__span-67-3><a id=__codelineno-67-3 name=__codelineno-67-3 href=#__codelineno-67-3></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_USERNAME_0</span><span class=o>=</span>joostvdg@gmail.com
</span><span id=__span-67-4><a id=__codelineno-67-4 name=__codelineno-67-4 href=#__codelineno-67-4></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_PASSWORD_0</span><span class=o>=</span><span class=s1>&#39;Lm-T*6hULZ2UWJPm.DNL&#39;</span>
</span><span id=__span-67-5><a id=__codelineno-67-5 name=__codelineno-67-5 href=#__codelineno-67-5></a>
</span><span id=__span-67-6><a id=__codelineno-67-6 name=__codelineno-67-6 href=#__codelineno-67-6></a><span class=c1># The user’s registry for copying the Tanzu Application Platform package to.</span>
</span><span id=__span-67-7><a id=__codelineno-67-7 name=__codelineno-67-7 href=#__codelineno-67-7></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_HOSTNAME_1</span><span class=o>=</span>harbor.tap.h2o-2-19271.h2o.vmware.com
</span><span id=__span-67-8><a id=__codelineno-67-8 name=__codelineno-67-8 href=#__codelineno-67-8></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_USERNAME_1</span><span class=o>=</span>admin
</span><span id=__span-67-9><a id=__codelineno-67-9 name=__codelineno-67-9 href=#__codelineno-67-9></a><span class=nb>export</span><span class=w> </span><span class=nv>IMGPKG_REGISTRY_PASSWORD_1</span><span class=o>=</span><span class=s1>&#39;VMware123!&#39;</span>
</span><span id=__span-67-10><a id=__codelineno-67-10 name=__codelineno-67-10 href=#__codelineno-67-10></a><span class=nb>export</span><span class=w> </span><span class=nv>TAP_VERSION</span><span class=o>=</span><span class=m>1</span>.7.1
</span><span id=__span-67-11><a id=__codelineno-67-11 name=__codelineno-67-11 href=#__codelineno-67-11></a><span class=nb>export</span><span class=w> </span><span class=nv>REGISTRY_CA_PATH</span><span class=o>=</span>/Users/joostvdg/Projects/vmware-docs/labs/h20/tap/150/scripts/ssl/ca.crt
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-68-1><a id=__codelineno-68-1 name=__codelineno-68-1 href=#__codelineno-68-1></a>imgpkg<span class=w> </span>copy<span class=w> </span><span class=se>\</span>
</span><span id=__span-68-2><a id=__codelineno-68-2 name=__codelineno-68-2 href=#__codelineno-68-2></a><span class=w>  </span>-b<span class=w> </span>registry.tanzu.vmware.com/tanzu-application-platform/tap-packages:<span class=nv>$TAP_VERSION</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-68-3><a id=__codelineno-68-3 name=__codelineno-68-3 href=#__codelineno-68-3></a><span class=w>  </span>--to-tar<span class=w> </span>tap-packages-<span class=nv>$TAP_VERSION</span>.tar<span class=w> </span><span class=se>\</span>
</span><span id=__span-68-4><a id=__codelineno-68-4 name=__codelineno-68-4 href=#__codelineno-68-4></a><span class=w>  </span>--include-non-distributable-layers
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-69-1><a id=__codelineno-69-1 name=__codelineno-69-1 href=#__codelineno-69-1></a>imgpkg<span class=w> </span>copy<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-2><a id=__codelineno-69-2 name=__codelineno-69-2 href=#__codelineno-69-2></a><span class=w>  </span>--tar<span class=w> </span>tap-packages-<span class=nv>$TAP_VERSION</span>.tar<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-3><a id=__codelineno-69-3 name=__codelineno-69-3 href=#__codelineno-69-3></a><span class=w>  </span>--to-repo<span class=w> </span><span class=nv>$IMGPKG_REGISTRY_HOSTNAME_1</span>/tap/tap-packages<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-4><a id=__codelineno-69-4 name=__codelineno-69-4 href=#__codelineno-69-4></a><span class=w>  </span>--include-non-distributable-layers<span class=w> </span><span class=se>\</span>
</span><span id=__span-69-5><a id=__codelineno-69-5 name=__codelineno-69-5 href=#__codelineno-69-5></a><span class=w>  </span>--registry-ca-cert-path<span class=w> </span><span class=nv>$REGISTRY_CA_PATH</span>
</span></code></pre></div> <h3 id=tbs-full-deps>TBS Full Deps<a class=headerlink href=#tbs-full-deps title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-70-1><a id=__codelineno-70-1 name=__codelineno-70-1 href=#__codelineno-70-1></a>imgpkg<span class=w> </span>copy<span class=w> </span>-b<span class=w> </span>registry.tanzu.vmware.com/tanzu-application-platform/full-deps-package-repo:<span class=si>${</span><span class=nv>TAP_VERSION</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-70-2><a id=__codelineno-70-2 name=__codelineno-70-2 href=#__codelineno-70-2></a><span class=w>  </span>--to-tar<span class=o>=</span>full-deps-package-repo-<span class=si>${</span><span class=nv>TAP_VERSION</span><span class=si>}</span>.tar
</span></code></pre></div> <p>move full-deps-package-repo.tar to environment with registry access</p> <div class="language-sh highlight"><pre><span></span><code><span id=__span-71-1><a id=__codelineno-71-1 name=__codelineno-71-1 href=#__codelineno-71-1></a>imgpkg<span class=w> </span>copy<span class=w> </span>--tar<span class=w> </span>full-deps-package-repo-<span class=si>${</span><span class=nv>TAP_VERSION</span><span class=si>}</span>.tar<span class=w> </span><span class=se>\</span>
</span><span id=__span-71-2><a id=__codelineno-71-2 name=__codelineno-71-2 href=#__codelineno-71-2></a><span class=w>  </span>--to-repo<span class=o>=</span>harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo<span class=w> </span><span class=se>\</span>
</span><span id=__span-71-3><a id=__codelineno-71-3 name=__codelineno-71-3 href=#__codelineno-71-3></a><span class=w>  </span>--registry-ca-cert-path<span class=w> </span><span class=nv>$REGISTRY_CA_PATH</span>
</span></code></pre></div> <h3 id=tbs-deps-package-repository>TBS Deps Package Repository<a class=headerlink href=#tbs-deps-package-repository title="Permanent link">&para;</a></h3> <div class="language-sh highlight"><pre><span></span><code><span id=__span-72-1><a id=__codelineno-72-1 name=__codelineno-72-1 href=#__codelineno-72-1></a>kubectl<span class=w> </span>create<span class=w> </span>ns<span class=w> </span>tbs-deps-1-7-1
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-73-1><a id=__codelineno-73-1 name=__codelineno-73-1 href=#__codelineno-73-1></a>tanzu<span class=w> </span>package<span class=w> </span>repository<span class=w> </span>add<span class=w> </span>tbs-deps-1-7-1<span class=w> </span><span class=se>\</span>
</span><span id=__span-73-2><a id=__codelineno-73-2 name=__codelineno-73-2 href=#__codelineno-73-2></a><span class=w>  </span>--url<span class=w> </span>harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo:<span class=si>${</span><span class=nv>TAP_VERSION</span><span class=si>}</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-73-3><a id=__codelineno-73-3 name=__codelineno-73-3 href=#__codelineno-73-3></a><span class=w>  </span>--namespace<span class=w> </span>tbs-deps-1-7-1
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-74-1><a id=__codelineno-74-1 name=__codelineno-74-1 href=#__codelineno-74-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>-n<span class=w> </span>tbs-deps-1-7-1<span class=w> </span>list
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-75-1><a id=__codelineno-75-1 name=__codelineno-75-1 href=#__codelineno-75-1></a><span class=nb>export</span><span class=w> </span><span class=nv>PACKAGE</span><span class=o>=</span>full-deps.buildservice.tanzu.vmware.com
</span><span id=__span-75-2><a id=__codelineno-75-2 name=__codelineno-75-2 href=#__codelineno-75-2></a><span class=nb>export</span><span class=w> </span><span class=nv>PACKAGE_VERSION</span><span class=o>=</span><span class=m>1</span>.7.38
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-76-1><a id=__codelineno-76-1 name=__codelineno-76-1 href=#__codelineno-76-1></a>tanzu<span class=w> </span>package<span class=w> </span>available<span class=w> </span>-n<span class=w> </span>tbs-deps-1-7-1<span class=w> </span>get<span class=w> </span><span class=nv>$PACKAGE</span>/<span class=si>${</span><span class=nv>PACKAGE_VERSION</span><span class=si>}</span><span class=w> </span>--values-schema
</span></code></pre></div> <h3 id=tbs-deps-package>TBS Deps Package<a class=headerlink href=#tbs-deps-package title="Permanent link">&para;</a></h3> <div class="language-yaml highlight"><span class=filename>tbs-deps-full-171.yaml</span><pre><span></span><code><span id=__span-77-1><a id=__codelineno-77-1 name=__codelineno-77-1 href=#__codelineno-77-1></a><span class=nt>kp_default_repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tap.h2o-2-19271.h2o.vmware.com/buildservice/full-deps-package-repo</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-78-1><a id=__codelineno-78-1 name=__codelineno-78-1 href=#__codelineno-78-1></a>tanzu<span class=w> </span>package<span class=w> </span>install<span class=w> </span>tbs-deps-full<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-2><a id=__codelineno-78-2 name=__codelineno-78-2 href=#__codelineno-78-2></a><span class=w>  </span>-p<span class=w> </span><span class=nv>$PACKAGE</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-3><a id=__codelineno-78-3 name=__codelineno-78-3 href=#__codelineno-78-3></a><span class=w>  </span>-v<span class=w> </span><span class=nv>$PACKAGE_VERSION</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-78-4><a id=__codelineno-78-4 name=__codelineno-78-4 href=#__codelineno-78-4></a><span class=w>  </span>--values-file<span class=w> </span>tbs-deps-full-171.yaml<span class=w> </span><span class=se>\</span>
</span><span id=__span-78-5><a id=__codelineno-78-5 name=__codelineno-78-5 href=#__codelineno-78-5></a><span class=w>  </span>-n<span class=w> </span>tbs-deps-1-7-1
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-79-1><a id=__codelineno-79-1 name=__codelineno-79-1 href=#__codelineno-79-1></a>tanzu<span class=w> </span>package<span class=w> </span>installed<span class=w> </span>delete<span class=w> </span>-n<span class=w> </span>tbs-deps-1-7-1<span class=w> </span>tbs-deps-full
</span></code></pre></div> <p>{ "auths": { "harbor.tap.h2o-2-19271.h2o.vmware.com": { "username": "admin", "password": "VMware123!", "auth": "YWRtaW46Vk13YXJlMTIzIQ==" } } }</p> <p>{ "auths": { "harbor.tap.h2o-2-19271.h2o.vmware.com": { "username": "admin", "password": "VMware123!", "auth": "YWRtaW46Vk13YXJlMTIzIQo=" } } }</p> <h2 id=tap-gui>TAP GUI<a class=headerlink href=#tap-gui title="Permanent link">&para;</a></h2> <h3 id=backstage-plugins>Backstage Plugins<a class=headerlink href=#backstage-plugins title="Permanent link">&para;</a></h3> <ul> <li><a href=https://vrabbi.cloud/post/tanzu-developer-portal-configurator-deep-dive/ >https://vrabbi.cloud/post/tanzu-developer-portal-configurator-deep-dive/</a></li> <li><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/tap-gui-configurator-building.html>https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/tap-gui-configurator-building.html</a></li> <li> <p><a href="https://www.npmjs.com/search?q=vmware-tanzu">https://www.npmjs.com/search?q=vmware-tanzu</a></p> </li> <li> <p>create: <code>tdp-config.yaml</code></p> </li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-80-1><a id=__codelineno-80-1 name=__codelineno-80-1 href=#__codelineno-80-1></a><span class=nt>app</span><span class=p>:</span>
</span><span id=__span-80-2><a id=__codelineno-80-2 name=__codelineno-80-2 href=#__codelineno-80-2></a><span class=w>  </span><span class=nt>plugins</span><span class=p>:</span>
</span><span id=__span-80-3><a id=__codelineno-80-3 name=__codelineno-80-3 href=#__codelineno-80-3></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;@vmware-tanzu/tdp-plugin-techinsights&quot;</span>
</span><span id=__span-80-4><a id=__codelineno-80-4 name=__codelineno-80-4 href=#__codelineno-80-4></a><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;0.0.2&quot;</span>
</span><span id=__span-80-5><a id=__codelineno-80-5 name=__codelineno-80-5 href=#__codelineno-80-5></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;@vrabbi/tekton-wrapper&quot;</span>
</span><span id=__span-80-6><a id=__codelineno-80-6 name=__codelineno-80-6 href=#__codelineno-80-6></a><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;0.1.2&quot;</span>
</span><span id=__span-80-7><a id=__codelineno-80-7 name=__codelineno-80-7 href=#__codelineno-80-7></a>
</span><span id=__span-80-8><a id=__codelineno-80-8 name=__codelineno-80-8 href=#__codelineno-80-8></a><span class=nt>backend</span><span class=p>:</span>
</span><span id=__span-80-9><a id=__codelineno-80-9 name=__codelineno-80-9 href=#__codelineno-80-9></a><span class=w>  </span><span class=nt>plugins</span><span class=p>:</span>
</span><span id=__span-80-10><a id=__codelineno-80-10 name=__codelineno-80-10 href=#__codelineno-80-10></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s>&quot;@vmware-tanzu/tdp-plugin-techinsights-backend&quot;</span>
</span><span id=__span-80-11><a id=__codelineno-80-11 name=__codelineno-80-11 href=#__codelineno-80-11></a><span class=w>      </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s>&quot;0.0.2&quot;</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-81-1><a id=__codelineno-81-1 name=__codelineno-81-1 href=#__codelineno-81-1></a>imgpkg<span class=w> </span>describe<span class=w> </span>-b<span class=w> </span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>-n<span class=w> </span>tap-install<span class=w> </span><span class=k>$(</span>kubectl<span class=w> </span>get<span class=w> </span>package<span class=w> </span>-n<span class=w> </span>tap-install<span class=w> </span><span class=se>\</span>
</span><span id=__span-81-2><a id=__codelineno-81-2 name=__codelineno-81-2 href=#__codelineno-81-2></a>--field-selector<span class=w> </span>spec.refName<span class=o>=</span>tpb.tanzu.vmware.com<span class=w> </span>-o<span class=w> </span>name<span class=k>)</span><span class=w> </span>-o<span class=w> </span><span class=se>\</span>
</span><span id=__span-81-3><a id=__codelineno-81-3 name=__codelineno-81-3 href=#__codelineno-81-3></a><span class=nv>jsonpath</span><span class=o>=</span><span class=s2>&quot;{.spec.template.spec.fetch[0].imgpkgBundle.image}&quot;</span><span class=k>)</span><span class=w> </span>-o<span class=w> </span>yaml<span class=w> </span>--tty<span class=o>=</span><span class=nb>true</span><span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span>-A<span class=w> </span><span class=m>1</span><span class=w> </span><span class=se>\</span>
</span><span id=__span-81-4><a id=__codelineno-81-4 name=__codelineno-81-4 href=#__codelineno-81-4></a><span class=s2>&quot;kbld.carvel.dev/id: harbor-repo.vmware.com/esback/configurator&quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>grep<span class=w> </span><span class=s2>&quot;image: &quot;</span><span class=w> </span><span class=p>|</span><span class=w> </span>sed<span class=w> </span><span class=s1>&#39;s/\simage: //g&#39;</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-82-1><a id=__codelineno-82-1 name=__codelineno-82-1 href=#__codelineno-82-1></a><span class=w>      </span>image:<span class=w> </span>registry.tanzu.vmware.com/tanzu-application-platform/tap-packages@sha256:001d3879720c2dc131ec95db6c6a34ff3c2f912d9d8b7ffacb8da08a844b740f
</span></code></pre></div> <blockquote> <p>Record this value to later use it in place of the TDP-IMAGE-LOCATION placeholder in the workload definition</p> </blockquote> <div class="language-sh highlight"><pre><span></span><code><span id=__span-83-1><a id=__codelineno-83-1 name=__codelineno-83-1 href=#__codelineno-83-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TDP_IMAGE_LOCATION</span><span class=o>=</span>registry.tanzu.vmware.com/tanzu-application-platform/tap-packages@sha256:001d3879720c2dc131ec95db6c6a34ff3c2f912d9d8b7ffacb8da08a844b740f
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-84-1><a id=__codelineno-84-1 name=__codelineno-84-1 href=#__codelineno-84-1></a><span class=nb>export</span><span class=w> </span><span class=nv>ENCODED_TDP_CONFIG_VALUE</span><span class=o>=</span><span class=k>$(</span>base64<span class=w> </span>-i<span class=w> </span>tdp-config.yaml<span class=k>)</span>
</span></code></pre></div> <ul> <li>create <code>tdp-sc.yaml</code></li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-85-1><a id=__codelineno-85-1 name=__codelineno-85-1 href=#__codelineno-85-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">carto.run/v1alpha1</span>
</span><span id=__span-85-2><a id=__codelineno-85-2 name=__codelineno-85-2 href=#__codelineno-85-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterSupplyChain</span>
</span><span id=__span-85-3><a id=__codelineno-85-3 name=__codelineno-85-3 href=#__codelineno-85-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-85-4><a id=__codelineno-85-4 name=__codelineno-85-4 href=#__codelineno-85-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-configurator</span>
</span><span id=__span-85-5><a id=__codelineno-85-5 name=__codelineno-85-5 href=#__codelineno-85-5></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-85-6><a id=__codelineno-85-6 name=__codelineno-85-6 href=#__codelineno-85-6></a><span class=w>  </span><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-85-7><a id=__codelineno-85-7 name=__codelineno-85-7 href=#__codelineno-85-7></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">source-provider</span>
</span><span id=__span-85-8><a id=__codelineno-85-8 name=__codelineno-85-8 href=#__codelineno-85-8></a><span class=w>    </span><span class=nt>params</span><span class=p>:</span>
</span><span id=__span-85-9><a id=__codelineno-85-9 name=__codelineno-85-9 href=#__codelineno-85-9></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-10><a id=__codelineno-85-10 name=__codelineno-85-10 href=#__codelineno-85-10></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">serviceAccount</span>
</span><span id=__span-85-11><a id=__codelineno-85-11 name=__codelineno-85-11 href=#__codelineno-85-11></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry.tanzu.vmware.com/tanzu-application-platform/tap-packages@sha256:001d3879720c2dc131ec95db6c6a34ff3c2f912d9d8b7ffacb8da08a844b740f</span>
</span><span id=__span-85-12><a id=__codelineno-85-12 name=__codelineno-85-12 href=#__codelineno-85-12></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp_configurator_bundle</span>
</span><span id=__span-85-13><a id=__codelineno-85-13 name=__codelineno-85-13 href=#__codelineno-85-13></a><span class=w>    </span><span class=nt>templateRef</span><span class=p>:</span>
</span><span id=__span-85-14><a id=__codelineno-85-14 name=__codelineno-85-14 href=#__codelineno-85-14></a><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterSourceTemplate</span>
</span><span id=__span-85-15><a id=__codelineno-85-15 name=__codelineno-85-15 href=#__codelineno-85-15></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-source-template</span>
</span><span id=__span-85-16><a id=__codelineno-85-16 name=__codelineno-85-16 href=#__codelineno-85-16></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">image-provider</span>
</span><span id=__span-85-17><a id=__codelineno-85-17 name=__codelineno-85-17 href=#__codelineno-85-17></a><span class=w>    </span><span class=nt>params</span><span class=p>:</span>
</span><span id=__span-85-18><a id=__codelineno-85-18 name=__codelineno-85-18 href=#__codelineno-85-18></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-19><a id=__codelineno-85-19 name=__codelineno-85-19 href=#__codelineno-85-19></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">serviceAccount</span>
</span><span id=__span-85-20><a id=__codelineno-85-20 name=__codelineno-85-20 href=#__codelineno-85-20></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
</span><span id=__span-85-21><a id=__codelineno-85-21 name=__codelineno-85-21 href=#__codelineno-85-21></a><span class=w>      </span><span class=nt>default</span><span class=p>:</span>
</span><span id=__span-85-22><a id=__codelineno-85-22 name=__codelineno-85-22 href=#__codelineno-85-22></a><span class=w>        </span><span class=nt>ca_cert_data</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|-</span>
</span><span id=__span-85-23><a id=__codelineno-85-23 name=__codelineno-85-23 href=#__codelineno-85-23></a><span class=w>          </span><span class=no>-----BEGIN CERTIFICATE-----</span>
</span><span id=__span-85-24><a id=__codelineno-85-24 name=__codelineno-85-24 href=#__codelineno-85-24></a><span class=w>          </span><span class=no>MIID7jCCAtagAwIBAgIURv5DzXSDklERFu4gL2sQBNeRg+owDQYJKoZIhvcNAQEL</span>
</span><span id=__span-85-25><a id=__codelineno-85-25 name=__codelineno-85-25 href=#__codelineno-85-25></a><span class=w>          </span><span class=no>BQAwgY4xCzAJBgNVBAYTAk5MMRgwFgYDVQQIEw9UaGUgTmV0aGVybGFuZHMxEDAO</span>
</span><span id=__span-85-26><a id=__codelineno-85-26 name=__codelineno-85-26 href=#__codelineno-85-26></a><span class=w>          </span><span class=no>BgNVBAcTB1V0cmVjaHQxFTATBgNVBAoTDEtlYXJvcyBUYW56dTEdMBsGA1UECxMU</span>
</span><span id=__span-85-27><a id=__codelineno-85-27 name=__codelineno-85-27 href=#__codelineno-85-27></a><span class=w>          </span><span class=no>S2Vhcm9zIFRhbnp1IFJvb3QgQ0ExHTAbBgNVBAMTFEtlYXJvcyBUYW56dSBSb290</span>
</span><span id=__span-85-28><a id=__codelineno-85-28 name=__codelineno-85-28 href=#__codelineno-85-28></a><span class=w>          </span><span class=no>IENBMB4XDTIyMDMyMzE1MzUwMFoXDTI3MDMyMjE1MzUwMFowgY4xCzAJBgNVBAYT</span>
</span><span id=__span-85-29><a id=__codelineno-85-29 name=__codelineno-85-29 href=#__codelineno-85-29></a><span class=w>          </span><span class=no>Ak5MMRgwFgYDVQQIEw9UaGUgTmV0aGVybGFuZHMxEDAOBgNVBAcTB1V0cmVjaHQx</span>
</span><span id=__span-85-30><a id=__codelineno-85-30 name=__codelineno-85-30 href=#__codelineno-85-30></a><span class=w>          </span><span class=no>FTATBgNVBAoTDEtlYXJvcyBUYW56dTEdMBsGA1UECxMUS2Vhcm9zIFRhbnp1IFJv</span>
</span><span id=__span-85-31><a id=__codelineno-85-31 name=__codelineno-85-31 href=#__codelineno-85-31></a><span class=w>          </span><span class=no>b3QgQ0ExHTAbBgNVBAMTFEtlYXJvcyBUYW56dSBSb290IENBMIIBIjANBgkqhkiG</span>
</span><span id=__span-85-32><a id=__codelineno-85-32 name=__codelineno-85-32 href=#__codelineno-85-32></a><span class=w>          </span><span class=no>9w0BAQEFAAOCAQ8AMIIBCgKCAQEAyZXDL9W2vu365m//E/w8n1M189a5mI9HcTYa</span>
</span><span id=__span-85-33><a id=__codelineno-85-33 name=__codelineno-85-33 href=#__codelineno-85-33></a><span class=w>          </span><span class=no>0xZhnup58Zp72PsgzujI/fQe43JEeC+aIOcmsoDaQ/uqRi8p8phU5/poxKCbe9SM</span>
</span><span id=__span-85-34><a id=__codelineno-85-34 name=__codelineno-85-34 href=#__codelineno-85-34></a><span class=w>          </span><span class=no>f1OflLD9k2dwte6OV5kcSUbVOgScKL1wGEo5mdOiTFrEp5aLBUcbUeJMYz2IqLVa</span>
</span><span id=__span-85-35><a id=__codelineno-85-35 name=__codelineno-85-35 href=#__codelineno-85-35></a><span class=w>          </span><span class=no>v52H0vTzGfmrfSm/PQb+5qnCE5D88DREqKtWdWW2bCW0HhxVHk6XX/FKD2Z0FHWI</span>
</span><span id=__span-85-36><a id=__codelineno-85-36 name=__codelineno-85-36 href=#__codelineno-85-36></a><span class=w>          </span><span class=no>ChejeaiarXqWBI94BANbOAOmlhjjyJekT5hL1gh7BuCLbiE+A53kWnXO6Xb/eyuJ</span>
</span><span id=__span-85-37><a id=__codelineno-85-37 name=__codelineno-85-37 href=#__codelineno-85-37></a><span class=w>          </span><span class=no>obr+uHLJldoJq7SFyvxrDd/8LAJD4XMCEz+3gWjYDXMH7GfPWwIDAQABo0IwQDAO</span>
</span><span id=__span-85-38><a id=__codelineno-85-38 name=__codelineno-85-38 href=#__codelineno-85-38></a><span class=w>          </span><span class=no>BgNVHQ8BAf8EBAMCAQYwDwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUfGU50Pe9</span>
</span><span id=__span-85-39><a id=__codelineno-85-39 name=__codelineno-85-39 href=#__codelineno-85-39></a><span class=w>          </span><span class=no>YTv5SFvGVOz6R7ddPcUwDQYJKoZIhvcNAQELBQADggEBAHMoNDxy9/kL4nW0Bhc5</span>
</span><span id=__span-85-40><a id=__codelineno-85-40 name=__codelineno-85-40 href=#__codelineno-85-40></a><span class=w>          </span><span class=no>Gn0mD8xqt+qpLGgChlsMPNR0xPW04YDotm+GmZHZg1t6vE8WPKsktcuv76d+hX4A</span>
</span><span id=__span-85-41><a id=__codelineno-85-41 name=__codelineno-85-41 href=#__codelineno-85-41></a><span class=w>          </span><span class=no>uhXXGS9D0FeC6I6j6dOIW7Sbd3iAQQopwICYFL9EFA+QAINeY/Y99Lf3B11JfLU8</span>
</span><span id=__span-85-42><a id=__codelineno-85-42 name=__codelineno-85-42 href=#__codelineno-85-42></a><span class=w>          </span><span class=no>jN9uGHKFI0FVwHX428ObVrDi3+OCNewQ3fLmrRQe6F6q2OU899huCg+eYECWvxZR</span>
</span><span id=__span-85-43><a id=__codelineno-85-43 name=__codelineno-85-43 href=#__codelineno-85-43></a><span class=w>          </span><span class=no>a3SlVZmYnefbA87jI2FRHUPqxp4P2mDwj/RZxhgIobhw0zz08sqC6DW0Aj1OIJe5</span>
</span><span id=__span-85-44><a id=__codelineno-85-44 name=__codelineno-85-44 href=#__codelineno-85-44></a><span class=w>          </span><span class=no>sDAm0uiUdqs7FZN2uKkLKekdTgW0QkTFEJTk5Yk9t/hOrjnHoWQfB+mLhO3vPhip</span>
</span><span id=__span-85-45><a id=__codelineno-85-45 name=__codelineno-85-45 href=#__codelineno-85-45></a><span class=w>          </span><span class=no>vhs=</span>
</span><span id=__span-85-46><a id=__codelineno-85-46 name=__codelineno-85-46 href=#__codelineno-85-46></a><span class=w>          </span><span class=no>-----END CERTIFICATE-----</span>
</span><span id=__span-85-47><a id=__codelineno-85-47 name=__codelineno-85-47 href=#__codelineno-85-47></a><span class=w>        </span><span class=nt>repository</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-apps</span>
</span><span id=__span-85-48><a id=__codelineno-85-48 name=__codelineno-85-48 href=#__codelineno-85-48></a><span class=w>        </span><span class=nt>server</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">harbor.tap.h2o-2-19271.h2o.vmware.com</span>
</span><span id=__span-85-49><a id=__codelineno-85-49 name=__codelineno-85-49 href=#__codelineno-85-49></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-50><a id=__codelineno-85-50 name=__codelineno-85-50 href=#__codelineno-85-50></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">clusterBuilder</span>
</span><span id=__span-85-51><a id=__codelineno-85-51 name=__codelineno-85-51 href=#__codelineno-85-51></a><span class=w>    </span><span class=nt>sources</span><span class=p>:</span>
</span><span id=__span-85-52><a id=__codelineno-85-52 name=__codelineno-85-52 href=#__codelineno-85-52></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">source</span>
</span><span id=__span-85-53><a id=__codelineno-85-53 name=__codelineno-85-53 href=#__codelineno-85-53></a><span class=w>      </span><span class=nt>resource</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">source-provider</span>
</span><span id=__span-85-54><a id=__codelineno-85-54 name=__codelineno-85-54 href=#__codelineno-85-54></a><span class=w>    </span><span class=nt>templateRef</span><span class=p>:</span>
</span><span id=__span-85-55><a id=__codelineno-85-55 name=__codelineno-85-55 href=#__codelineno-85-55></a><span class=w>      </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterImageTemplate</span>
</span><span id=__span-85-56><a id=__codelineno-85-56 name=__codelineno-85-56 href=#__codelineno-85-56></a><span class=w>      </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-kpack-template</span>
</span><span id=__span-85-57><a id=__codelineno-85-57 name=__codelineno-85-57 href=#__codelineno-85-57></a>
</span><span id=__span-85-58><a id=__codelineno-85-58 name=__codelineno-85-58 href=#__codelineno-85-58></a><span class=w>  </span><span class=nt>selectorMatchExpressions</span><span class=p>:</span>
</span><span id=__span-85-59><a id=__codelineno-85-59 name=__codelineno-85-59 href=#__codelineno-85-59></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>key</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">apps.tanzu.vmware.com/workload-type</span>
</span><span id=__span-85-60><a id=__codelineno-85-60 name=__codelineno-85-60 href=#__codelineno-85-60></a><span class=w>    </span><span class=nt>operator</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">In</span>
</span><span id=__span-85-61><a id=__codelineno-85-61 name=__codelineno-85-61 href=#__codelineno-85-61></a><span class=w>    </span><span class=nt>values</span><span class=p>:</span>
</span><span id=__span-85-62><a id=__codelineno-85-62 name=__codelineno-85-62 href=#__codelineno-85-62></a><span class=w>    </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp</span>
</span><span id=__span-85-63><a id=__codelineno-85-63 name=__codelineno-85-63 href=#__codelineno-85-63></a><span class=nn>---</span>
</span><span id=__span-85-64><a id=__codelineno-85-64 name=__codelineno-85-64 href=#__codelineno-85-64></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">carto.run/v1alpha1</span>
</span><span id=__span-85-65><a id=__codelineno-85-65 name=__codelineno-85-65 href=#__codelineno-85-65></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterImageTemplate</span>
</span><span id=__span-85-66><a id=__codelineno-85-66 name=__codelineno-85-66 href=#__codelineno-85-66></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-85-67><a id=__codelineno-85-67 name=__codelineno-85-67 href=#__codelineno-85-67></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-kpack-template</span>
</span><span id=__span-85-68><a id=__codelineno-85-68 name=__codelineno-85-68 href=#__codelineno-85-68></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-85-69><a id=__codelineno-85-69 name=__codelineno-85-69 href=#__codelineno-85-69></a><span class=w>  </span><span class=nt>healthRule</span><span class=p>:</span>
</span><span id=__span-85-70><a id=__codelineno-85-70 name=__codelineno-85-70 href=#__codelineno-85-70></a><span class=w>    </span><span class=nt>multiMatch</span><span class=p>:</span>
</span><span id=__span-85-71><a id=__codelineno-85-71 name=__codelineno-85-71 href=#__codelineno-85-71></a><span class=w>      </span><span class=nt>healthy</span><span class=p>:</span>
</span><span id=__span-85-72><a id=__codelineno-85-72 name=__codelineno-85-72 href=#__codelineno-85-72></a><span class=w>        </span><span class=nt>matchConditions</span><span class=p>:</span>
</span><span id=__span-85-73><a id=__codelineno-85-73 name=__codelineno-85-73 href=#__codelineno-85-73></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s>&quot;True&quot;</span>
</span><span id=__span-85-74><a id=__codelineno-85-74 name=__codelineno-85-74 href=#__codelineno-85-74></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">BuilderReady</span>
</span><span id=__span-85-75><a id=__codelineno-85-75 name=__codelineno-85-75 href=#__codelineno-85-75></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s>&quot;True&quot;</span>
</span><span id=__span-85-76><a id=__codelineno-85-76 name=__codelineno-85-76 href=#__codelineno-85-76></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ready</span>
</span><span id=__span-85-77><a id=__codelineno-85-77 name=__codelineno-85-77 href=#__codelineno-85-77></a><span class=w>      </span><span class=nt>unhealthy</span><span class=p>:</span>
</span><span id=__span-85-78><a id=__codelineno-85-78 name=__codelineno-85-78 href=#__codelineno-85-78></a><span class=w>        </span><span class=nt>matchConditions</span><span class=p>:</span>
</span><span id=__span-85-79><a id=__codelineno-85-79 name=__codelineno-85-79 href=#__codelineno-85-79></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s>&quot;False&quot;</span>
</span><span id=__span-85-80><a id=__codelineno-85-80 name=__codelineno-85-80 href=#__codelineno-85-80></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">BuilderReady</span>
</span><span id=__span-85-81><a id=__codelineno-85-81 name=__codelineno-85-81 href=#__codelineno-85-81></a><span class=w>        </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>status</span><span class=p>:</span><span class=w> </span><span class=s>&quot;False&quot;</span>
</span><span id=__span-85-82><a id=__codelineno-85-82 name=__codelineno-85-82 href=#__codelineno-85-82></a><span class=w>          </span><span class=nt>type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ready</span>
</span><span id=__span-85-83><a id=__codelineno-85-83 name=__codelineno-85-83 href=#__codelineno-85-83></a><span class=w>  </span><span class=nt>imagePath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.status.latestImage</span>
</span><span id=__span-85-84><a id=__codelineno-85-84 name=__codelineno-85-84 href=#__codelineno-85-84></a><span class=w>  </span><span class=nt>lifecycle</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mutable</span>
</span><span id=__span-85-85><a id=__codelineno-85-85 name=__codelineno-85-85 href=#__codelineno-85-85></a><span class=w>  </span><span class=nt>params</span><span class=p>:</span>
</span><span id=__span-85-86><a id=__codelineno-85-86 name=__codelineno-85-86 href=#__codelineno-85-86></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-87><a id=__codelineno-85-87 name=__codelineno-85-87 href=#__codelineno-85-87></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">serviceAccount</span>
</span><span id=__span-85-88><a id=__codelineno-85-88 name=__codelineno-85-88 href=#__codelineno-85-88></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-89><a id=__codelineno-85-89 name=__codelineno-85-89 href=#__codelineno-85-89></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">clusterBuilder</span>
</span><span id=__span-85-90><a id=__codelineno-85-90 name=__codelineno-85-90 href=#__codelineno-85-90></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry</span>
</span><span id=__span-85-91><a id=__codelineno-85-91 name=__codelineno-85-91 href=#__codelineno-85-91></a><span class=w>    </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">{}</span>
</span><span id=__span-85-92><a id=__codelineno-85-92 name=__codelineno-85-92 href=#__codelineno-85-92></a><span class=w>  </span><span class=nt>ytt</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-85-93><a id=__codelineno-85-93 name=__codelineno-85-93 href=#__codelineno-85-93></a><span class=w>    </span><span class=no>#@ load(&quot;@ytt:data&quot;, &quot;data&quot;)</span>
</span><span id=__span-85-94><a id=__codelineno-85-94 name=__codelineno-85-94 href=#__codelineno-85-94></a><span class=w>    </span><span class=no>#@ load(&quot;@ytt:regexp&quot;, &quot;regexp&quot;)</span>
</span><span id=__span-85-95><a id=__codelineno-85-95 name=__codelineno-85-95 href=#__codelineno-85-95></a>
</span><span id=__span-85-96><a id=__codelineno-85-96 name=__codelineno-85-96 href=#__codelineno-85-96></a><span class=w>    </span><span class=no>#@ def merge_labels(fixed_values):</span>
</span><span id=__span-85-97><a id=__codelineno-85-97 name=__codelineno-85-97 href=#__codelineno-85-97></a><span class=w>    </span><span class=no>#@   labels = {}</span>
</span><span id=__span-85-98><a id=__codelineno-85-98 name=__codelineno-85-98 href=#__codelineno-85-98></a><span class=w>    </span><span class=no>#@   if hasattr(data.values.workload.metadata, &quot;labels&quot;):</span>
</span><span id=__span-85-99><a id=__codelineno-85-99 name=__codelineno-85-99 href=#__codelineno-85-99></a><span class=w>    </span><span class=no>#@     exclusions = [&quot;kapp.k14s.io/app&quot;, &quot;kapp.k14s.io/association&quot;]</span>
</span><span id=__span-85-100><a id=__codelineno-85-100 name=__codelineno-85-100 href=#__codelineno-85-100></a><span class=w>    </span><span class=no>#@     for k,v in dict(data.values.workload.metadata.labels).items():</span>
</span><span id=__span-85-101><a id=__codelineno-85-101 name=__codelineno-85-101 href=#__codelineno-85-101></a><span class=w>    </span><span class=no>#@       if k not in exclusions:</span>
</span><span id=__span-85-102><a id=__codelineno-85-102 name=__codelineno-85-102 href=#__codelineno-85-102></a><span class=w>    </span><span class=no>#@         labels[k] = v</span>
</span><span id=__span-85-103><a id=__codelineno-85-103 name=__codelineno-85-103 href=#__codelineno-85-103></a><span class=w>    </span><span class=no>#@       end</span>
</span><span id=__span-85-104><a id=__codelineno-85-104 name=__codelineno-85-104 href=#__codelineno-85-104></a><span class=w>    </span><span class=no>#@     end</span>
</span><span id=__span-85-105><a id=__codelineno-85-105 name=__codelineno-85-105 href=#__codelineno-85-105></a><span class=w>    </span><span class=no>#@   end</span>
</span><span id=__span-85-106><a id=__codelineno-85-106 name=__codelineno-85-106 href=#__codelineno-85-106></a><span class=w>    </span><span class=no>#@   labels.update(fixed_values)</span>
</span><span id=__span-85-107><a id=__codelineno-85-107 name=__codelineno-85-107 href=#__codelineno-85-107></a><span class=w>    </span><span class=no>#@   return labels</span>
</span><span id=__span-85-108><a id=__codelineno-85-108 name=__codelineno-85-108 href=#__codelineno-85-108></a><span class=w>    </span><span class=no>#@ end</span>
</span><span id=__span-85-109><a id=__codelineno-85-109 name=__codelineno-85-109 href=#__codelineno-85-109></a>
</span><span id=__span-85-110><a id=__codelineno-85-110 name=__codelineno-85-110 href=#__codelineno-85-110></a><span class=w>    </span><span class=no>#@ def image():</span>
</span><span id=__span-85-111><a id=__codelineno-85-111 name=__codelineno-85-111 href=#__codelineno-85-111></a><span class=w>    </span><span class=no>#@   return &quot;/&quot;.join([</span>
</span><span id=__span-85-112><a id=__codelineno-85-112 name=__codelineno-85-112 href=#__codelineno-85-112></a><span class=w>    </span><span class=no>#@    data.values.params.registry.server,</span>
</span><span id=__span-85-113><a id=__codelineno-85-113 name=__codelineno-85-113 href=#__codelineno-85-113></a><span class=w>    </span><span class=no>#@    data.values.params.registry.repository,</span>
</span><span id=__span-85-114><a id=__codelineno-85-114 name=__codelineno-85-114 href=#__codelineno-85-114></a><span class=w>    </span><span class=no>#@    &quot;-&quot;.join([</span>
</span><span id=__span-85-115><a id=__codelineno-85-115 name=__codelineno-85-115 href=#__codelineno-85-115></a><span class=w>    </span><span class=no>#@      data.values.workload.metadata.name,</span>
</span><span id=__span-85-116><a id=__codelineno-85-116 name=__codelineno-85-116 href=#__codelineno-85-116></a><span class=w>    </span><span class=no>#@      data.values.workload.metadata.namespace,</span>
</span><span id=__span-85-117><a id=__codelineno-85-117 name=__codelineno-85-117 href=#__codelineno-85-117></a><span class=w>    </span><span class=no>#@    ])</span>
</span><span id=__span-85-118><a id=__codelineno-85-118 name=__codelineno-85-118 href=#__codelineno-85-118></a><span class=w>    </span><span class=no>#@   ])</span>
</span><span id=__span-85-119><a id=__codelineno-85-119 name=__codelineno-85-119 href=#__codelineno-85-119></a><span class=w>    </span><span class=no>#@ end</span>
</span><span id=__span-85-120><a id=__codelineno-85-120 name=__codelineno-85-120 href=#__codelineno-85-120></a>
</span><span id=__span-85-121><a id=__codelineno-85-121 name=__codelineno-85-121 href=#__codelineno-85-121></a><span class=w>    </span><span class=no>#@ bp_node_run_scripts = &quot;set-tpb-config,portal:pack&quot;</span>
</span><span id=__span-85-122><a id=__codelineno-85-122 name=__codelineno-85-122 href=#__codelineno-85-122></a><span class=w>    </span><span class=no>#@ tpb_config = &quot;/tmp/tpb-config.yaml&quot;</span>
</span><span id=__span-85-123><a id=__codelineno-85-123 name=__codelineno-85-123 href=#__codelineno-85-123></a>
</span><span id=__span-85-124><a id=__codelineno-85-124 name=__codelineno-85-124 href=#__codelineno-85-124></a><span class=w>    </span><span class=no>#@ for env in data.values.workload.spec.build.env:</span>
</span><span id=__span-85-125><a id=__codelineno-85-125 name=__codelineno-85-125 href=#__codelineno-85-125></a><span class=w>    </span><span class=no>#@   if env.name == &quot;TPB_CONFIG_STRING&quot;:</span>
</span><span id=__span-85-126><a id=__codelineno-85-126 name=__codelineno-85-126 href=#__codelineno-85-126></a><span class=w>    </span><span class=no>#@     tpb_config_string = env.value</span>
</span><span id=__span-85-127><a id=__codelineno-85-127 name=__codelineno-85-127 href=#__codelineno-85-127></a><span class=w>    </span><span class=no>#@   end</span>
</span><span id=__span-85-128><a id=__codelineno-85-128 name=__codelineno-85-128 href=#__codelineno-85-128></a><span class=w>    </span><span class=no>#@   if env.name == &quot;BP_NODE_RUN_SCRIPTS&quot;:</span>
</span><span id=__span-85-129><a id=__codelineno-85-129 name=__codelineno-85-129 href=#__codelineno-85-129></a><span class=w>    </span><span class=no>#@     bp_node_run_scripts = env.value</span>
</span><span id=__span-85-130><a id=__codelineno-85-130 name=__codelineno-85-130 href=#__codelineno-85-130></a><span class=w>    </span><span class=no>#@   end</span>
</span><span id=__span-85-131><a id=__codelineno-85-131 name=__codelineno-85-131 href=#__codelineno-85-131></a><span class=w>    </span><span class=no>#@   if env.name == &quot;TPB_CONFIG&quot;:</span>
</span><span id=__span-85-132><a id=__codelineno-85-132 name=__codelineno-85-132 href=#__codelineno-85-132></a><span class=w>    </span><span class=no>#@     tpb_config = env.value</span>
</span><span id=__span-85-133><a id=__codelineno-85-133 name=__codelineno-85-133 href=#__codelineno-85-133></a><span class=w>    </span><span class=no>#@   end</span>
</span><span id=__span-85-134><a id=__codelineno-85-134 name=__codelineno-85-134 href=#__codelineno-85-134></a><span class=w>    </span><span class=no>#@ end</span>
</span><span id=__span-85-135><a id=__codelineno-85-135 name=__codelineno-85-135 href=#__codelineno-85-135></a>
</span><span id=__span-85-136><a id=__codelineno-85-136 name=__codelineno-85-136 href=#__codelineno-85-136></a><span class=w>    </span><span class=no>apiVersion: kpack.io/v1alpha2</span>
</span><span id=__span-85-137><a id=__codelineno-85-137 name=__codelineno-85-137 href=#__codelineno-85-137></a><span class=w>    </span><span class=no>kind: Image</span>
</span><span id=__span-85-138><a id=__codelineno-85-138 name=__codelineno-85-138 href=#__codelineno-85-138></a><span class=w>    </span><span class=no>metadata:</span>
</span><span id=__span-85-139><a id=__codelineno-85-139 name=__codelineno-85-139 href=#__codelineno-85-139></a><span class=w>      </span><span class=no>name: #@ data.values.workload.metadata.name</span>
</span><span id=__span-85-140><a id=__codelineno-85-140 name=__codelineno-85-140 href=#__codelineno-85-140></a><span class=w>      </span><span class=no>labels: #@ merge_labels({ &quot;app.kubernetes.io/component&quot;: &quot;build&quot; })</span>
</span><span id=__span-85-141><a id=__codelineno-85-141 name=__codelineno-85-141 href=#__codelineno-85-141></a><span class=w>    </span><span class=no>spec:</span>
</span><span id=__span-85-142><a id=__codelineno-85-142 name=__codelineno-85-142 href=#__codelineno-85-142></a><span class=w>      </span><span class=no>tag: #@ image()</span>
</span><span id=__span-85-143><a id=__codelineno-85-143 name=__codelineno-85-143 href=#__codelineno-85-143></a><span class=w>      </span><span class=no>serviceAccountName: #@ data.values.params.serviceAccount</span>
</span><span id=__span-85-144><a id=__codelineno-85-144 name=__codelineno-85-144 href=#__codelineno-85-144></a><span class=w>      </span><span class=no>builder:</span>
</span><span id=__span-85-145><a id=__codelineno-85-145 name=__codelineno-85-145 href=#__codelineno-85-145></a><span class=w>        </span><span class=no>kind: ClusterBuilder</span>
</span><span id=__span-85-146><a id=__codelineno-85-146 name=__codelineno-85-146 href=#__codelineno-85-146></a><span class=w>        </span><span class=no>name: #@ data.values.params.clusterBuilder</span>
</span><span id=__span-85-147><a id=__codelineno-85-147 name=__codelineno-85-147 href=#__codelineno-85-147></a><span class=w>      </span><span class=no>source:</span>
</span><span id=__span-85-148><a id=__codelineno-85-148 name=__codelineno-85-148 href=#__codelineno-85-148></a><span class=w>        </span><span class=no>blob:</span>
</span><span id=__span-85-149><a id=__codelineno-85-149 name=__codelineno-85-149 href=#__codelineno-85-149></a><span class=w>          </span><span class=no>url: #@ data.values.source.url</span>
</span><span id=__span-85-150><a id=__codelineno-85-150 name=__codelineno-85-150 href=#__codelineno-85-150></a><span class=w>        </span><span class=no>subPath: builder</span>
</span><span id=__span-85-151><a id=__codelineno-85-151 name=__codelineno-85-151 href=#__codelineno-85-151></a><span class=w>      </span><span class=no>build:</span>
</span><span id=__span-85-152><a id=__codelineno-85-152 name=__codelineno-85-152 href=#__codelineno-85-152></a><span class=w>        </span><span class=no>env:</span>
</span><span id=__span-85-153><a id=__codelineno-85-153 name=__codelineno-85-153 href=#__codelineno-85-153></a><span class=w>        </span><span class=no>- name: BP_OCI_SOURCE</span>
</span><span id=__span-85-154><a id=__codelineno-85-154 name=__codelineno-85-154 href=#__codelineno-85-154></a><span class=w>          </span><span class=no>value: #@ data.values.source.revision</span>
</span><span id=__span-85-155><a id=__codelineno-85-155 name=__codelineno-85-155 href=#__codelineno-85-155></a><span class=w>        </span><span class=no>#@  if regexp.match(&quot;^([a-zA-Z0-9\/_-]+)(\@sha1:)?[0-9a-f]{40}$&quot;, data.values.source.revision):</span>
</span><span id=__span-85-156><a id=__codelineno-85-156 name=__codelineno-85-156 href=#__codelineno-85-156></a><span class=w>        </span><span class=no>- name: BP_OCI_REVISION</span>
</span><span id=__span-85-157><a id=__codelineno-85-157 name=__codelineno-85-157 href=#__codelineno-85-157></a><span class=w>          </span><span class=no>value: #@ data.values.source.revision</span>
</span><span id=__span-85-158><a id=__codelineno-85-158 name=__codelineno-85-158 href=#__codelineno-85-158></a><span class=w>        </span><span class=no>#@ end</span>
</span><span id=__span-85-159><a id=__codelineno-85-159 name=__codelineno-85-159 href=#__codelineno-85-159></a><span class=w>        </span><span class=no>- name: BP_NODE_RUN_SCRIPTS</span>
</span><span id=__span-85-160><a id=__codelineno-85-160 name=__codelineno-85-160 href=#__codelineno-85-160></a><span class=w>          </span><span class=no>value: #@ bp_node_run_scripts</span>
</span><span id=__span-85-161><a id=__codelineno-85-161 name=__codelineno-85-161 href=#__codelineno-85-161></a><span class=w>        </span><span class=no>- name: TPB_CONFIG</span>
</span><span id=__span-85-162><a id=__codelineno-85-162 name=__codelineno-85-162 href=#__codelineno-85-162></a><span class=w>          </span><span class=no>value: #@ tpb_config</span>
</span><span id=__span-85-163><a id=__codelineno-85-163 name=__codelineno-85-163 href=#__codelineno-85-163></a><span class=w>        </span><span class=no>- name: TPB_CONFIG_STRING</span>
</span><span id=__span-85-164><a id=__codelineno-85-164 name=__codelineno-85-164 href=#__codelineno-85-164></a><span class=w>          </span><span class=no>value: #@ tpb_config_string</span>
</span><span id=__span-85-165><a id=__codelineno-85-165 name=__codelineno-85-165 href=#__codelineno-85-165></a>
</span><span id=__span-85-166><a id=__codelineno-85-166 name=__codelineno-85-166 href=#__codelineno-85-166></a><span class=nn>---</span>
</span><span id=__span-85-167><a id=__codelineno-85-167 name=__codelineno-85-167 href=#__codelineno-85-167></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">carto.run/v1alpha1</span>
</span><span id=__span-85-168><a id=__codelineno-85-168 name=__codelineno-85-168 href=#__codelineno-85-168></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterSourceTemplate</span>
</span><span id=__span-85-169><a id=__codelineno-85-169 name=__codelineno-85-169 href=#__codelineno-85-169></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-85-170><a id=__codelineno-85-170 name=__codelineno-85-170 href=#__codelineno-85-170></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-source-template</span>
</span><span id=__span-85-171><a id=__codelineno-85-171 name=__codelineno-85-171 href=#__codelineno-85-171></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-85-172><a id=__codelineno-85-172 name=__codelineno-85-172 href=#__codelineno-85-172></a><span class=w>  </span><span class=nt>healthRule</span><span class=p>:</span>
</span><span id=__span-85-173><a id=__codelineno-85-173 name=__codelineno-85-173 href=#__codelineno-85-173></a><span class=w>    </span><span class=nt>singleConditionType</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Ready</span>
</span><span id=__span-85-174><a id=__codelineno-85-174 name=__codelineno-85-174 href=#__codelineno-85-174></a><span class=w>  </span><span class=nt>lifecycle</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">mutable</span>
</span><span id=__span-85-175><a id=__codelineno-85-175 name=__codelineno-85-175 href=#__codelineno-85-175></a><span class=w>  </span><span class=nt>params</span><span class=p>:</span>
</span><span id=__span-85-176><a id=__codelineno-85-176 name=__codelineno-85-176 href=#__codelineno-85-176></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>default</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">default</span>
</span><span id=__span-85-177><a id=__codelineno-85-177 name=__codelineno-85-177 href=#__codelineno-85-177></a><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">serviceAccount</span>
</span><span id=__span-85-178><a id=__codelineno-85-178 name=__codelineno-85-178 href=#__codelineno-85-178></a><span class=w>  </span><span class=nt>revisionPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.status.artifact.revision</span>
</span><span id=__span-85-179><a id=__codelineno-85-179 name=__codelineno-85-179 href=#__codelineno-85-179></a><span class=w>  </span><span class=nt>urlPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">.status.artifact.url</span>
</span><span id=__span-85-180><a id=__codelineno-85-180 name=__codelineno-85-180 href=#__codelineno-85-180></a><span class=w>  </span><span class=nt>ytt</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-85-181><a id=__codelineno-85-181 name=__codelineno-85-181 href=#__codelineno-85-181></a><span class=w>    </span><span class=no>#@ load(&quot;@ytt:data&quot;, &quot;data&quot;)</span>
</span><span id=__span-85-182><a id=__codelineno-85-182 name=__codelineno-85-182 href=#__codelineno-85-182></a>
</span><span id=__span-85-183><a id=__codelineno-85-183 name=__codelineno-85-183 href=#__codelineno-85-183></a><span class=w>    </span><span class=no>#@ def merge_labels(fixed_values):</span>
</span><span id=__span-85-184><a id=__codelineno-85-184 name=__codelineno-85-184 href=#__codelineno-85-184></a><span class=w>    </span><span class=no>#@   labels = {}</span>
</span><span id=__span-85-185><a id=__codelineno-85-185 name=__codelineno-85-185 href=#__codelineno-85-185></a><span class=w>    </span><span class=no>#@   if hasattr(data.values.workload.metadata, &quot;labels&quot;):</span>
</span><span id=__span-85-186><a id=__codelineno-85-186 name=__codelineno-85-186 href=#__codelineno-85-186></a><span class=w>    </span><span class=no>#@     exclusions = [&quot;kapp.k14s.io/app&quot;, &quot;kapp.k14s.io/association&quot;]</span>
</span><span id=__span-85-187><a id=__codelineno-85-187 name=__codelineno-85-187 href=#__codelineno-85-187></a><span class=w>    </span><span class=no>#@     for k,v in dict(data.values.workload.metadata.labels).items():</span>
</span><span id=__span-85-188><a id=__codelineno-85-188 name=__codelineno-85-188 href=#__codelineno-85-188></a><span class=w>    </span><span class=no>#@       if k not in exclusions:</span>
</span><span id=__span-85-189><a id=__codelineno-85-189 name=__codelineno-85-189 href=#__codelineno-85-189></a><span class=w>    </span><span class=no>#@         labels[k] = v</span>
</span><span id=__span-85-190><a id=__codelineno-85-190 name=__codelineno-85-190 href=#__codelineno-85-190></a><span class=w>    </span><span class=no>#@       end</span>
</span><span id=__span-85-191><a id=__codelineno-85-191 name=__codelineno-85-191 href=#__codelineno-85-191></a><span class=w>    </span><span class=no>#@     end</span>
</span><span id=__span-85-192><a id=__codelineno-85-192 name=__codelineno-85-192 href=#__codelineno-85-192></a><span class=w>    </span><span class=no>#@   end</span>
</span><span id=__span-85-193><a id=__codelineno-85-193 name=__codelineno-85-193 href=#__codelineno-85-193></a><span class=w>    </span><span class=no>#@   labels.update(fixed_values)</span>
</span><span id=__span-85-194><a id=__codelineno-85-194 name=__codelineno-85-194 href=#__codelineno-85-194></a><span class=w>    </span><span class=no>#@   return labels</span>
</span><span id=__span-85-195><a id=__codelineno-85-195 name=__codelineno-85-195 href=#__codelineno-85-195></a><span class=w>    </span><span class=no>#@ end</span>
</span><span id=__span-85-196><a id=__codelineno-85-196 name=__codelineno-85-196 href=#__codelineno-85-196></a>
</span><span id=__span-85-197><a id=__codelineno-85-197 name=__codelineno-85-197 href=#__codelineno-85-197></a><span class=w>    </span><span class=no>---</span>
</span><span id=__span-85-198><a id=__codelineno-85-198 name=__codelineno-85-198 href=#__codelineno-85-198></a><span class=w>    </span><span class=no>apiVersion: source.apps.tanzu.vmware.com/v1alpha1</span>
</span><span id=__span-85-199><a id=__codelineno-85-199 name=__codelineno-85-199 href=#__codelineno-85-199></a><span class=w>    </span><span class=no>kind: ImageRepository</span>
</span><span id=__span-85-200><a id=__codelineno-85-200 name=__codelineno-85-200 href=#__codelineno-85-200></a><span class=w>    </span><span class=no>metadata:</span>
</span><span id=__span-85-201><a id=__codelineno-85-201 name=__codelineno-85-201 href=#__codelineno-85-201></a><span class=w>      </span><span class=no>name: #@ data.values.workload.metadata.name</span>
</span><span id=__span-85-202><a id=__codelineno-85-202 name=__codelineno-85-202 href=#__codelineno-85-202></a><span class=w>      </span><span class=no>labels: #@ merge_labels({ &quot;app.kubernetes.io/component&quot;: &quot;source&quot; })</span>
</span><span id=__span-85-203><a id=__codelineno-85-203 name=__codelineno-85-203 href=#__codelineno-85-203></a><span class=w>    </span><span class=no>spec:</span>
</span><span id=__span-85-204><a id=__codelineno-85-204 name=__codelineno-85-204 href=#__codelineno-85-204></a><span class=w>      </span><span class=no>serviceAccountName: #@ data.values.params.serviceAccount</span>
</span><span id=__span-85-205><a id=__codelineno-85-205 name=__codelineno-85-205 href=#__codelineno-85-205></a><span class=w>      </span><span class=no>interval: 10m0s</span>
</span><span id=__span-85-206><a id=__codelineno-85-206 name=__codelineno-85-206 href=#__codelineno-85-206></a><span class=w>      </span><span class=no>#@ if hasattr(data.values.workload.spec, &quot;source&quot;) and hasattr(data.values.workload.spec.source, &quot;image&quot;):</span>
</span><span id=__span-85-207><a id=__codelineno-85-207 name=__codelineno-85-207 href=#__codelineno-85-207></a><span class=w>      </span><span class=no>image: #@ data.values.workload.spec.source.image</span>
</span><span id=__span-85-208><a id=__codelineno-85-208 name=__codelineno-85-208 href=#__codelineno-85-208></a><span class=w>      </span><span class=no>#@ else:</span>
</span><span id=__span-85-209><a id=__codelineno-85-209 name=__codelineno-85-209 href=#__codelineno-85-209></a><span class=w>      </span><span class=no>image: #@ data.values.params.tdp_configurator_bundle</span>
</span><span id=__span-85-210><a id=__codelineno-85-210 name=__codelineno-85-210 href=#__codelineno-85-210></a><span class=w>      </span><span class=no>#@ end</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-86-1><a id=__codelineno-86-1 name=__codelineno-86-1 href=#__codelineno-86-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>tdp-sc.yaml
</span></code></pre></div> <ul> <li>create <code>tdp-workload.yaml</code></li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-87-1><a id=__codelineno-87-1 name=__codelineno-87-1 href=#__codelineno-87-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">carto.run/v1alpha1</span>
</span><span id=__span-87-2><a id=__codelineno-87-2 name=__codelineno-87-2 href=#__codelineno-87-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Workload</span>
</span><span id=__span-87-3><a id=__codelineno-87-3 name=__codelineno-87-3 href=#__codelineno-87-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-87-4><a id=__codelineno-87-4 name=__codelineno-87-4 href=#__codelineno-87-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-configurator-1-sc</span>
</span><span id=__span-87-5><a id=__codelineno-87-5 name=__codelineno-87-5 href=#__codelineno-87-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">d1</span>
</span><span id=__span-87-6><a id=__codelineno-87-6 name=__codelineno-87-6 href=#__codelineno-87-6></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-87-7><a id=__codelineno-87-7 name=__codelineno-87-7 href=#__codelineno-87-7></a><span class=w>    </span><span class=nt>apps.tanzu.vmware.com/workload-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp</span>
</span><span id=__span-87-8><a id=__codelineno-87-8 name=__codelineno-87-8 href=#__codelineno-87-8></a><span class=w>    </span><span class=nt>app.kubernetes.io/part-of</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-configurator-1-custom</span>
</span><span id=__span-87-9><a id=__codelineno-87-9 name=__codelineno-87-9 href=#__codelineno-87-9></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-87-10><a id=__codelineno-87-10 name=__codelineno-87-10 href=#__codelineno-87-10></a><span class=w>  </span><span class=nt>build</span><span class=p>:</span>
</span><span id=__span-87-11><a id=__codelineno-87-11 name=__codelineno-87-11 href=#__codelineno-87-11></a><span class=w>    </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-87-12><a id=__codelineno-87-12 name=__codelineno-87-12 href=#__codelineno-87-12></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TPB_CONFIG_STRING</span>
</span><span id=__span-87-13><a id=__codelineno-87-13 name=__codelineno-87-13 href=#__codelineno-87-13></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YXBwOgogIHBsdWdpbnM6CiAgICAtIG5hbWU6ICJAdm13YXJlLXRhbnp1L3RkcC1wbHVnaW4tdGVjaGluc2lnaHRzIgogICAgICB2ZXJzaW9uOiAiMC4wLjIiCiAgICAtIG5hbWU6ICJAdnJhYmJpL3Rla3Rvbi13cmFwcGVyIgogICAgICB2ZXJzaW9uOiAiMC4xLjIiCgpiYWNrZW5kOgogIHBsdWdpbnM6CiAgICAtIG5hbWU6ICJAdm13YXJlLXRhbnp1L3RkcC1wbHVnaW4tdGVjaGluc2lnaHRzLWJhY2tlbmQiCiAgICAgIHZlcnNpb246ICIwLjAuMiIKCg==</span><span class=w> </span><span class=c1># ENCODED_TDP_CONFIG_VALUE</span>
</span></code></pre></div> <p>Alternative:</p> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-88-1><a id=__codelineno-88-1 name=__codelineno-88-1 href=#__codelineno-88-1></a><span class=nn>---</span>
</span><span id=__span-88-2><a id=__codelineno-88-2 name=__codelineno-88-2 href=#__codelineno-88-2></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">carto.run/v1alpha1</span>
</span><span id=__span-88-3><a id=__codelineno-88-3 name=__codelineno-88-3 href=#__codelineno-88-3></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Workload</span>
</span><span id=__span-88-4><a id=__codelineno-88-4 name=__codelineno-88-4 href=#__codelineno-88-4></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-88-5><a id=__codelineno-88-5 name=__codelineno-88-5 href=#__codelineno-88-5></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-configurator</span>
</span><span id=__span-88-6><a id=__codelineno-88-6 name=__codelineno-88-6 href=#__codelineno-88-6></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">d1</span>
</span><span id=__span-88-7><a id=__codelineno-88-7 name=__codelineno-88-7 href=#__codelineno-88-7></a><span class=w>  </span><span class=nt>labels</span><span class=p>:</span>
</span><span id=__span-88-8><a id=__codelineno-88-8 name=__codelineno-88-8 href=#__codelineno-88-8></a><span class=w>    </span><span class=nt>apps.tanzu.vmware.com/workload-type</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">web</span>
</span><span id=__span-88-9><a id=__codelineno-88-9 name=__codelineno-88-9 href=#__codelineno-88-9></a><span class=w>    </span><span class=nt>app.kubernetes.io/part-of</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-configurator</span>
</span><span id=__span-88-10><a id=__codelineno-88-10 name=__codelineno-88-10 href=#__codelineno-88-10></a><span class=nt>spec</span><span class=p>:</span>
</span><span id=__span-88-11><a id=__codelineno-88-11 name=__codelineno-88-11 href=#__codelineno-88-11></a><span class=w>  </span><span class=nt>build</span><span class=p>:</span>
</span><span id=__span-88-12><a id=__codelineno-88-12 name=__codelineno-88-12 href=#__codelineno-88-12></a><span class=w>    </span><span class=nt>env</span><span class=p>:</span>
</span><span id=__span-88-13><a id=__codelineno-88-13 name=__codelineno-88-13 href=#__codelineno-88-13></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">BP_NODE_RUN_SCRIPTS</span>
</span><span id=__span-88-14><a id=__codelineno-88-14 name=__codelineno-88-14 href=#__codelineno-88-14></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class=s>&#39;set-tdp-config,portal:pack&#39;</span>
</span><span id=__span-88-15><a id=__codelineno-88-15 name=__codelineno-88-15 href=#__codelineno-88-15></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TPB_CONFIG</span>
</span><span id=__span-88-16><a id=__codelineno-88-16 name=__codelineno-88-16 href=#__codelineno-88-16></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">/tmp/tdp-config.yaml</span>
</span><span id=__span-88-17><a id=__codelineno-88-17 name=__codelineno-88-17 href=#__codelineno-88-17></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">TPB_CONFIG_STRING</span>
</span><span id=__span-88-18><a id=__codelineno-88-18 name=__codelineno-88-18 href=#__codelineno-88-18></a><span class=w>        </span><span class=nt>value</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">YXBwOgogIHBsdWdpbnM6CiAgICAtIG5hbWU6ICJAdm13YXJlLXRhbnp1L3RkcC1wbHVnaW4tdGVjaGluc2lnaHRzIgogICAgICB2ZXJzaW9uOiAiMC4wLjIiCiAgICAtIG5hbWU6ICJAdnJhYmJpL3Rla3Rvbi13cmFwcGVyIgogICAgICB2ZXJzaW9uOiAiMC4xLjIiCgpiYWNrZW5kOgogIHBsdWdpbnM6CiAgICAtIG5hbWU6ICJAdm13YXJlLXRhbnp1L3RkcC1wbHVnaW4tdGVjaGluc2lnaHRzLWJhY2tlbmQiCiAgICAgIHZlcnNpb246ICIwLjAuMiIKCg==</span><span class=w> </span><span class=c1># ENCODED_TDP_CONFIG_VALUE</span>
</span><span id=__span-88-19><a id=__codelineno-88-19 name=__codelineno-88-19 href=#__codelineno-88-19></a><span class=w>  </span><span class=nt>source</span><span class=p>:</span>
</span><span id=__span-88-20><a id=__codelineno-88-20 name=__codelineno-88-20 href=#__codelineno-88-20></a><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">registry.tanzu.vmware.com/tanzu-application-platform/tap-packages@sha256:001d3879720c2dc131ec95db6c6a34ff3c2f912d9d8b7ffacb8da08a844b740f</span><span class=w> </span><span class=c1>#TDP_IMAGE_LOCATION</span>
</span><span id=__span-88-21><a id=__codelineno-88-21 name=__codelineno-88-21 href=#__codelineno-88-21></a><span class=w>    </span><span class=nt>subPath</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">builder</span>
</span></code></pre></div> <h3 id=run-it>Run It<a class=headerlink href=#run-it title="Permanent link">&para;</a></h3> <ul> <li><a href=https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/tap-gui-configurator-running.html>https://docs.vmware.com/en/VMware-Tanzu-Application-Platform/1.7/tap/tap-gui-configurator-running.html</a></li> </ul> <div class="language-sh highlight"><pre><span></span><code><span id=__span-89-1><a id=__codelineno-89-1 name=__codelineno-89-1 href=#__codelineno-89-1></a><span class=nb>export</span><span class=w> </span><span class=nv>TDP_CONFIGURATOR_IMAGE</span><span class=o>=</span>harbor.tap.h2o-2-19271.h2o.vmware.com/tap-apps/tdp-configurator-1-sc-d1@sha256:6d612f6f55b338c97816035f3751e40acc255dc9fd46eec4bf8dea637806fc4e
</span></code></pre></div> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-90-1><a id=__codelineno-90-1 name=__codelineno-90-1 href=#__codelineno-90-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
</span><span id=__span-90-2><a id=__codelineno-90-2 name=__codelineno-90-2 href=#__codelineno-90-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
</span><span id=__span-90-3><a id=__codelineno-90-3 name=__codelineno-90-3 href=#__codelineno-90-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-90-4><a id=__codelineno-90-4 name=__codelineno-90-4 href=#__codelineno-90-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-app-image-overlay-secret</span>
</span><span id=__span-90-5><a id=__codelineno-90-5 name=__codelineno-90-5 href=#__codelineno-90-5></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-install</span>
</span><span id=__span-90-6><a id=__codelineno-90-6 name=__codelineno-90-6 href=#__codelineno-90-6></a><span class=nt>stringData</span><span class=p>:</span>
</span><span id=__span-90-7><a id=__codelineno-90-7 name=__codelineno-90-7 href=#__codelineno-90-7></a><span class=w>  </span><span class=nt>tdp-app-image-overlay.yaml</span><span class=p>:</span><span class=w> </span><span class="p p-Indicator">|</span>
</span><span id=__span-90-8><a id=__codelineno-90-8 name=__codelineno-90-8 href=#__codelineno-90-8></a><span class=w>    </span><span class=no>#@ load(&quot;@ytt:overlay&quot;, &quot;overlay&quot;)</span>
</span><span id=__span-90-9><a id=__codelineno-90-9 name=__codelineno-90-9 href=#__codelineno-90-9></a>
</span><span id=__span-90-10><a id=__codelineno-90-10 name=__codelineno-90-10 href=#__codelineno-90-10></a><span class=w>    </span><span class=no>#! makes an assumption that tap-gui is deployed in the namespace: &quot;tap-gui&quot;</span>
</span><span id=__span-90-11><a id=__codelineno-90-11 name=__codelineno-90-11 href=#__codelineno-90-11></a><span class=w>    </span><span class=no>#@overlay/match by=overlay.subset({&quot;kind&quot;: &quot;Deployment&quot;, &quot;metadata&quot;: {&quot;name&quot;: &quot;server&quot;, &quot;namespace&quot;: &quot;tap-gui&quot;}}), expects=&quot;1+&quot;</span>
</span><span id=__span-90-12><a id=__codelineno-90-12 name=__codelineno-90-12 href=#__codelineno-90-12></a><span class=w>    </span><span class=no>---</span>
</span><span id=__span-90-13><a id=__codelineno-90-13 name=__codelineno-90-13 href=#__codelineno-90-13></a><span class=w>    </span><span class=no>spec:</span>
</span><span id=__span-90-14><a id=__codelineno-90-14 name=__codelineno-90-14 href=#__codelineno-90-14></a><span class=w>      </span><span class=no>template:</span>
</span><span id=__span-90-15><a id=__codelineno-90-15 name=__codelineno-90-15 href=#__codelineno-90-15></a><span class=w>        </span><span class=no>spec:</span>
</span><span id=__span-90-16><a id=__codelineno-90-16 name=__codelineno-90-16 href=#__codelineno-90-16></a><span class=w>          </span><span class=no>containers:</span>
</span><span id=__span-90-17><a id=__codelineno-90-17 name=__codelineno-90-17 href=#__codelineno-90-17></a><span class=w>            </span><span class=no>#@overlay/match by=overlay.subset({&quot;name&quot;: &quot;backstage&quot;}),expects=&quot;1+&quot;</span>
</span><span id=__span-90-18><a id=__codelineno-90-18 name=__codelineno-90-18 href=#__codelineno-90-18></a><span class=w>            </span><span class=no>#@overlay/match-child-defaults missing_ok=True</span>
</span><span id=__span-90-19><a id=__codelineno-90-19 name=__codelineno-90-19 href=#__codelineno-90-19></a><span class=w>            </span><span class=no>- image: harbor.tap.h2o-2-19271.h2o.vmware.com/tap-apps/tdp-configurator-1-sc-d1@sha256:6d612f6f55b338c97816035f3751e40acc255dc9fd46eec4bf8dea637806fc4e #! TDP_CONFIGURATOR_IMAGE</span>
</span><span id=__span-90-20><a id=__codelineno-90-20 name=__codelineno-90-20 href=#__codelineno-90-20></a><span class=w>            </span><span class=no>#@overlay/replace</span>
</span><span id=__span-90-21><a id=__codelineno-90-21 name=__codelineno-90-21 href=#__codelineno-90-21></a><span class=w>              </span><span class=no>args:</span>
</span><span id=__span-90-22><a id=__codelineno-90-22 name=__codelineno-90-22 href=#__codelineno-90-22></a><span class=w>              </span><span class=no>- -c</span>
</span><span id=__span-90-23><a id=__codelineno-90-23 name=__codelineno-90-23 href=#__codelineno-90-23></a><span class=w>              </span><span class=no>- |</span>
</span><span id=__span-90-24><a id=__codelineno-90-24 name=__codelineno-90-24 href=#__codelineno-90-24></a><span class=w>                </span><span class=no>export KUBERNETES_SERVICE_ACCOUNT_TOKEN=&quot;$(cat /var/run/secrets/kubernetes.io/serviceaccount/token)&quot;</span>
</span><span id=__span-90-25><a id=__codelineno-90-25 name=__codelineno-90-25 href=#__codelineno-90-25></a><span class=w>                </span><span class=no>exec /layers/tanzu-buildpacks_node-engine/node/bin/node portal/dist/packages/backend  \</span>
</span><span id=__span-90-26><a id=__codelineno-90-26 name=__codelineno-90-26 href=#__codelineno-90-26></a><span class=w>                </span><span class=no>--config=portal/app-config.yaml \</span>
</span><span id=__span-90-27><a id=__codelineno-90-27 name=__codelineno-90-27 href=#__codelineno-90-27></a><span class=w>                </span><span class=no>--config=portal/runtime-config.yaml \</span>
</span><span id=__span-90-28><a id=__codelineno-90-28 name=__codelineno-90-28 href=#__codelineno-90-28></a><span class=w>                </span><span class=no>--config=/etc/app-config/app-config.yaml</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-91-1><a id=__codelineno-91-1 name=__codelineno-91-1 href=#__codelineno-91-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>tdp-overlay-secret.yaml
</span></code></pre></div> <h3 id=permissions-for-tap-gui-sa>Permissions for TAP GUI SA<a class=headerlink href=#permissions-for-tap-gui-sa title="Permanent link">&para;</a></h3> <ul> <li>create <code>tdp-alt-crs-rbac.yaml</code></li> </ul> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-92-1><a id=__codelineno-92-1 name=__codelineno-92-1 href=#__codelineno-92-1></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id=__span-92-2><a id=__codelineno-92-2 name=__codelineno-92-2 href=#__codelineno-92-2></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
</span><span id=__span-92-3><a id=__codelineno-92-3 name=__codelineno-92-3 href=#__codelineno-92-3></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-92-4><a id=__codelineno-92-4 name=__codelineno-92-4 href=#__codelineno-92-4></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-viewer-alt-crs</span>
</span><span id=__span-92-5><a id=__codelineno-92-5 name=__codelineno-92-5 href=#__codelineno-92-5></a><span class=nt>rules</span><span class=p>:</span>
</span><span id=__span-92-6><a id=__codelineno-92-6 name=__codelineno-92-6 href=#__codelineno-92-6></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
</span><span id=__span-92-7><a id=__codelineno-92-7 name=__codelineno-92-7 href=#__codelineno-92-7></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tekton.dev</span>
</span><span id=__span-92-8><a id=__codelineno-92-8 name=__codelineno-92-8 href=#__codelineno-92-8></a><span class=w>    </span><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-92-9><a id=__codelineno-92-9 name=__codelineno-92-9 href=#__codelineno-92-9></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">pipelineruns</span>
</span><span id=__span-92-10><a id=__codelineno-92-10 name=__codelineno-92-10 href=#__codelineno-92-10></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">taskruns</span>
</span><span id=__span-92-11><a id=__codelineno-92-11 name=__codelineno-92-11 href=#__codelineno-92-11></a><span class=w>    </span><span class=nt>verbs</span><span class=p>:</span>
</span><span id=__span-92-12><a id=__codelineno-92-12 name=__codelineno-92-12 href=#__codelineno-92-12></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">get</span>
</span><span id=__span-92-13><a id=__codelineno-92-13 name=__codelineno-92-13 href=#__codelineno-92-13></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">list</span>
</span><span id=__span-92-14><a id=__codelineno-92-14 name=__codelineno-92-14 href=#__codelineno-92-14></a><span class=w>  </span><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>apiGroups</span><span class=p>:</span>
</span><span id=__span-92-15><a id=__codelineno-92-15 name=__codelineno-92-15 href=#__codelineno-92-15></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">argoproj.io</span>
</span><span id=__span-92-16><a id=__codelineno-92-16 name=__codelineno-92-16 href=#__codelineno-92-16></a><span class=w>    </span><span class=nt>resources</span><span class=p>:</span>
</span><span id=__span-92-17><a id=__codelineno-92-17 name=__codelineno-92-17 href=#__codelineno-92-17></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">applications</span>
</span><span id=__span-92-18><a id=__codelineno-92-18 name=__codelineno-92-18 href=#__codelineno-92-18></a><span class=w>    </span><span class=nt>verbs</span><span class=p>:</span>
</span><span id=__span-92-19><a id=__codelineno-92-19 name=__codelineno-92-19 href=#__codelineno-92-19></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">get</span>
</span><span id=__span-92-20><a id=__codelineno-92-20 name=__codelineno-92-20 href=#__codelineno-92-20></a><span class=w>      </span><span class="p p-Indicator">-</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">list</span>
</span><span id=__span-92-21><a id=__codelineno-92-21 name=__codelineno-92-21 href=#__codelineno-92-21></a><span class=nn>---</span>
</span><span id=__span-92-22><a id=__codelineno-92-22 name=__codelineno-92-22 href=#__codelineno-92-22></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id=__span-92-23><a id=__codelineno-92-23 name=__codelineno-92-23 href=#__codelineno-92-23></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
</span><span id=__span-92-24><a id=__codelineno-92-24 name=__codelineno-92-24 href=#__codelineno-92-24></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-92-25><a id=__codelineno-92-25 name=__codelineno-92-25 href=#__codelineno-92-25></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-viewer-alt-crs-tap-gui-viewer</span>
</span><span id=__span-92-26><a id=__codelineno-92-26 name=__codelineno-92-26 href=#__codelineno-92-26></a><span class=nt>subjects</span><span class=p>:</span>
</span><span id=__span-92-27><a id=__codelineno-92-27 name=__codelineno-92-27 href=#__codelineno-92-27></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id=__span-92-28><a id=__codelineno-92-28 name=__codelineno-92-28 href=#__codelineno-92-28></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-gui-viewer</span>
</span><span id=__span-92-29><a id=__codelineno-92-29 name=__codelineno-92-29 href=#__codelineno-92-29></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-gui</span>
</span><span id=__span-92-30><a id=__codelineno-92-30 name=__codelineno-92-30 href=#__codelineno-92-30></a><span class=nt>roleRef</span><span class=p>:</span>
</span><span id=__span-92-31><a id=__codelineno-92-31 name=__codelineno-92-31 href=#__codelineno-92-31></a><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
</span><span id=__span-92-32><a id=__codelineno-92-32 name=__codelineno-92-32 href=#__codelineno-92-32></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-viewer-alt-crs</span>
</span><span id=__span-92-33><a id=__codelineno-92-33 name=__codelineno-92-33 href=#__codelineno-92-33></a><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</span><span id=__span-92-34><a id=__codelineno-92-34 name=__codelineno-92-34 href=#__codelineno-92-34></a><span class=nn>---</span>
</span><span id=__span-92-35><a id=__codelineno-92-35 name=__codelineno-92-35 href=#__codelineno-92-35></a><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io/v1</span>
</span><span id=__span-92-36><a id=__codelineno-92-36 name=__codelineno-92-36 href=#__codelineno-92-36></a><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRoleBinding</span>
</span><span id=__span-92-37><a id=__codelineno-92-37 name=__codelineno-92-37 href=#__codelineno-92-37></a><span class=nt>metadata</span><span class=p>:</span>
</span><span id=__span-92-38><a id=__codelineno-92-38 name=__codelineno-92-38 href=#__codelineno-92-38></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-viewer-alt-crs-tap-gui</span>
</span><span id=__span-92-39><a id=__codelineno-92-39 name=__codelineno-92-39 href=#__codelineno-92-39></a><span class=nt>subjects</span><span class=p>:</span>
</span><span id=__span-92-40><a id=__codelineno-92-40 name=__codelineno-92-40 href=#__codelineno-92-40></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ServiceAccount</span>
</span><span id=__span-92-41><a id=__codelineno-92-41 name=__codelineno-92-41 href=#__codelineno-92-41></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-gui</span>
</span><span id=__span-92-42><a id=__codelineno-92-42 name=__codelineno-92-42 href=#__codelineno-92-42></a><span class=w>  </span><span class=nt>namespace</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tap-gui</span>
</span><span id=__span-92-43><a id=__codelineno-92-43 name=__codelineno-92-43 href=#__codelineno-92-43></a><span class=nt>roleRef</span><span class=p>:</span>
</span><span id=__span-92-44><a id=__codelineno-92-44 name=__codelineno-92-44 href=#__codelineno-92-44></a><span class=w>  </span><span class=nt>kind</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">ClusterRole</span>
</span><span id=__span-92-45><a id=__codelineno-92-45 name=__codelineno-92-45 href=#__codelineno-92-45></a><span class=w>  </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">tdp-viewer-alt-crs</span>
</span><span id=__span-92-46><a id=__codelineno-92-46 name=__codelineno-92-46 href=#__codelineno-92-46></a><span class=w>  </span><span class=nt>apiGroup</span><span class=p>:</span><span class=w> </span><span class="l l-Scalar l-Scalar-Plain">rbac.authorization.k8s.io</span>
</span></code></pre></div> <div class="language-sh highlight"><pre><span></span><code><span id=__span-93-1><a id=__codelineno-93-1 name=__codelineno-93-1 href=#__codelineno-93-1></a>kubectl<span class=w> </span>apply<span class=w> </span>-f<span class=w> </span>tdp-alt-crs-rbac.yaml
</span></code></pre></div> <div class="language-yaml highlight"><pre><span></span><code><span id=__span-94-1><a id=__codelineno-94-1 name=__codelineno-94-1 href=#__codelineno-94-1></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;serving.knative.dev&#39;</span>
</span><span id=__span-94-2><a id=__codelineno-94-2 name=__codelineno-94-2 href=#__codelineno-94-2></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1&#39;</span>
</span><span id=__span-94-3><a id=__codelineno-94-3 name=__codelineno-94-3 href=#__codelineno-94-3></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;revisions&#39;</span>
</span><span id=__span-94-4><a id=__codelineno-94-4 name=__codelineno-94-4 href=#__codelineno-94-4></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;serving.knative.dev&#39;</span>
</span><span id=__span-94-5><a id=__codelineno-94-5 name=__codelineno-94-5 href=#__codelineno-94-5></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1&#39;</span>
</span><span id=__span-94-6><a id=__codelineno-94-6 name=__codelineno-94-6 href=#__codelineno-94-6></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;services&#39;</span>
</span><span id=__span-94-7><a id=__codelineno-94-7 name=__codelineno-94-7 href=#__codelineno-94-7></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;serving.knative.dev&#39;</span>
</span><span id=__span-94-8><a id=__codelineno-94-8 name=__codelineno-94-8 href=#__codelineno-94-8></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1&#39;</span>
</span><span id=__span-94-9><a id=__codelineno-94-9 name=__codelineno-94-9 href=#__codelineno-94-9></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;routes&#39;</span>
</span><span id=__span-94-10><a id=__codelineno-94-10 name=__codelineno-94-10 href=#__codelineno-94-10></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-11><a id=__codelineno-94-11 name=__codelineno-94-11 href=#__codelineno-94-11></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-12><a id=__codelineno-94-12 name=__codelineno-94-12 href=#__codelineno-94-12></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clusterconfigtemplates&#39;</span>
</span><span id=__span-94-13><a id=__codelineno-94-13 name=__codelineno-94-13 href=#__codelineno-94-13></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-14><a id=__codelineno-94-14 name=__codelineno-94-14 href=#__codelineno-94-14></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-15><a id=__codelineno-94-15 name=__codelineno-94-15 href=#__codelineno-94-15></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clusterdeliveries&#39;</span>
</span><span id=__span-94-16><a id=__codelineno-94-16 name=__codelineno-94-16 href=#__codelineno-94-16></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-17><a id=__codelineno-94-17 name=__codelineno-94-17 href=#__codelineno-94-17></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-18><a id=__codelineno-94-18 name=__codelineno-94-18 href=#__codelineno-94-18></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clusterdeploymenttemplates&#39;</span>
</span><span id=__span-94-19><a id=__codelineno-94-19 name=__codelineno-94-19 href=#__codelineno-94-19></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-20><a id=__codelineno-94-20 name=__codelineno-94-20 href=#__codelineno-94-20></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-21><a id=__codelineno-94-21 name=__codelineno-94-21 href=#__codelineno-94-21></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clusterimagetemplates&#39;</span>
</span><span id=__span-94-22><a id=__codelineno-94-22 name=__codelineno-94-22 href=#__codelineno-94-22></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-23><a id=__codelineno-94-23 name=__codelineno-94-23 href=#__codelineno-94-23></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-24><a id=__codelineno-94-24 name=__codelineno-94-24 href=#__codelineno-94-24></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clustersourcetemplates&#39;</span>
</span><span id=__span-94-25><a id=__codelineno-94-25 name=__codelineno-94-25 href=#__codelineno-94-25></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-26><a id=__codelineno-94-26 name=__codelineno-94-26 href=#__codelineno-94-26></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-27><a id=__codelineno-94-27 name=__codelineno-94-27 href=#__codelineno-94-27></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clustersupplychains&#39;</span>
</span><span id=__span-94-28><a id=__codelineno-94-28 name=__codelineno-94-28 href=#__codelineno-94-28></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-29><a id=__codelineno-94-29 name=__codelineno-94-29 href=#__codelineno-94-29></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-30><a id=__codelineno-94-30 name=__codelineno-94-30 href=#__codelineno-94-30></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;clustertemplates&#39;</span>
</span><span id=__span-94-31><a id=__codelineno-94-31 name=__codelineno-94-31 href=#__codelineno-94-31></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-32><a id=__codelineno-94-32 name=__codelineno-94-32 href=#__codelineno-94-32></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-33><a id=__codelineno-94-33 name=__codelineno-94-33 href=#__codelineno-94-33></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;deliverables&#39;</span>
</span><span id=__span-94-34><a id=__codelineno-94-34 name=__codelineno-94-34 href=#__codelineno-94-34></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-35><a id=__codelineno-94-35 name=__codelineno-94-35 href=#__codelineno-94-35></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-36><a id=__codelineno-94-36 name=__codelineno-94-36 href=#__codelineno-94-36></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;runnables&#39;</span>
</span><span id=__span-94-37><a id=__codelineno-94-37 name=__codelineno-94-37 href=#__codelineno-94-37></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;carto.run&#39;</span>
</span><span id=__span-94-38><a id=__codelineno-94-38 name=__codelineno-94-38 href=#__codelineno-94-38></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-39><a id=__codelineno-94-39 name=__codelineno-94-39 href=#__codelineno-94-39></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;runnables&#39;</span>
</span><span id=__span-94-40><a id=__codelineno-94-40 name=__codelineno-94-40 href=#__codelineno-94-40></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;source.toolkit.fluxcd.io&#39;</span>
</span><span id=__span-94-41><a id=__codelineno-94-41 name=__codelineno-94-41 href=#__codelineno-94-41></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1beta2&#39;</span>
</span><span id=__span-94-42><a id=__codelineno-94-42 name=__codelineno-94-42 href=#__codelineno-94-42></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;gitrepositories&#39;</span>
</span><span id=__span-94-43><a id=__codelineno-94-43 name=__codelineno-94-43 href=#__codelineno-94-43></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;source.apps.tanzu.vmware.com&#39;</span>
</span><span id=__span-94-44><a id=__codelineno-94-44 name=__codelineno-94-44 href=#__codelineno-94-44></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-45><a id=__codelineno-94-45 name=__codelineno-94-45 href=#__codelineno-94-45></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;imagerepositories&#39;</span>
</span><span id=__span-94-46><a id=__codelineno-94-46 name=__codelineno-94-46 href=#__codelineno-94-46></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;source.apps.tanzu.vmware.com&#39;</span>
</span><span id=__span-94-47><a id=__codelineno-94-47 name=__codelineno-94-47 href=#__codelineno-94-47></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-48><a id=__codelineno-94-48 name=__codelineno-94-48 href=#__codelineno-94-48></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;mavenartifacts&#39;</span>
</span><span id=__span-94-49><a id=__codelineno-94-49 name=__codelineno-94-49 href=#__codelineno-94-49></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;conventions.carto.run&#39;</span>
</span><span id=__span-94-50><a id=__codelineno-94-50 name=__codelineno-94-50 href=#__codelineno-94-50></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha1&#39;</span>
</span><span id=__span-94-51><a id=__codelineno-94-51 name=__codelineno-94-51 href=#__codelineno-94-51></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;podintents&#39;</span>
</span><span id=__span-94-52><a id=__codelineno-94-52 name=__codelineno-94-52 href=#__codelineno-94-52></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;kpack.io&#39;</span>
</span><span id=__span-94-53><a id=__codelineno-94-53 name=__codelineno-94-53 href=#__codelineno-94-53></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha2&#39;</span>
</span><span id=__span-94-54><a id=__codelineno-94-54 name=__codelineno-94-54 href=#__codelineno-94-54></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;images&#39;</span>
</span><span id=__span-94-55><a id=__codelineno-94-55 name=__codelineno-94-55 href=#__codelineno-94-55></a><span class="p p-Indicator">-</span><span class=w> </span><span class=nt>group</span><span class=p>:</span><span class=w> </span><span class=s>&#39;kpack.io&#39;</span>
</span><span id=__span-94-56><a id=__codelineno-94-56 name=__codelineno-94-56 href=#__codelineno-94-56></a><span class=w>  </span><span class=nt>apiVersion</span><span class=p>:</span><span class=w> </span><span class=s>&#39;v1alpha2&#39;</span>
</span><span id=__span-94-57><a id=__codelineno-94-57 name=__codelineno-94-57 href=#__codelineno-94-57></a><span class=w>  </span><span class=nt>plural</span><span class=p>:</span><span class=w> </span><span class=s>&#39;builds&#39;</span>
</span></code></pre></div> <hr> <div class=md-source-file> <small> Last update: <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_datetime">2023-12-08 13:20:39</span> </small> </div> </article> </div> </div> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2023 Joost van der Griendt </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/joostvdg target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 480 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg> </a> <a href=https://twitter.com/joost_vdg target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg> </a> <a href=https://linkedin.com/in/joostvdg target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../..", "features": ["navigation.tabs", "navigation.instant", "navigation.tabs.sticky", "content.code.annotate", "content.code.copy", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../assets/javascripts/bundle.aecac24b.min.js></script> </body> </html>